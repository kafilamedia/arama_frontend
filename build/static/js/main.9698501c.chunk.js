(this["webpackJsonparabic-club"]=this["webpackJsonparabic-club"]||[]).push([[0],{42:function(e,t,a){},45:function(e,t,a){e.exports=a(80)},50:function(e,t,a){},51:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(22),l=a.n(i),s=(a(50),a(4)),c=a(9),u=a(3),d=a(2),m=a(1),p=(a(51),a(8)),f=a(7),h=a(18),v={mainApp:void 0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(f.a)(Object(f.a)({},e),{},{mainApp:t.payload});default:return e}};!function(e){e.admin_asrama="admin_asrama",e.musyrif_asrama="musyrif_asrama",e.user="user"}(n||(n={}));var b=function e(){Object(m.a)(this,e),this.id=void 0},E=1,y=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++E+"-"+e};var S=function(e){return e>=10?e.toString():"0"+e},N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).nickname=void 0,e.name=void 0,e.email=void 0,e.password=void 0,e.profileImage=void 0,e.roles=[n.user],e.requestId=void 0,e.nip=void 0,e}return Object(s.a)(a,[{key:"hasRole",value:function(e){for(var t=0;t<this.roles.length;t++){if(this.roles[t]==e)return!0}return!1}}],[{key:"clone",value:function(e){return Object.assign(new a,e)}}]),a}(b),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=y(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.role=[],e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e.userAuthorized=function(t){if(0==e.role.length)return!0;if(!t)return!1;t=N.clone(t);for(var a=0;a<e.role.length;a++){var n=e.role[a];if(t.hasRole(n))return!0}return!1},e}return a}(b);O.defaultMenuIconClassName="fas fa-folder",O.getIconClassName=function(e){return void 0==e.menuClass?O.defaultMenuIconClassName:e.menuClass};var j=function(){for(var e=[],t=0;t<C.length;t++){var a=C[t],n=Object.assign(new O,a),r=[];if(a.subMenus){for(var o=0;o<a.subMenus.length;o++){var i=a.subMenus[o];r.push(Object.assign(new O,i))}n.subMenus=r}e.push(n)}return e},C=[{code:"home",name:"Home",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1,role:[]},{code:"dashboard",name:"Dashboard",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,role:[n.admin_asrama,n.musyrif_asrama],subMenus:[{code:"menu1",name:"Menu #1",url:"menu1",menuClass:"fas fa-history",role:[n.admin_asrama,n.musyrif_asrama]}]},{code:"management",name:"Management",url:"/management",menuClass:"fas fa-mail-bulk",active:!1,authenticated:!0,showSidebar:!0,role:[n.admin_asrama],subMenus:[{code:"musyrifmanagement",name:"Musyrif Management",url:"musyrifmanagement",menuClass:"fas fa-users",role:[n.admin_asrama]},{code:"rule_category",name:"Rule Category",url:"rule_category",menuClass:"fas fa-tags",role:[n.admin_asrama]},{code:"rule_point",name:"Rule Point",url:"rule_point",menuClass:"fas fa-puzzle-piece",role:[n.admin_asrama]}]},{code:"dormitoryactivity",name:"Dormitory",url:"/dormitoryactivity",menuClass:"fas fa-school",active:!1,authenticated:!0,showSidebar:!0,role:[n.musyrif_asrama],subMenus:[{code:"studentlist",name:"Student List",url:"studentlist",menuClass:"fas fa-users",role:[n.musyrif_asrama]},{code:"input_point",name:"Input Point",url:"inputpoint",menuClass:"fas fa-pen-square",role:[n.musyrif_asrama]},{code:"medicalrecord",name:"Medical Record",url:"medicalrecord",menuClass:"fas fa-briefcase-medical",role:[n.musyrif_asrama]},{code:"pointsummary",name:"Summary Point",url:"pointsummary",menuClass:"fas fa-list",role:[n.musyrif_asrama]}]},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,role:[n.admin_asrama,n.musyrif_asrama],subMenus:[{code:"user_profile",name:"Profile",menuClass:"fas fa-user-cog",url:"user-profile",role:[n.admin_asrama,n.musyrif_asrama]},{code:"app_profile",name:"Application Setting",menuClass:"fas fa-cog",url:"app-profile",role:[n.admin_asrama]}]}],w={loginKey:null,loginStatus:!1,loginFailed:!1,menus:j(),loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:{},assetsPath:""},k=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0,n={};switch(a.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",a.payload.message),n=Object(f.a)(Object(f.a)({},t),{},{requestId:a.payload.message,applicationProfile:null!==(e=a.payload.profile)&&void 0!==e?e:{},assetsPath:a.payload.profile.assetsPath}),1==a.payload.loginStatus?(n.loggedUser=a.payload.user,n.loginStatus=!0):(n.loginStatus=!1,n.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",a.payload.message),console.debug("REQUEST_ID result.loginStatus:",n.loginStatus),a.payload.referer.refresh(),n;case"do_login":return n=Object(f.a)(Object(f.a)({},t),{},{loginAttempt:!0,loginStatus:a.payload.loginStatus,loginKey:a.payload.loginKey,loginFailed:0==a.payload.loginStatus,loggedUser:a.payload.loggedUser});case"do_logout":return n=Object(f.a)(Object(f.a)({},t),{},{loginStatus:!1,loggedUser:null}),ne(null),n;case"refresh_login":return n=Object(f.a)(Object(f.a)({},t),{},{loginStatus:a.payload.loginStatus,loggedUser:a.payload.loggedUser,requestId:a.payload.requestId});case"get_logged_user":return n=Object(f.a)(Object(f.a)({},t),{},{loggedUser:a.payload.data});case"set_logged_user":return n=Object(f.a)(Object(f.a)({},t),{},{loggedUser:a.payload.user});case"SET_APPLICATION_PROFILE":return n=Object(f.a)(Object(f.a)({},t),{},{applicationProfile:a.payload.applicationProfile});default:return Object(f.a)({},t)}},P=function(){function e(){Object(m.a)(this,e),this.name="",this.blob=new Blob,this.url="",this.data=""}return Object(s.a)(e,[{key:"setUrl",value:function(e){this.url=e,this.data=e.split(",")[1]}}],[{key:"nameOnly",value:function(t){var a=new e;return a.name=t,a}},{key:"instance",value:function(t,a){var n=new e;return n.name=t,n.url=a,n}}]),e}(),A=a(31),R=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){A.post(e,a,{headers:G()}).then((function(e){ae(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},I=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){A.post(e,a,{headers:$()}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},D=function(){function e(){Object(m.a)(this,e),this.getById=function(e){var t=se().concat("api/masterdata/getbyid");return R(t,e)},this.delete=function(e){var t=se().concat("api/masterdata/delete");return R(t,e)},this.list=function(e){var t=se().concat("api/masterdata/list");return R(t,e)},this.update=function(e){var t=se().concat("api/masterdata/update");return R(t,e)},this.updateApplicationProfile=function(e){var t={profile:e},a=se().concat("api/app/setting/updateprofile");return R(a,t)}}return Object(s.a)(e,[{key:"generateReport",value:function(e){return function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){A.post(e,a,{responseType:"blob",headers:G()}).then((function(e){ae(e);var a=e.data;a.rawAxiosResponse=e,console.debug("axiosResponse.headers: ",e.headers);var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],i=new Blob([a],{type:o}),l=window.URL.createObjectURL(i),s=new P;s.name=n,s.blob=i,s.url=l,t(s)})).catch((function(e){console.error(e),n(e)}))}))}(se().concat("api/app/report/records"),e)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();D.instance=void 0;var L=function(){function e(){Object(m.a)(this,e),this.updateProfile=function(e){var t={user:e},a=se().concat("api/member/account/updateprofile");return R(a,t)},this.saveUser=function(e){var t={user:e},a=se().concat("api/public/register");return I(a,t)},this.requestApplicationId=function(e,t){var a=se()+"api/accountdashboard/requestid";R(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;ae(a),console.debug("response header:",a.headers.api_token),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){var a=se()+"api/account/requestid";I(a,{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId No Auth: ",e),t()}))}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();L.instance=void 0;var M=function(){function e(){Object(m.a)(this,e)}return Object(s.a)(e,[{key:"employeeList",value:function(e){return R(se()+"/api/musyrifmanagement/employees",{filter:e})}},{key:"activate",value:function(e,t){var a={employee_id:e.id,active:t};return R(se()+"/api/musyrifmanagement/activate",a)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();M.instance=void 0;var _=function(){function e(){Object(m.a)(this,e),this.submitMedicalRecord=function(e){var t={medicalRecord:e};return R(se()+"/api/dormitorymanagement/submitmedicalrecord",t)},this.loadMonthlyMedicalRecord=function(e,t,a){var n={filter:{year:a,month:t,fieldsFilter:{student_id:e}}};return R(se()+"/api/dormitorymanagement/monthlymedicalrecord",n)},this.setPointDropped=function(e,t){return R(se()+"/api/dormitorymanagement/droppoint",{pointRecord:{id:e,dropped_at:t?new Date:null}})}}return Object(s.a)(e,[{key:"submitPointRecord",value:function(e,t){t&&(t.data="");var a={pointRecord:e,attachmentInfo:t};return R(se()+"/api/dormitorymanagement/submitpointrecord",a)}},{key:"getClasses",value:function(e){return R(se()+"/api/dormitorymanagement/classes",{})}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();_.instance=void 0;var F={services:{userService:L.getInstance(),masterDataService:D.getInstance(),musyrifManagementService:M.getInstance(),studentService:_.getInstance()}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return e},U=Object(h.c)({appState:g,userState:k,servicesState:x}),T={appState:v,userState:w,servicesState:F},B=a(31),q=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;B.post(a.meta.url,"email="+a.meta.email+"&password="+a.meta.password,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",o=!1;null!=n.code&&"00"==n.code&&(r=t.headers.api_token,console.log("api_token: ",r),o=!0);var i=Object.assign({},a,{payload:{loginStatus:o,loginKey:r,loggedUser:n.user}});ae(t),delete i.meta,e.dispatch(i)})).catch(console.log).finally((function(){n.endLoading()}))}}},W=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=G();B.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},Y=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;B.post(a.meta.url,a.payload,{headers:G()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},H=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},z=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:G()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},K=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},J=null,V=function(){return J},Q=function(){return J=Object(h.d)(U,T,Object(h.a)(q,Y,W,H,K,z))},G=function(){return{"Content-Type":"application/json",requestId:ee(),Authorization:"Bearer "+te()}},$=function(){return{"Content-Type":"application/json",requestId:ee()}},X="dormitory-app-login-key-2",Z=function(){var e=V();return null==e?"":e.getState().userState.assetsPath},ee=function(){var e=V();return null==e?"":e.getState().userState.requestId},te=function(){return oe(X)},ae=function(e){if(e&&e.headers&&e.headers.api_token){var t=e.headers.api_token;re(X,t)}},ne=function(e){re(X,e)},re=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},oe=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},ie="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,le=ie?"/universal-good-shop/":document.getElementById("rootPath").value+"/",se=function(){var e=ie?"http://localhost:8080".concat(le):le;return e},ce=function(){return Z()+"images/"},ue=se(),de=ue+"api/accountdashboard/",me=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:de.concat("logout")}}},pe=a(5),fe=function(e){return{applicationProfile:e.userState.applicationProfile,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp}};a(74);function he(e){return e.realtime?o.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},o.a.createElement("div",{className:"col-1"},o.a.createElement("span",{style:{marginBottom:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})),o.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},o.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}}))):o.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},o.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),o.a.createElement("span",{className:" "},"Loading..."))}var ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?o.a.createElement(he,{progress:this.props.progress,realtime:this.props.realtime}):o.a.createElement("div",{className:e},o.a.createElement(he,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(r.Component);function ge(e){return o.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function be(e){return o.a.createElement("div",{className:"modal-footer "+e.className},o.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:o.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function Ee(e){return o.a.createElement("div",{className:"modal-header "+e.className},o.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),o.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},o.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},o.a.createElement("i",{className:"fas fa-times"}))))}var ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).yesButtonRef=o.a.createRef(),n.noButtonRef=o.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current?this.noButtonRef.current.focus():e&&this.yesButtonRef.current&&this.yesButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return o.a.createElement(o.a.Fragment,null,o.a.createElement(ge,null),o.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement(Ee,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),o.a.createElement("div",{className:"modal-body"}," ",this.props.children),o.a.createElement(be,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(r.Component),Se=a(17),Ne=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.code=void 0,e.description=void 0,e.about=void 0,e.welcoming_message=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.color=void 0,e.fontColor=void 0,e.contact=void 0,e.address=void 0,e}return a}(b),Oe=function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)},je=void 0,Ce=!1,we=(new Array,new Array),ke=function(e,t){return Ce&&je?(console.debug("SEND WEBSOCKET"),je.send(e,{},JSON.stringify(t)),!0):(console.info("Connecting"),!1)},Pe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(m.a)(this,a),(r=t.call(this,e)).parentApp=void 0,r.authenticated=!0,r.state={updated:new Date},r.validateLoginStatus=function(e){return 0==r.authenticated?(e&&e(),!0):0==r.isUserLoggedIn()?(r.backToLogin(),!1):(e&&e(),!0)},r.sendWebSocket=function(e,t){ke(e,t)},r.setWsUpdateHandler=function(e){r.parentApp&&r.parentApp.setWsUpdateHandler(e)},r.resetWsUpdateHandler=function(){r.parentApp&&r.parentApp.resetWsUpdateHandler()},r.getApplicationProfile=function(){return null==r.props.applicationProfile?new Ne:r.props.applicationProfile},r.handleInputChange=function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;r.setState(Object(Se.a)({},t.name,a)),console.debug("input changed: ",t.name,a)},r.doAjax=function(e,t,a,n){r.startLoading(t);for(var o=arguments.length,i=new Array(o>4?o-4:0),l=4;l<o;l++)i[l-4]=arguments[l];e.apply(void 0,i).then((function(e){a&&a(e)})).catch((function(e){n?n(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(){r.endLoading()}))},r.commonAjax=function(e,t,a){for(var n,o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];(n=r).doAjax.apply(n,[e,!1,t,a].concat(i))},r.commonAjaxWithProgress=function(e,t,a){for(var n,o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];(n=r).doAjax.apply(n,[e,!0,t,a].concat(i))},r.getLoggedUser=function(){var e=r.props.loggedUser;if(e)return e.password="^_^",Object.assign(new N,e)},r.isAdmin=function(){var e=r.getLoggedUser();return!!e&&e.hasRole(n.admin_asrama)},r.scrollTop=function(){var e={top:0,behavior:"smooth"};Oe((function(){window.scrollTo(e)}),100)},r.isUserLoggedIn=function(){var e=1==r.props.loginStatus&&null!=r.props.loggedUser;return console.debug("LOgged in: ",e),e},r.showConfirmation=function(e){var t=Object(c.a)(r);return new Promise((function(a,n){t.parentApp.showAlert("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},r.showConfirmationDanger=function(e){var t=Object(c.a)(r);return new Promise((function(a,n){t.parentApp.showAlertError("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},r.showInfo=function(e){r.parentApp.showAlert("Info",e,!0,(function(){}))},r.showError=function(e){r.parentApp.showAlertError("Error",e,!0,(function(){}))},r.showCommonErrorAlert=function(e){var t;console.error(e),t=e.response&&e.response.data?e.response.data.message:e,r.showError("Operation Failed: "+t)},r.getServices=function(){return r.props.services},r.authenticated=o,r.state=Object(f.a)({},r.state),r.parentApp=e.mainApp,r}return Object(s.a)(a,[{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&0==this.isUserLoggedIn()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(r.Component),Ae=a(6),Re=(a(75),function e(){Object(m.a)(this,e),this.showNavLinks=!1}),Ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new Re,n.buttonToggleNavRef=o.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(c.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=j(),n=this.getLoggedUser();return o.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},o.a.createElement(De,{label:this.getApplicationProfile().name}),o.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},o.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),o.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},o.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;if(t.userAuthorized&&0==t.userAuthorized(n))return null;var a=e.props.activeMenuCode==t.code;return o.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},o.a.createElement(Ae.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},o.a.createElement("span",null,t.name)))}))),o.a.createElement("form",{className:"form-inline my-2 my-lg-0"},o.a.createElement(Le,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(Pe),De=function(e){return o.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},o.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},o.a.createElement("strong",null,e.label)))},Le=function(e){return e.user?o.a.createElement(r.Fragment,null,o.a.createElement(Ae.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},o.a.createElement("img",{width:"20",src:ce()+e.user.profileImage,className:"rounded rounded-circle"}),"\xa0",e.user.name),o.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},o.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):o.a.createElement(Ae.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",o.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},Me=Object(p.f)(Object(pe.b)(fe,(function(e){return{performLogout:function(t){return e(me(t))}}}))(Ie)),_e=(a(42),a(77),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(o.a.createElement("div",{key:"spinner-item-"+t}));return o.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},o.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(r.Component)),Fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return this.props.to?o.a.createElement(Ae.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?o.a.createElement("span",{style:{marginRight:this.props.children?"5px":"0px"}},o.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children):o.a.createElement("a",Object.assign({},this.props.attributes,{tyle:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?o.a.createElement("span",{style:{marginRight:this.props.children?"5px":"0px"}},o.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component),xe=function e(){Object(m.a)(this,e),this.loading=!1,this.email="",this.editPassword=""},Ue=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new xe,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(Se.a)({},a,t.value))},n}return Object(s.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.email,this.state.editPassword,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"Login",style:{marginTop:"20px"}},o.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin"},o.a.createElement("div",{className:"text-center"},o.a.createElement("h2",null,o.a.createElement("i",{className:"fas fa-user-circle"})),o.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in")),o.a.createElement(Be,{value:this.state.email,onChange:this.updateCredentialProperty}),o.a.createElement(Te,{value:this.state.editPassword,onChange:this.updateCredentialProperty}),this.state.loading?o.a.createElement(_e,null):o.a.createElement(r.Fragment,null,o.a.createElement("button",{className:"btn text-light",style:{marginRight:"5px",backgroundColor:"rgb(9,26,78)"},type:"submit"},"Sign in"),o.a.createElement(Fe,{className:"btn btn-light border border-dark ",to:"register",children:"Register"})),o.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(Pe),Te=function(e){var t=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Password"),o.a.createElement("input",{name:"editPassword",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}))},Be=function(e){var t=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Email"),o.a.createElement("input",{name:"email",value:t,onChange:a,type:"text",className:"form-control",placeholder:"Email",required:!0,autoFocus:!0}))},qe=Object(p.f)(Object(pe.b)(fe,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:se().concat("api/account/login"),email:e,password:t,app:a}}}(t,a,n))}}}))(Ue)),We=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(m.a)(this,a),(r=t.call(this,e,o)).title="",r.title=n,r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authenticated&&this.validateLoginStatus(),document.title=this.title}}]),a}(Pe),Ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Dashboard",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getLoggedUser();return e?o.a.createElement("div",{className:" section-body container-fluid"},o.a.createElement("h2",null,"Dashboard"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,e.name,"  "),o.a.createElement("hr",null),o.a.createElement("p",{className:"badge badge-dark"},e.roles.join(", ")))):null}}]),a}(We),He=Object(p.f)(Object(pe.b)(fe)(Ye)),ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=ce()+e.backgroundUrl;return console.debug("applicationProfile: ",e),o.a.createElement("div",{className:"section-body container-fluid",style:{padding:0}},o.a.createElement("div",{className:"jumbotron",style:{margin:"0px",marginTop:"20px",backgroundImage:'url("'+t+'")',backgroundSize:"cover",color:e.fontColor}},o.a.createElement("h1",{className:"display-4"},e.name),o.a.createElement("p",{className:"lead"},e.description),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("p",null,e.welcoming_message),o.a.createElement(Ae.b,{className:"btn btn-primary btn-lg",to:"/about",role:"button"},"About Us")))}}]),a}(Pe),Ke=Object(p.f)(Object(pe.b)(fe)(ze)),Je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Settings",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e;return o.a.createElement("div",{id:"SettingsMain",className:"section-body container-fluid"},o.a.createElement("h2",null,"Settings"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.name),o.a.createElement("hr",null)))}}]),a}(We),Ve=Object(p.f)(Object(pe.b)(fe,(function(e){return{}}))(Je)),Qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?o.a.createElement("div",{className:"card-header"},this.props.title):null,o.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?o.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(r.Component),Ge=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.props.show)return null;var e="vertical"==this.props.orientation?"vertical":"horizontal";return o.a.createElement("div",{className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},o.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},o.a.createElement("strong",null,this.props.label?this.props.label:null)),o.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(r.Component);var $e=function(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))};var Xe=a(24),Ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return o.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?o.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},o.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component),et=function(e){var t=e.edit,a=e.name,n=e.toggleInput,r=e.value,i=e.updateProperty,l=Object(Xe.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?o.a.createElement(tt,{updateProperty:i,name:a,toggleInput:n,value:r,type:l.type}):o.a.createElement(at,{name:a,toggleInput:n,value:r,type:l.type})},tt=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.updateProperty,i=e.type;return o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"col-md-10"},o.a.createElement("input",{type:null!==i&&void 0!==i?i:"text",name:t,onChange:r,value:n,className:"form-control"})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement(Ze,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},at=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.type;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement("p",{style:{backgroundColor:"color"==r?n:"#fff"}},"color"==r?"Sample Color":n),"color"==r?o.a.createElement("p",null,n):null),o.a.createElement("div",{className:"col-md-2"},o.a.createElement(Ze,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},nt=function(e){var t=e.name,a=e.edit,n=e.toggleInput,i=e.updateProperty;return a?o.a.createElement(r.Fragment,null,o.a.createElement("div",null,o.a.createElement(Ze,{attributes:{"data-name":t,"data-enabled":"false"},onClick:n,className:" btn btn-secondary btn-sm"},"cancel")),o.a.createElement("input",{onChange:i,className:"form control",accept:"image/*",type:"file",name:t})):o.a.createElement("div",null,o.a.createElement(Ze,{attributes:{"data-name":t,"data-enabled":"true"},onClick:n,className:" btn btn-info btn-sm"},"edit image"))},rt=function e(){var t=this;Object(m.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,editPassword:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).userService=void 0,n.state=new rt,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&$e(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({user:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getUserEditedData();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getUserEditedData=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new N;for(var o in a){a[o]&&"profileImage"!=o&&(r[o]=t[o])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setLoggedUser(e.user);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.userService=n.getServices().userService,n.state.user=Object.assign(new N,n.getLoggedUser()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="User Profile"}},{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return o.a.createElement("div",{className:"section-body container-fluid"},o.a.createElement("h2",null,"User Profile"),o.a.createElement(Qe,{title:"Profile Data"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},o.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:ce()+t.profileImage}),o.a.createElement(nt,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),o.a.createElement(Ge,{label:"User Name"},o.a.createElement(et,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.nickname})),o.a.createElement(Ge,{label:"Name"},o.a.createElement(et,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.name})),o.a.createElement(Ge,{label:"Password"},o.a.createElement(et,{edit:a.editPassword,updateProperty:this.updateProfileProperty,name:"editPassword",toggleInput:this.toggleInput,value:t.password})),o.a.createElement(Ge,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Pe),it=Object(p.f)(Object(pe.b)(fe,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:Object.assign(new N,e)},meta:{type:"set_logged_user"}}}(t))}}}))(ot)),lt=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return o.a.createElement("thead",null,o.a.createElement("tr",null,t.map((function(e){return o.a.createElement("th",{key:y()},e)}))))},st=function e(){Object(m.a)(this,e),this.limit=5,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.module=void 0,this.fieldsFilter=void 0,this.dayTo=void 0,this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.availabilityCheck=void 0,this.useExistingFilterPage=!1},ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=ut(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,r=this.props.activePage-1<0?a-1:this.props.activePage-1;return o.a.createElement("div",null,o.a.createElement("nav",{"aria-label":"Page navigation example"},o.a.createElement("ul",{className:"pagination"},o.a.createElement("li",{className:"page-item"},o.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(r)}},"Previous")),t.map((function(t,a){return o.a.createElement("li",{key:"NAV-"+y(),className:"page-item "+(t-1==e.props.activePage?"active":"")},o.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),o.a.createElement("li",{className:"page-item"},o.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(r.Component),ut=function(e,t,a){var n=[],r=Math.ceil(t/e),o=a-1,i=a+3;r>1&&n.push(1);for(var l=o;l<=i;l++)l>1&&l<=r&&n.push(l);return i<r&&n.push(r),n},dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).musyrifManagementService=void 0,n.getEmployee=function(){return n.props.employee},n.activeStatusUpdate=function(e){n.props.onUpdated&&n.props.onUpdated()},n.activateMusyrif=function(e){var t=n.getEmployee();n.commonAjax(n.musyrifManagementService.activate,n.activeStatusUpdate,n.showCommonErrorAlert,t,e)},n.musyrifManagementService=n.getServices().musyrifManagementService,n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,r,i=this,l=this.props,s=this.getEmployee(),c=null===(e=s.user)||void 0===e?void 0:e.hasRole(n.musyrif_asrama);return o.a.createElement("tr",{key:s.id},o.a.createElement("td",null,l.startingNumber+1),o.a.createElement("td",null,null===(t=s.user)||void 0===t?void 0:t.name),o.a.createElement("td",null,null===(a=s.user)||void 0===a?void 0:a.email),o.a.createElement("td",null,null===(r=s.user)||void 0===r?void 0:r.nip),o.a.createElement("td",null,o.a.createElement("i",{className:c?"fas fa-check text-success":"fas fa-times"})),o.a.createElement("td",null," ",1==c?o.a.createElement(Fe,{className:"btn btn-danger btn-sm",onClick:function(e){return i.activateMusyrif(!1)}},"Deactivate"):o.a.createElement(Fe,{className:"btn btn-success btn-sm",onClick:function(e){return i.activateMusyrif(!0)}},"Activate")))}}]),a}(Pe),mt=Object(p.f)(Object(pe.b)(fe)(dt)),pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,r=this.props.active;return o.a.createElement("div",{className:"btn-group"},o.a.createElement(Ze,{className:"btn  btn-sm "+(r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!0)}},null!==(e=n.yesLabel)&&void 0!==e?e:"Yes"),o.a.createElement(Ze,{className:"btn  btn-sm "+(0==r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!1)}},null!==(t=n.noLabel)&&void 0!==t?t:"No"))}}]),a}(r.Component),ft=a(15),ht=a(11),vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r,i,l,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(m.a)(this,a),(l=t.call(this,e,!0)).masterDataService=void 0,l.modelName="undefined",l.formRef=o.a.createRef(),l.overrideLoading=void 0,l.startLoading=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l.overrideLoading?l.setState({loading:!0}):Object(ft.a)((r=Object(c.a)(l),Object(ht.a)(a.prototype)),"startLoading",r).call(r,e)},l.endLoading=function(){l.overrideLoading?l.setState({loading:!1}):Object(ft.a)((i=Object(c.a)(l),Object(ht.a)(a.prototype)),"endLoading",i).call(i)},l.loadItems=function(){var e={filter:l.state.filter,modelName:l.modelName};l.commonAjax(l.masterDataService.list,l.itemsLoaded,l.showCommonErrorAlert,e)},l.itemsLoaded=function(e){l.setState({items:e.items,totalData:e.totalData})},l.emptyRecord=function(){throw new Error("Not Implemented")},l.updateFilter=function(e){var t,a=l.state.filter,n=e.target;n.value&&""!=n.value&&(t="number"==n.type||n.dataset&&"number"==n.dataset.type?parseInt(n.value):n.value,a[n.name]=t,l.setState({filter:a}))},l.updateFieldsFilter=function(e){var t=l.state.filter,a=e.target;t.fieldsFilter||(t.fieldsFilter={}),t.fieldsFilter[a.name]=a.value,l.setState({filter:t})},l.loadAtPage=function(e){var t=l.state.filter;t.page=e,l.setState({filter:t},l.loadItems)},l.updateRecordProp=function(e){var t,a=e.target,n=a.dataset;t=n.type&&"boolean"==n.type?"true"==a.value:a.value;var r=l.state.record;r[a.name]=t,l.setState({record:r})},l.resetForm=function(e){l.setState({record:l.emptyRecord()},e)},l.oneRecordLoaded=function(e){l.setState({record:e},(function(){l.formRef.current&&l.formRef.current.showModal(),l.scrollTop()}))},l.recordUpdated=function(e){l.resetForm((function(){l.formRef.current&&l.formRef.current.hideModal(),l.showInfo("Success Update"),l.loadItems()}))},l.callApiSubmit=function(e){l.commonAjax(l.masterDataService.update,l.recordUpdated,l.showCommonErrorAlert,e)},n&&(l.modelName=n),l.overrideLoading=s,l.masterDataService=l.getServices().masterDataService,l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ft.a)(Object(ht.a)(a.prototype),"componentDidMount",this).call(this),this.scrollTop(),this.loadItems()}}]),a}(Pe),gt=function e(){Object(m.a)(this,e),this.items=[],this.filter=new st,this.totalData=0},bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"employee")).state=new gt,n.setMusyrifOnly=function(e){var t=n.state.filter;t.fieldsFilter||(t.fieldsFilter={}),t.fieldsFilter.musyrif_only=e,n.setState({filter:t},(function(){return n.loadAtPage(0)}))},n.onEmployeeStatusUpdate=function(){n.loadItems()},n.state.filter.limit=10,n.state.filter.fieldsFilter={musyrif_only:!0},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,r,i=this,l=this.state.filter,s=l.fieldsFilter&&l.fieldsFilter.musyrif_only&&1==l.fieldsFilter.musyrif_only;return o.a.createElement("div",{className:"section-body container-fluid"},o.a.createElement("h2",null,"Musyrif Management"),o.a.createElement("hr",null),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.loadAtPage(0)}},o.a.createElement(Ge,{label:"Search"},o.a.createElement("input",{name:"name",placeholder:"Search by name or email",className:"form-control",value:l.fieldsFilter?l.fieldsFilter.name:"",onChange:this.updateFieldsFilter})),o.a.createElement(Ge,{label:"Record Count"},o.a.createElement("input",{name:"limit",className:"form-control",value:null!==(e=l.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),o.a.createElement(Ge,{label:"Show Option"},o.a.createElement(pt,{active:s,onClick:this.setMusyrifOnly,noLabel:"All Employee",yesLabel:"Musyrif Only"})),o.a.createElement(Ge,null,o.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"}))),o.a.createElement(ct,{activePage:null!==(t=l.page)&&void 0!==t?t:0,limit:null!==(a=l.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadAtPage}),o.a.createElement(Et,{onUpdated:this.onEmployeeStatusUpdate,startingNumber:(null!==(n=l.page)&&void 0!==n?n:0)*(null!==(r=l.limit)&&void 0!==r?r:5),items:this.state.items}))}}]),a}(vt),Et=function(e){var t=e.items;return o.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},o.a.createElement("table",{className:"table table-striped"},lt("No","Name","Email","NIP","Role: Musyrif","Opsi"),o.a.createElement("tbody",null,t.map((function(t,a){return t.user&&(t.user=N.clone(t.user)),o.a.createElement(mt,{onUpdated:e.onUpdated,employee:t,startingNumber:e.startingNumber+a,key:t.id})})))))},yt=Object(p.f)(Object(pe.b)(fe)(bt)),St=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!0)}return Object(s.a)(a,[{key:"render",value:function(){var e;return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Management Page"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.name),o.a.createElement("hr",null)))}}]),a}(Pe),Nt=Object(p.f)(Object(pe.b)(fe)(St)),Ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.description=void 0,e}return a}(b),jt=function e(){Object(m.a)(this,e),this.show=!0},Ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new jt,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){0==this.props.show&&this.setState({show:!1})}},{key:"render",value:function(){var e,t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return o.a.createElement(Ze,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(Xe.a)(e,["style","show","footerContent","toggleable"])}(this.props);return o.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(f.a)(Object(f.a)({},this.props.style),{},{marginBottom:"10px"})}),o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?o.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},o.a.createElement("i",{className:"fas fa-times"}))):null),o.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?o.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(r.Component),wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.getModelName=function(){return n.props.modelName},n.getRecord=function(){var e=n.props.record;return e||(alert("this.props.record undefined"),{})},n.recordLoaded=function(e){n.props.recordLoaded&&n.props.recordLoaded(e.item)},n.recordDeleted=function(e){n.showInfo("Record has been deleted"),n.props.recordDeleted&&n.props.recordDeleted(e.item)},n.loadRecord=function(){var e={record_id:n.getRecord().id,modelName:n.getModelName()};n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,e)},n.deleteRecord=function(){var e={record_id:n.getRecord().id,modelName:n.getModelName()};n.showConfirmationDanger("Delete record?").then((function(t){t&&n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,e)}))},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"btn-group"},1==this.props.hideEdit?null:o.a.createElement(Fe,{onClick:this.loadRecord,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),o.a.createElement(Fe,{onClick:this.deleteRecord,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"}))}}]),a}(Pe),kt=Object(p.f)(Object(pe.b)(fe)(wt)),Pt=function e(){Object(m.a)(this,e),this.items=[],this.filter=new st,this.totalData=0,this.record=new Ot},At=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"category")).state=new Pt,n.onSubmit=function(){console.debug("RECORD: ",n.state.record),n.showConfirmation("Submit Data?").then((function(e){if(e){var t={category:n.state.record,modelName:n.modelName};n.callApiSubmit(t)}}))},n.emptyRecord=function(){return new Ot},n.state.filter.limit=10,n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,r,i=this,l=this.state.filter;return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Category Management"),o.a.createElement("hr",null),o.a.createElement(It,{formRef:this.formRef,resetForm:this.resetForm,onSubmit:this.onSubmit,record:this.state.record,updateRecordProp:this.updateRecordProp}),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.loadAtPage(0)}},o.a.createElement(Ge,{label:"Search"},o.a.createElement("input",{name:"name",placeholder:"Search by name",className:"form-control",value:l.fieldsFilter?l.fieldsFilter.name:"",onChange:this.updateFieldsFilter})),o.a.createElement(Ge,{label:"Record Count"},o.a.createElement("input",{name:"limit",className:"form-control",value:null!==(e=l.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),o.a.createElement(Ge,null,o.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"}))),o.a.createElement(ct,{activePage:null!==(t=l.page)&&void 0!==t?t:0,limit:null!==(a=l.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadAtPage}),o.a.createElement(Rt,{recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(n=l.page)&&void 0!==n?n:0)*(null!==(r=l.limit)&&void 0!==r?r:10),items:this.state.items}))}}]),a}(vt),Rt=function(e){return o.a.createElement("div",{style:{overflow:"scroll"}},o.a.createElement("table",{className:"table table-striped"},lt("No","Name","Description","Option"),o.a.createElement("tbody",null,e.items.map((function(t,a){return o.a.createElement("tr",{key:"category-"+a},o.a.createElement("td",null,a+1+e.startingNumber),o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.description),o.a.createElement("td",null,o.a.createElement(kt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,modelName:"category"})))})))))},It=function(e){var t,a;return o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},o.a.createElement(Ct,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},o.a.createElement(Ge,{label:"Name"},o.a.createElement("input",{value:null!==(t=e.record.name)&&void 0!==t?t:"",onChange:e.updateRecordProp,className:"form-control",name:"name"})),o.a.createElement(Ge,{label:"Description"},o.a.createElement("textarea",{className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(a=e.record.description)&&void 0!==a?a:""})),o.a.createElement(Ge,null,o.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary"}),"\xa0",o.a.createElement("input",{type:"reset",className:"btn btn-secondary",onClick:function(t){return e.resetForm()}}))))},Dt=Object(p.f)(Object(pe.b)(fe)(At)),Lt=a(23),Mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).category=void 0,e.category_id=void 0,e.name=void 0,e.description=void 0,e.point=1,e.droppable=!0,e}return a}(b),_t=function e(){Object(m.a)(this,e),this.items=[],this.filter=new st,this.totalData=0,this.record=new Mt,this.categories=[],this.categoriesLoaded=!1},Ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"rulepoint")).state=new _t,n.onSubmit=function(){console.debug("RECORD: ",n.state.record),n.showConfirmation("Submit Data?").then((function(e){if(e){var t={rulePoint:n.state.record,modelName:n.modelName};n.callApiSubmit(t)}}))},n.categoriesLoaded=function(e){n.setState({categories:e.items,categoriesLoaded:!0},(function(){n.resetForm(),n.loadItems()}))},n.categoriesNotLoaded=function(e){n.setState({categories:[],categoriesLoaded:!0},n.resetForm)},n.loadCategories=function(){var e=new st;e.limit=0;var t={filter:e,modelName:"category"};n.commonAjax(n.masterDataService.list,n.categoriesLoaded,n.categoriesNotLoaded,t)},n.emptyRecord=function(){var e=new Mt;return n.state.categories.length>0&&(e.category_id=n.state.categories[0].id),e},n.state.filter.limit=10,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.loadCategories()}))}},{key:"render",value:function(){var e,t,a,n,r,i=this,l=this.state.filter,s=this.state.categories;if(this.state.categoriesLoaded&&0==s.length)return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Please insert categories record"));var c=l.fieldsFilter&&l.fieldsFilter.category_id?l.fieldsFilter.category_id:"ALL";return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Rule Point Management"),o.a.createElement("hr",null),o.a.createElement(Ut,{categories:s,reloadCategories:this.loadCategories,formRef:this.formRef,resetForm:this.resetForm,onSubmit:this.onSubmit,record:this.state.record,updateRecordProp:this.updateRecordProp}),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.loadAtPage(0)}},o.a.createElement(Ge,{label:"Search"},o.a.createElement("input",{name:"name",placeholder:"Search by name",className:"form-control",value:l.fieldsFilter?l.fieldsFilter.name:"",onChange:this.updateFieldsFilter})),o.a.createElement(Ge,{label:"Category"},o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{value:c,className:"form-control",name:"category_id",onChange:this.updateFieldsFilter},[{id:"ALL",name:"ALL"}].concat(Object(Lt.a)(s)).map((function(e){return o.a.createElement("option",{key:"filter-cat-"+e.id,value:e.id},e.name)}))),o.a.createElement("div",{className:"input-group-append"},o.a.createElement(Fe,{iconClassName:"fas fa-redo",onClick:this.loadCategories},"Reload")))),o.a.createElement(Ge,{label:"Record Count"},o.a.createElement("input",{name:"limit",className:"form-control",value:null!==(e=l.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),o.a.createElement(Ge,null,o.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"}))),o.a.createElement(ct,{activePage:null!==(t=l.page)&&void 0!==t?t:0,limit:null!==(a=l.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadAtPage}),o.a.createElement(xt,{recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(n=l.page)&&void 0!==n?n:0)*(null!==(r=l.limit)&&void 0!==r?r:10),items:this.state.items}))}}]),a}(vt),xt=function(e){return o.a.createElement("div",{style:{overflow:"scroll"}},o.a.createElement("table",{className:"table table-striped"},lt("No","Name","Point","Description","Category","Droppable","Option"),o.a.createElement("tbody",null,e.items.map((function(t,a){var n;return o.a.createElement("tr",{key:"RulePoint-"+a},o.a.createElement("td",null,a+1+e.startingNumber),o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.point),o.a.createElement("td",null,t.description),o.a.createElement("td",null,null===(n=t.category)||void 0===n?void 0:n.name),o.a.createElement("td",null,t.droppable?"Yes":"No"),o.a.createElement("td",null,o.a.createElement(kt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,modelName:"rulepoint"})))})))))},Ut=function(e){var t,a;return o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},o.a.createElement(Ct,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},o.a.createElement(Ge,{label:"Name"},o.a.createElement("input",{value:null!==(t=e.record.name)&&void 0!==t?t:"",onChange:e.updateRecordProp,className:"form-control",name:"name"})),o.a.createElement(Ge,{label:"Point"},o.a.createElement("input",{type:"number",value:e.record.point,onChange:e.updateRecordProp,className:"form-control",name:"point"})),o.a.createElement(Ge,{label:"Description"},o.a.createElement("textarea",{className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(a=e.record.description)&&void 0!==a?a:""})),o.a.createElement(Ge,{label:"Droppable"},o.a.createElement("select",{className:"form-control","data-type":"boolean",name:"droppable",onChange:e.updateRecordProp,value:1==e.record.droppable?"true":"false"},o.a.createElement("option",{value:"true"},"Yes"),o.a.createElement("option",{value:"false"},"No"))),o.a.createElement(Ge,{label:"Category"},o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{value:e.record.category_id,className:"form-control",name:"category_id",onChange:e.updateRecordProp},e.categories.map((function(e){return o.a.createElement("option",{key:"cat-"+e.id,value:e.id},e.name)}))),o.a.createElement("div",{className:"input-group-append"},o.a.createElement(Fe,{iconClassName:"fas fa-redo",onClick:e.reloadCategories},"Reload")))),o.a.createElement(Ge,null,o.a.createElement("input",{type:"submit",className:"btn btn-primary"}),"\xa0",o.a.createElement("input",{value:"Reset",type:"reset",className:"btn btn-secondary",onClick:function(t){return e.resetForm()}}))))},Tt=Object(p.f)(Object(pe.b)(fe)(Ft)),Bt=["January","February","March","April","May","June","July","August","September","October","November","December"],qt=[31,29,31,30,31,30,31,31,30,31,30,31],Wt=[31,28,31,30,31,30,31,31,30,31,30,31];var Yt=function(e){var t=e.split(/\D/),a=parseInt(t[1]);return new Date(parseInt(t[0]),--a,parseInt(t[2]))},Ht=function(){for(var e=[],t=1;t<=31;t++)e.push(t);return e},zt=function(e){var t,a,n,r,i,l,s=e.filter;return"to"==e.mode?o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{className:"form-control",value:"Date To",disabled:!0}),1!=e.hideDay?o.a.createElement("select",{"data-type":"number",className:"form-control",name:"dayTo",value:null!==(r=s.dayTo)&&void 0!==r?r:0,onChange:e.onChange},Ht().map((function(e){return o.a.createElement("option",{key:"f-d-"+e,value:e},0==e?"day":e)}))):null,o.a.createElement("select",{"data-type":"number",className:"form-control",name:"monthTo",value:null!==(i=s.monthTo)&&void 0!==i?i:0,onChange:e.onChange},Bt.map((function(e,t){return o.a.createElement("option",{key:"f-m-"+t,value:t+1},e)}))),o.a.createElement("input",{name:"yearTo",placeholder:"year",className:"form-control",value:null!==(l=s.yearTo)&&void 0!==l?l:"",onChange:e.onChange})):o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{className:"form-control",value:"Date From",disabled:!0}),1!=e.hideDay?o.a.createElement("select",{"data-type":"number",className:"form-control",name:"day",value:null!==(t=s.day)&&void 0!==t?t:0,onChange:e.onChange},Ht().map((function(e){return o.a.createElement("option",{key:"f-d-"+e,value:e},0==e?"day":e)}))):null,o.a.createElement("select",{"data-type":"number",className:"form-control",name:"month",value:null!==(a=s.month)&&void 0!==a?a:0,onChange:e.onChange},Bt.map((function(e,t){return o.a.createElement("option",{key:"f-m-"+t,value:t+1},e)}))),o.a.createElement("input",{name:"year",placeholder:"year",className:"form-control",value:null!==(n=s.year)&&void 0!==n?n:"",onChange:e.onChange}))},Kt=function e(){Object(m.a)(this,e),this.items=[],this.classes=[],this.totalData=0,this.filter=new st,this.loading=!1},Jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"student")).state=new Kt,n.studentService=void 0,n.masterDataService=void 0,n.itemsLoaded=function(e){n.setState({items:e.items,totalData:e.totalData})},n.classesLoaded=function(e){n.setState({classes:e.items},n.loadItems)},n.loadItems=function(){n.commonAjax(n.masterDataService.list,n.itemsLoaded,n.showCommonErrorAlert,{modelName:"student",filter:n.state.filter})},n.loadAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadItems)},n.loadClasses=function(){n.commonAjax(n.studentService.getClasses,n.classesLoaded,n.showCommonErrorAlert)},n.updateSelectedClass=function(e){var t=e.target,a=n.state.filter;a.fieldsFilter||(a.fieldsFilter={}),a.fieldsFilter.class_id=t.value,n.setState({filter:a})},n.inputPage=function(e,t){switch(e){case"pointrecord":n.inputPoint(t);break;case"medicalrecord":n.inputMedicalRecord(t)}},n.inputPoint=function(e){n.props.history.push({pathname:"/dormitoryactivity/inputpoint",state:{student:e}})},n.inputMedicalRecord=function(e){n.props.history.push({pathname:"/dormitoryactivity/medicalrecord",state:{student:e}})},n.updateWithPointRecord=function(e){var t=n.state.filter;t.fieldsFilter&&(t.fieldsFilter.with_point_record=e),n.setState({filter:t})},n.studentService=n.getServices().studentService,n.masterDataService=n.getServices().masterDataService,n.state.filter.limit=10,n.state.filter.day=n.state.filter.dayTo=(new Date).getDate(),n.state.filter.month=n.state.filter.monthTo=(new Date).getMonth()+1,n.state.filter.year=n.state.filter.yearTo=(new Date).getFullYear(),n.state.filter.fieldsFilter={class_id:"ALL",with_point_record:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.loadClasses()}))}},{key:"render",value:function(){var e,t,a,n,r,i,l,s=this,c=this.state.filter,u=this.state.classes,d=c.fieldsFilter&&c.fieldsFilter.class_id?c.fieldsFilter.class_id:"ALL",m=c.fieldsFilter&&c.fieldsFilter.with_point_record&&1==c.fieldsFilter.with_point_record;return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Student List"),o.a.createElement("hr",null),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s.loadAtPage(0)}},o.a.createElement(Ge,{label:"Search"},o.a.createElement("input",{name:"name",placeholder:"Search by name",className:"form-control",value:c.fieldsFilter?c.fieldsFilter.name:"",onChange:this.updateFieldsFilter})),o.a.createElement(Ge,{label:"Record Count"},o.a.createElement("input",{name:"limit",className:"form-control",value:null!==(e=c.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),o.a.createElement(Ge,{label:"Kelas"},o.a.createElement("select",{value:d,onChange:this.updateFieldsFilter,className:"form-control",name:"class_id"},[{id:"ALL",level:"ALL",sekolah:{}}].concat(Object(Lt.a)(u)).map((function(e){var t;return o.a.createElement("option",{key:"class_"+e.id,value:e.id},e.level,e.rombel," - ",null===(t=e.sekolah)||void 0===t?void 0:t.nama)})))),o.a.createElement(Ge,{label:"Period"},o.a.createElement(pt,{active:m,yesLabel:"Show Point Record",noLabel:"Hide Point Record",onClick:this.updateWithPointRecord}),m?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"input-group"},o.a.createElement(zt,{filter:c,onChange:this.updateFilter})),o.a.createElement("div",{className:"input-group"},o.a.createElement(zt,{mode:"to",filter:c,onChange:this.updateFilter}))):null),m?o.a.createElement(Ge,{label:"Period"},c.day," ",Bt[(null!==(t=c.month)&&void 0!==t?t:1)-1]," ",c.year," - ",c.dayTo," ",Bt[(null!==(a=c.monthTo)&&void 0!==a?a:1)-1]," ",c.yearTo):null,o.a.createElement(Ge,null,o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Submit"}))),o.a.createElement("p",null),o.a.createElement(ct,{onClick:this.loadAtPage,activePage:null!==(n=c.page)&&void 0!==n?n:0,limit:null!==(r=c.limit)&&void 0!==r?r:10,totalData:this.state.totalData}),o.a.createElement(Vt,{showPointRecord:m,loading:this.state.loading,inputPage:this.inputPage,startingNumber:(null!==(i=c.page)&&void 0!==i?i:0)*(null!==(l=c.limit)&&void 0!==l?l:10),items:this.state.items}))}}]),a}(vt),Vt=function(e){return o.a.createElement("div",{style:{overflow:"scroll"}},o.a.createElement("table",{className:"table table-striped"},e.showPointRecord?lt("No","","Name","Kelas","Point"):lt("No","","Name","Kelas"),o.a.createElement("tbody",null,e.loading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5},o.a.createElement(_e,null))):e.items.map((function(t,a){var n,r,i,l,s;return o.a.createElement("tr",{key:"student-"+a},o.a.createElement("td",null,a+1+e.startingNumber),o.a.createElement("td",null,o.a.createElement("div",{style:{width:"100px"}},o.a.createElement(Fe,{className:"btn",onClick:function(a){return e.inputPage("pointrecord",t)},iconClassName:"far fa-edit"}),o.a.createElement(Fe,{className:"btn",onClick:function(a){return e.inputPage("medicalrecord",t)},iconClassName:"fas fa-notes-medical"}))),o.a.createElement("td",null,null===(n=t.user)||void 0===n?void 0:n.name),o.a.createElement("td",null,null===(r=t.kelas)||void 0===r?void 0:r.level," ",null===(i=t.kelas)||void 0===i?void 0:i.rombel," ",null===(l=t.kelas)||void 0===l||null===(s=l.sekolah)||void 0===s?void 0:s.nama),e.showPointRecord?o.a.createElement("td",null,t.point):null)})))))},Qt=Object(p.f)(Object(pe.b)(fe)(Jt)),Gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).nis=void 0,e.kelas=void 0,e.user=void 0,e.point=void 0,e}return a}(b),$t=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setDate=function(t){e.day=t.getDate(),e.month=t.getMonth()+1,e.year=t.getFullYear()},e.dateString=function(){return e.year+"-"+S(e.month)+"-"+S(e.day)},e.location=void 0,e.day=(new Date).getDate(),e.month=(new Date).getMonth()+1,e.year=(new Date).getFullYear(),e.time=[S((new Date).getHours()),S((new Date).getMinutes()),S((new Date).getSeconds())].join(":"),e.description=void 0,e.student_id=void 0,e.point_id=void 0,e.rule_point=void 0,e.student=void 0,e.dropped_at=void 0,e.pictures=[],e.getPicture=function(){return 0==e.pictures.length?null:se()+"upload/POINT_RECORD/"+e.pictures[0].name},e.getDate=function(){return Yt(e.dateString())},e.getTimestamp=function(){var t=e.getDate();return Xt[t.getDay()]+", "+[S(t.getDate()),S(t.getMonth()+1),t.getFullYear()].join("/")+" "+e.time},e}return Object(s.a)(a,[{key:"setTime",value:function(e,t,a){this.time=[S(e),S(t),S(a)].join(":")}}]),a}(b);$t.clone=function(e){return Object.assign(new $t,e)};var Xt=["Ahad","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],Zt=function e(){Object(m.a)(this,e),this.hour=(new Date).getHours(),this.minute=(new Date).getMinutes(),this.second=(new Date).getSeconds()},ea=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],ta=function(){for(var e=[],t=1;t<60;t++)e.push(t);return e},aa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new Zt,n.minutes=void 0,n.seconds=void 0,n.setDefaultValue=function(){try{var e=n.props.value.split(":");n.setState({hour:parseInt(e[0]),minute:parseInt(e[1]),second:parseInt(e[2])})}catch(t){}},n.updateValue=function(e){var t=e.target;if(t){var a=t.name;n.setState(Object(Se.a)({},a,t.value),n.onChange)}},n.setNow=function(){var e=new Date;n.setState({hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},n.onChange)},n.onChange=function(){n.props.onChange(n.state.hour,n.state.minute,n.state.second)},n.minutes=ta(),n.seconds=ta(),n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"form-control bg-light"},o.a.createElement("select",{name:"hour",style:{border:"none"},value:this.state.hour,onChange:this.updateValue},ea.map((function(e){return o.a.createElement("option",{key:"HOUR-"+e,value:e},S(e))}))),o.a.createElement("select",{name:"minute",style:{border:"none"},value:this.state.minute,onChange:this.updateValue},this.minutes.map((function(e){return o.a.createElement("option",{key:"MIN-"+e,value:e},S(e))}))),o.a.createElement("select",{name:"second",style:{border:"none"},value:this.state.second,onChange:this.updateValue},this.seconds.map((function(e){return o.a.createElement("option",{key:"SEC-"+e,value:e},S(e))}))),o.a.createElement("a",{style:{marginLeft:5},onClick:this.setNow},o.a.createElement("i",{className:"fas fa-history"})))}}]),a}(r.Component),na=function e(){Object(m.a)(this,e),this.pointRecord=new $t},ra=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new na,n.onSubmit=function(){n.showConfirmation("Submit Data?").then((function(e){e&&n.props.submit(n.state.pointRecord)}))},n.rulePoint=function(){return n.props.rulePoint},n.updatePointRecord=function(e){var t=e.target,a=n.state.pointRecord;a[t.name]=t.value,n.setState({pointRecord:a})},n.updateDate=function(e){var t=Yt(e.target.value),a=n.state.pointRecord;a.setDate(t),n.setState({pointRecord:a})},n.updateTime=function(e,t,a){var r=n.state.pointRecord;r.setTime(e,t,a),n.setState({pointRecord:r})},n.setAttachment=function(e){var t,a=e.target;(t=a,new Promise((function(a,n){if(null!=t.files&&t.files[0])try{var r=t.files[0],o=new FileReader;o.readAsDataURL(r),console.debug("fileInput.files[0]: ",r),o.onload=function(){var e=new P;e.setUrl(new String(o.result).toString()),e.name=r.name,a(e)},o.onerror=function(e){n(e)}}catch(e){n(e)}else n(new Error("No file"))}))).then((function(e){n.props.setAttachment(e)}))},n.removeAttachment=function(){n.props.removeAttachment()},n.getAttachment=function(){return n.props.attachmentInfo},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n=this,r=this.rulePoint(),i=this.state.pointRecord,l=this.getAttachment();return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.onSubmit()}},o.a.createElement(Ge,{label:"Category"},null===(e=r.category)||void 0===e?void 0:e.name," - ",r.name," ",o.a.createElement("span",{className:"badge badge-dark"},r.point)),o.a.createElement(Ge,{label:"Date"},o.a.createElement("input",{type:"date",className:"form-control",onChange:this.updateDate,name:"date",value:i.dateString()})),o.a.createElement(Ge,{label:"Time"},o.a.createElement(aa,{onChange:this.updateTime,value:i.time})),o.a.createElement(Ge,{label:"Location"},o.a.createElement("input",{className:"form-control",onChange:this.updatePointRecord,name:"location",value:null!==(t=i.location)&&void 0!==t?t:""})),o.a.createElement(Ge,{label:"Picture"},l?o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{style:{marginRight:10},className:"border border-dark",src:l.url,width:100,height:100}),o.a.createElement(Fe,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:this.removeAttachment})):o.a.createElement("input",{type:"file",accept:"image/*",className:"form-control",onChange:this.setAttachment,name:"attachment"})),o.a.createElement(Ge,{label:"Description"},o.a.createElement("textarea",{value:null!==(a=i.description)&&void 0!==a?a:"",onChange:this.updatePointRecord,name:"description",className:"form-control"})),o.a.createElement(Fe,{className:"btn btn-secondary float-left",iconClassName:"fas fa-arrow-left",onClick:this.props.onBack},"Back"),o.a.createElement("button",{className:"btn btn-success float-right"},"Submit"))}}]),a}(Pe),oa=Object(p.f)(Object(pe.b)(fe)(ra)),ia=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:o.a.createElement("div",{style:this.props.style,className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(r.Component),la=function e(){Object(m.a)(this,e),this.rulePoints=[],this.loading=!1},sa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=new la,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.rulePointsLoaded=function(e){n.setState({rulePoints:e.items},(function(){var t;e.items&&(null===(t=e.items)||void 0===t?void 0:t.length)>0&&(n.props.rulePoint||n.setRulePoint(e.items[0]))}))},n.loadRulePoints=function(){if(null!=n.getCategory()){var e={filter:{limit:0,fieldsFilter:{category_id:n.getCategory().id}},modelName:"rulepoint"};n.commonAjax(n.masterDataService.list,n.rulePointsLoaded,n.showCommonErrorAlert,e)}},n.getCategory=function(){return n.props.category},n.onSubmit=function(){n.props.onSubmit()},n.setRulePoint=function(e){n.props.setRulePoint(e)},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ft.a)(Object(ht.a)(a.prototype),"componentDidMount",this).call(this),this.loadRulePoints()}},{key:"render",value:function(){var e,t=this,a=this.getCategory();if(null==a)return o.a.createElement(ia,null,"Category not found");if(this.state.loading)return o.a.createElement(_e,null);if(0==this.state.rulePoints.length)return o.a.createElement(ia,null,"Rule Points for ",a.name," not found");var n=this.state.rulePoints;return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.onSubmit()}},o.a.createElement(Ge,{label:"Category",children:a.name}),o.a.createElement(Ge,{label:"Name"},o.a.createElement("select",{className:"form-control",onChange:function(e){return e.preventDefault()},value:this.props.rulePoint?this.props.rulePoint.id:null},n.map((function(e){return o.a.createElement("option",{key:"select-rulePoint-"+e.id,onClick:function(a){t.setRulePoint(e)},value:e.id},e.name)})))),o.a.createElement(Ge,{label:"Point",children:null===(e=this.props.rulePoint)||void 0===e?void 0:e.point}),o.a.createElement("hr",null),o.a.createElement(Fe,{className:"btn btn-secondary float-left",iconClassName:"fas fa-arrow-left",onClick:this.props.onBack},"Back"),o.a.createElement(Fe,{className:"btn btn-info float-right",iconClassName:"fas fa-arrow-right",onClick:this.onSubmit},"Next"))}}]),a}(Pe),ca=Object(p.f)(Object(pe.b)(fe)(sa)),ua=function e(){Object(m.a)(this,e),this.categories=[],this.loading=!1},da=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new ua,n.masterDataService=void 0,n.categoriesLoaded=function(e){n.setState({categories:e.items,categoriesLoaded:!0},(function(){var t;e.items&&(null===(t=e.items)||void 0===t?void 0:t.length)>0&&(n.props.category||n.setCategory(e.items[0]))}))},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.setCategory=function(e){n.props.setSelectedCategory(e)},n.loadCategories=function(){n.commonAjax(n.masterDataService.list,n.categoriesLoaded,n.showCommonErrorAlert,{filter:{limit:0},modelName:"category"})},n.onSubmit=function(){n.props.onSubmit()},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ft.a)(Object(ht.a)(a.prototype),"componentDidMount",this).call(this),this.loadCategories()}},{key:"render",value:function(){var e,t=this,a=this.state.categories,n=this.props.category;return this.state.loading?o.a.createElement(_e,null):0==a.length?o.a.createElement(ia,null,"Categories not found"):o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.onSubmit()}},o.a.createElement(Ge,{label:"Category"},o.a.createElement("select",{className:"form-control",onChange:function(e){return e.preventDefault()},value:n&&null!==(e=n.id)&&void 0!==e?e:""},a.map((function(e){return o.a.createElement("option",{key:"select-cat-"+e.id,onClick:function(a){t.setCategory(e)},value:e.id},e.name)})))),o.a.createElement("hr",null),o.a.createElement(Fe,{className:"btn btn-secondary float-left",iconClassName:"fas fa-arrow-left",onClick:this.props.onBack},"Back"),o.a.createElement(Fe,{className:"btn btn-info float-right",iconClassName:"fas fa-arrow-right",onClick:this.onSubmit},"Next"))}}]),a}(Pe),ma=Object(p.f)(Object(pe.b)(fe)(da)),pa=function e(){Object(m.a)(this,e),this.student=void 0,this.category=void 0,this.rulePoint=void 0,this.formStep=0,this.savedRecord=void 0,this.attachmentInfo=void 0},fa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new pa,n.studentService=void 0,n.totalStep=4,n.validateStudentData=function(){if(n.props.location.state){var e=n.props.location.state.student;e&&n.setState({student:Object.assign(new Gt,e)})}},n.setAttachment=function(e){n.setState({attachmentInfo:e})},n.removeStudent=function(){n.setState({formStep:0},(function(){Oe((function(){n.setState({student:void 0})}),500)}))},n.removeAttachment=function(){n.setAttachment(void 0)},n.setCategory=function(e){n.setState({category:e})},n.setRulePoint=function(e){n.setState({rulePoint:e})},n.nextStep=function(e){n.setState({formStep:e})},n.submitRecord=function(e){var t,a;n.state.student&&n.state.rulePoint?(e.student_id=null===(t=n.state.student)||void 0===t?void 0:t.id,e.point_id=null===(a=n.state.rulePoint)||void 0===a?void 0:a.id,n.commonAjax(n.studentService.submitPointRecord,n.recordSubmitted,n.showCommonErrorAlert,e,n.state.attachmentInfo)):alert("ERROR: student or rulePoint missing!")},n.recordSubmitted=function(e){n.setState({savedRecord:e.item,formStep:4},n.scrollTop)},n.studentService=n.getServices().studentService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(ft.a)(Object(ht.a)(a.prototype),"componentDidMount",this).call(this),this.validateStudentData(),this.scrollTop(),Oe((function(){e.nextStep(1)}),200)}},{key:"render",value:function(){var e,t,a,n,r,i=this,l=this.state.student;return l?o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Input Point"),o.a.createElement(Ct,{title:(null===(e=l.user)||void 0===e?void 0:e.name)+" - "+(null===(t=l.kelas)||void 0===t?void 0:t.level)+(null===(a=l.kelas)||void 0===a?void 0:a.rombel)+" "+(null===(n=l.kelas)||void 0===n||null===(r=n.sekolah)||void 0===r?void 0:r.nama)},o.a.createElement(ha,{step:this.state.formStep,totalStep:this.totalStep}),1==this.state.formStep?o.a.createElement(ma,{category:this.state.category,onBack:this.removeStudent,setSelectedCategory:this.setCategory,onSubmit:function(){i.nextStep(2)}}):null,2==this.state.formStep&&this.state.category?o.a.createElement(ca,{rulePoint:this.state.rulePoint,setRulePoint:this.setRulePoint,category:this.state.category,onBack:function(){return i.nextStep(1)},onSubmit:function(){i.nextStep(3)}}):null,3==this.state.formStep&&this.state.category&&this.state.rulePoint?o.a.createElement(oa,{submit:this.submitRecord,attachmentInfo:this.state.attachmentInfo,setAttachment:this.setAttachment,removeAttachment:this.removeAttachment,rulePoint:this.state.rulePoint,onBack:function(){return i.nextStep(2)}}):null,4==this.state.formStep&&this.state.savedRecord?o.a.createElement(va,{back:function(){return i.setState({student:null})},record:this.state.savedRecord}):null)):o.a.createElement(ga,null)}}]),a}(Pe),ha=function(e){return o.a.createElement("div",{className:"progress",style:{height:"5px",marginBottom:15}},o.a.createElement("div",{className:"bg-info",style:{transitionDuration:"500ms",width:e.step/e.totalStep*100+"%"}}))},va=function(e){var t,a,n,r,i,l=$t.clone(e.record),s=l.getDate();return o.a.createElement("div",null,o.a.createElement("h4",{className:"text-center text-success"},o.a.createElement("i",{className:"fas fa-check",style:{marginRight:5}}),"Record saved"),o.a.createElement("p",null),o.a.createElement(Ge,{label:"Date"},s.toDateString()," ",l.time),o.a.createElement(Ge,{label:"Category"},null===(t=l.rule_point)||void 0===t||null===(a=t.category)||void 0===a?void 0:a.name),o.a.createElement(Ge,{label:"Name"},null===(n=l.rule_point)||void 0===n?void 0:n.name),o.a.createElement(Ge,{label:"Point"},null===(r=l.rule_point)||void 0===r?void 0:r.point),o.a.createElement(Ge,{label:"Location"},l.location),l.getPicture()?o.a.createElement(Ge,{label:"Picture"},o.a.createElement("img",{src:null!==(i=l.getPicture())&&void 0!==i?i:"",width:200,height:200})):null,o.a.createElement("hr",null),o.a.createElement(Ge,null,o.a.createElement("a",{onClick:e.back,className:"btn btn-dark"},"Ok")))},ga=function(){return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Input Point"),o.a.createElement(ia,null,o.a.createElement("i",{className:"fas fa-exclamation-circle"}),"\xa0Please select student ",o.a.createElement("hr",null),o.a.createElement(Fe,{to:"/dormitoryactivity/studentlist",iconClassName:"fas fa-list"},"Student List")))},ba=Object(p.f)(Object(pe.b)(fe)(fa)),Ea=function e(){Object(m.a)(this,e),this.loading=!1},ya=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).studentService=void 0,n.state=new Ea,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.getRecord=function(){return n.props.record},n.setDropped=function(e){var t=n.getRecord();n.commonAjax(n.studentService.setPointDropped,n.props.onUpdated,n.showCommonErrorAlert,t.id,e)},n.studentService=n.getServices().studentService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getRecord();return this.state.loading?o.a.createElement("button",{className:"btn btn-info btn-sm"},o.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):t.dropped_at?o.a.createElement(Fe,{onClick:function(t){return e.setDropped(!1)},className:"btn btn-info btn-sm",iconClassName:"fas fa-arrow-up"},"Undrop"):o.a.createElement(Fe,{onClick:function(t){return e.setDropped(!0)},className:"btn btn-info btn-sm",iconClassName:"fas fa-arrow-down"},"Drop")}}]),a}(Pe),Sa=Object(p.f)(Object(pe.b)(fe)(ya)),Na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,r,i,l,s,c,u,d,m,p,f=$t.clone(this.props.record),h=f.getPicture(),v=f.getTimestamp();return o.a.createElement(Qe,{title:"Record Detail - "+v,footerContent:o.a.createElement(Fe,{className:"btn btn-dark",onClick:this.props.close},"Ok")},o.a.createElement(Ge,{label:"Name"},null===(e=f.student)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name," - ",null===(a=f.student)||void 0===a||null===(n=a.kelas)||void 0===n?void 0:n.level," ",null===(r=f.student)||void 0===r||null===(i=r.kelas)||void 0===i?void 0:i.rombel),o.a.createElement(Ge,{label:"Item"},o.a.createElement("strong",null,null===(l=f.rule_point)||void 0===l||null===(s=l.category)||void 0===s?void 0:s.name)," - ",null===(c=f.rule_point)||void 0===c?void 0:c.name," ",o.a.createElement("span",{className:"badge badge-dark"},null===(u=f.rule_point)||void 0===u?void 0:u.point)),o.a.createElement(Ge,{label:"Location"},null!==(d=f.location)&&void 0!==d?d:"-"),o.a.createElement(Ge,{label:"Description"},null!==(m=f.description)&&void 0!==m?m:"-"),o.a.createElement(Ge,{label:"Dropped"},null!==(p=f.dropped_at)&&void 0!==p?p:"-"),o.a.createElement(Ge,{label:"Picture"},h?o.a.createElement("img",{src:h,width:200,height:200,className:"border border-dark"}):null))}}]),a}(r.Component),Oa=function e(){Object(m.a)(this,e),this.items=[],this.filter=new st,this.totalData=0,this.record=void 0,this.loading=!1},ja=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"pointrecord",!1)).state=new Oa,n.state.filter.fieldsFilter||(n.state.filter.fieldsFilter={}),n.state.filter.limit=10,n.state.filter.day=n.state.filter.dayTo=(new Date).getDate(),n.state.filter.month=n.state.filter.monthTo=(new Date).getMonth()+1,n.state.filter.year=n.state.filter.yearTo=(new Date).getFullYear(),n.state.filter.fieldsFilter.dropped="ALL",n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,r,i,l,s=this,c=this.state.filter,u=c.fieldsFilter;return this.state.record?o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Point Record Management"),o.a.createElement(Na,{record:this.state.record,close:function(){return s.oneRecordLoaded(void 0)}})):o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Point Record Management"),o.a.createElement("hr",null),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s.loadAtPage(0)}},o.a.createElement(Ge,{label:"Search"},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{name:"name",placeholder:"student name",className:"form-control",value:u?u.name:"",onChange:this.updateFieldsFilter}),o.a.createElement("input",{name:"point_name",placeholder:"point name",className:"form-control",value:u?u.point_name:"",onChange:this.updateFieldsFilter})),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{name:"category_name",placeholder:"category",className:"form-control",value:u?u.category_name:"",onChange:this.updateFieldsFilter}),o.a.createElement("input",{name:"location",placeholder:"location",className:"form-control",value:u?u.location:"",onChange:this.updateFieldsFilter})),o.a.createElement("div",{className:"input-group"},o.a.createElement(zt,{filter:c,onChange:this.updateFilter})),o.a.createElement("div",{className:"input-group"},o.a.createElement(zt,{mode:"to",filter:c,onChange:this.updateFilter}))),o.a.createElement(Ge,{label:"Dropped"},o.a.createElement("select",{name:"dropped",className:"form-control",value:u?u.dropped:"ALL",onChange:this.updateFieldsFilter},o.a.createElement("option",{value:"ALL"},"All"),o.a.createElement("option",{value:"false"},"Not Dropped"),o.a.createElement("option",{value:"true"},"Dropped"))),o.a.createElement(Ge,{label:"Record Count"},o.a.createElement("input",{name:"limit",className:"form-control",value:null!==(e=c.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),o.a.createElement(Ge,{label:"Period"},c.day," ",Bt[(null!==(t=c.month)&&void 0!==t?t:1)-1]," ",c.year," - ",c.dayTo," ",Bt[(null!==(a=c.monthTo)&&void 0!==a?a:1)-1]," ",c.yearTo),o.a.createElement(Ge,null,o.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"}))),o.a.createElement(ct,{activePage:null!==(n=c.page)&&void 0!==n?n:0,limit:null!==(r=c.limit)&&void 0!==r?r:10,totalData:this.state.totalData,onClick:this.loadAtPage}),o.a.createElement(Ca,{startingNumber:(null!==(i=c.page)&&void 0!==i?i:0)*(null!==(l=c.limit)&&void 0!==l?l:10),loading:this.state.loading,recordLoaded:this.oneRecordLoaded,recordUpdated:this.loadItems,items:this.state.items}))}}]),a}(vt),Ca=function(e){return o.a.createElement("div",{style:{overflow:"scroll"}},o.a.createElement("table",{className:"table table-striped"},lt("No","Student","Date","Point Name","Point","Picture","Dropped","Option"),o.a.createElement("tbody",null,e.loading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:7},o.a.createElement(_e,null))):e.items.map((function(t,a){var n,r,i,l,s,c,u,d;return t=$t.clone(t),o.a.createElement("tr",{key:"PointRecord-"+a},o.a.createElement("td",null,a+1+e.startingNumber),o.a.createElement("td",null,null===(n=t.student)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.name),o.a.createElement("td",null,t.getTimestamp()),o.a.createElement("td",null,null===(i=t.rule_point)||void 0===i?void 0:i.name," (",null===(l=t.rule_point)||void 0===l||null===(s=l.category)||void 0===s?void 0:s.name,")"),o.a.createElement("td",null,null===(c=t.rule_point)||void 0===c?void 0:c.point),o.a.createElement("td",null,t.getPicture()?o.a.createElement("img",{src:null!==(u=t.getPicture())&&void 0!==u?u:"",width:50,height:50}):null),o.a.createElement("td",null,null!==(d=t.dropped_at)&&void 0!==d?d:"-"),o.a.createElement("td",null,o.a.createElement("div",{style:{width:"200px"}},o.a.createElement(Sa,{record:t,onUpdated:e.recordUpdated}),o.a.createElement(kt,{record:t,recordLoaded:e.recordLoaded,recordDeleted:e.recordUpdated,modelName:"pointrecord"}))))})))))},wa=Object(p.f)(Object(pe.b)(fe)(ja)),ka=function e(){Object(m.a)(this,e),this.studentName=void 0,this.items=[],this.item=void 0},Pa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new ka,n.masterDataService=void 0,n.submit=function(e){e.preventDefault(),n.loadStudent()},n.itemsLoaded=function(e){n.setState({items:e.items})},n.loadStudent=function(){var e={modelName:"student",filter:{limit:15,fieldsFilter:{name:n.state.studentName}}};n.commonAjax(n.masterDataService.list,n.itemsLoaded,n.showCommonErrorAlert,e)},n.setSelectedItem=function(e){n.setState({item:e,items:[],studentName:void 0},(function(){n.props.setItem&&n.props.setItem(e)}))},n.reset=function(){n.setState({item:void 0,items:[],studentName:void 0},(function(){n.props.setItem&&n.props.setItem(void 0)}))},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.items,n=this.state.item;return o.a.createElement("form",{onReset:this.reset,onSubmit:this.submit},o.a.createElement(Qe,{title:"Select Student"},o.a.createElement(Ge,{label:"Search"},o.a.createElement("input",{placeholder:"Name",value:null!==(e=this.state.studentName)&&void 0!==e?e:"",className:"form-control",onChange:this.handleInputChange,name:"studentName"}),a.length>0?o.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},a.map((function(e){var a;return o.a.createElement("div",{className:"option-item",onClick:function(){t.setSelectedItem(e)},style:{cursor:"pointer"},key:"Student-"+e.id},null===(a=e.user)||void 0===a?void 0:a.name)})),o.a.createElement("a",{onClick:this.reset,className:"option-item"},o.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null),n?o.a.createElement(Aa,{item:n}):null,o.a.createElement("hr",null),o.a.createElement("div",{className:"btn-group float-right"},o.a.createElement("input",{type:"submit",className:"btn btn-dark",value:"Search"}),o.a.createElement("input",{type:"reset",className:"btn btn-secondary",value:"Reset"}))))}}]),a}(Pe),Aa=function(e){var t,a,n,r,i;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ge,{label:"Name"},null===(t=e.item.user)||void 0===t?void 0:t.name),o.a.createElement(Ge,{label:"Kelas"},null===(a=e.item.kelas)||void 0===a?void 0:a.level,null===(n=e.item.kelas)||void 0===n?void 0:n.rombel," - ",null===(r=e.item.kelas)||void 0===r||null===(i=r.sekolah)||void 0===i?void 0:i.nama))},Ra=Object(p.f)(Object(pe.b)(fe)(Pa)),Ia=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).day=(new Date).getDate(),e.month=(new Date).getMonth(),e.year=(new Date).getFullYear(),e.temperature_morning=void 0,e.temperature_afternoon=void 0,e.breakfast=void 0,e.lunch=void 0,e.dinner=void 0,e.medicine_consumption=!1,e.genose_test=void 0,e.antigen_test=void 0,e.pcr_test=void 0,e.description=void 0,e.student_id=void 0,e.student=void 0,e}return a}(b);Ia.clone=function(e){return Object.assign(new Ia,e)},Ia.instance=function(e,t,a,n){var r=new Ia;return r.day=t,r.month=a,r.year=n,r.student_id=e,r};var Da=function e(){Object(m.a)(this,e),this.record=new Ia},La=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new Da,n.studentService=void 0,n.reset=function(){var e=n.props;n.setState({record:Ia.instance(e.student.id,e.day,e.month,e.year)})},n.setRecord=function(e){n.setState({record:Ia.clone(e)})},n.onChange=function(e){var t=n.state.record,a=e.target;t[a.name]="checkbox"==a.type?a.checked:a.value,n.setState({record:Ia.clone(t)})},n.recordSubmitted=function(e){n.showInfo("Data has been submitted")},n.onSubmit=function(e){e.preventDefault();var t=n.state.record;t.student_id=n.props.student.id,n.commonAjax(n.studentService.submitMedicalRecord,n.recordSubmitted,n.showCommonErrorAlert,t)},n.studentService=n.getServices().studentService,n.state.record=Ia.instance(e.student.id,e.day,e.month,e.year),n}return Object(s.a)(a,[{key:"render",value:function(){this.props;var e,t,a,n,r,i,l,s,c,u,d=this.state.record;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("table",{className:"table table-bordered table-striped",style:{fontSize:"0.8em"}},o.a.createElement("tbody",null,o.a.createElement(Ma,null,o.a.createElement("p",{className:"text-center"}," ",d.day,"/",d.month)),o.a.createElement(Ma,null,o.a.createElement("input",{type:"number",onChange:this.onChange,className:"form-control",name:"temperature_morning",value:null!==(e=d.temperature_morning)&&void 0!==e?e:""})),o.a.createElement(Ma,null,o.a.createElement("input",{type:"number",onChange:this.onChange,className:"form-control",name:"temperature_afternoon",value:null!==(t=d.temperature_afternoon)&&void 0!==t?t:""})),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"breakfast",checked:null!==(a=d.breakfast)&&void 0!==a&&a}),d.breakfast?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"lunch",checked:null!==(n=d.lunch)&&void 0!==n&&n}),d.lunch?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"dinner",checked:null!==(r=d.dinner)&&void 0!==r&&r}),d.dinner?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"medicine_consumption",checked:null!==(i=d.medicine_consumption)&&void 0!==i&&i}),d.medicine_consumption?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"genose_test",checked:null!==(l=d.genose_test)&&void 0!==l&&l}),d.genose_test?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"antigen_test",checked:null!==(s=d.antigen_test)&&void 0!==s&&s}),d.antigen_test?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{style:{marginRight:5},onChange:this.onChange,type:"checkbox",name:"pcr_test",checked:null!==(c=d.pcr_test)&&void 0!==c&&c}),d.pcr_test?"yes":"no"),o.a.createElement(Ma,null,o.a.createElement("input",{onChange:this.onChange,type:"text",name:"description",value:null!==(u=d.description)&&void 0!==u?u:"",className:"form-control"})),o.a.createElement(Ma,null,o.a.createElement("button",{className:"btn btn-success",type:"submit"},o.a.createElement("i",{className:"fas fa-save"})),o.a.createElement("br",null),o.a.createElement("p",{className:"text-center"}," ",d.day,"/",d.month)))))}}]),a}(Pe),Ma=function(e){return o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"text-center",style:{minHeight:40}},e.children)))},_a=Object(pe.b)(fe,null,null,{forwardRef:!0})(La),Fa=function e(){Object(m.a)(this,e),this.student=void 0,this.month=(new Date).getMonth()+1,this.year=(new Date).getFullYear(),this.mappedItems=new Map},xa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new Fa,n.studentService=void 0,n.inputRefs=new Map,n.setStudent=function(e){e&&(e=Object.assign(new Gt,e)),n.setState({student:e},n.reset)},n.validateStudentData=function(){var e=n.props.location.state?n.props.location.state.student:void 0;e&&n.setStudent(e)},n.reset=function(){Oe((function(){n.state.student&&n.inputRefs.forEach((function(e,t){e&&e.reset()}))}),100)},n.recordsLoaded=function(e){var t=new Map;e.items&&(t=n.toMap(e.items)),n.setState({mappedItems:t},(function(){Oe((function(){n.inputRefs.forEach((function(e,t){var a,r=n.state.mappedItems.get(t);r?r=Ia.clone(r):r=Ia.instance(null===(a=n.state.student)||void 0===a?void 0:a.id,t,n.state.month,n.state.year);e&&e.setRecord(r)}))}),100)}))},n.toMap=function(e){for(var t=new Map,a=0;a<e.length;a++){var n=e[a];t.set(n.day,n)}return t},n.loadMonthlyRecord=function(){var e;n.commonAjax(n.studentService.loadMonthlyMedicalRecord,n.recordsLoaded,n.showCommonErrorAlert,null===(e=n.state.student)||void 0===e?void 0:e.id,n.state.month,n.state.year)},n.getFilter=function(){return{month:n.state.month,year:n.state.year}},n.dayCount=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear();return t%4==0?qt[e]:Wt[e]}(n.state.month,n.state.year)},n.studentService=n.getServices().studentService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.validateStudentData()}))}},{key:"render",value:function(){for(var e,t,a=this,n=this.state.student,r=this.getFilter(),i=(this.state.mappedItems,this.dayCount()),l=[],s=1;s<=i;s++)l.push(s);var c="150px ".repeat(i);return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Medical Record Form ",n?null===(e=n.user)||void 0===e?void 0:e.name:""),o.a.createElement(Ra,{setItem:this.setStudent}),o.a.createElement("p",null),n?o.a.createElement(Qe,null,o.a.createElement(Ge,{label:"Period ("+Bt[(null!==(t=r.month)&&void 0!==t?t:1)-1]+" "+r.year+")"},o.a.createElement("div",{className:"input-group"},o.a.createElement(zt,{filter:r,hideDay:!0,onChange:this.handleInputChange}))),o.a.createElement(Ge,null,o.a.createElement(Fe,{iconClassName:"fas fa-redo",onClick:this.loadMonthlyRecord},"Load Data")),o.a.createElement("div",{className:"container-fluid  row"},o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Ua,null)),o.a.createElement("div",{className:"col-md-9",style:{overflow:"scroll"}},o.a.createElement("div",{style:{display:"grid",gridTemplateColumns:c}},l.map((function(e){return o.a.createElement(_a,{key:"record-input-"+e,student:n,ref:function(t){a.inputRefs.set(e,t)},year:a.state.year,month:a.state.month,day:e})})))))):null)}}]),a}(Pe),Ua=function(e){return o.a.createElement("table",{className:"table table-bordered table-striped",style:{fontSize:"0.7em"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{style:{minHeight:40}},"Pengukuran"))),["Pengukuran suhu badan pagi hari","Pengukuran suhu badan sore hari","Makan pagi","Makan siang","Makan malam","Konsumsi vitamin / Obat pribadi","Genose test","Swab antigen","PCR test","Kesimpulan sementara"].map((function(e,t){return o.a.createElement("tr",{key:"label-"+t},o.a.createElement("td",null,o.a.createElement("div",{style:{minHeight:40}},t+1,". ",e)))}))))},Ta=Object(p.f)(Object(pe.b)(fe)(xa)),Ba=function e(){Object(m.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1},qa=function e(){var t=this;Object(m.a)(this,e),this.applicationProfile=void 0,this.editFields=new Ba,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Wa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=new qa,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a){var r=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&$e(t).then((function(e){r.setAppProfileField(a,e)})).catch(console.error)}}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({applicationProfile:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t,a=n.state.applicationProfile,r=n.state.editFields;if(a){var o=new Ne;for(var i in r){r[i]&&"backgroundUrl"!=i&&"pageIcon"!=i&&(o[i]=a[i])}return r.backgroundUrl&&(null===(e=a.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(o.backgroundUrl=a.backgroundUrl),r.pageIcon&&(null===(t=a.pageIcon)||void 0===t?void 0:t.startsWith("data:image"))&&(o.pageIcon=a.pageIcon),o}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setApplicationProfile(e.profile);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.masterDataService=n.getServices().masterDataService,n.state.applicationProfile=Object.assign(new Ne,n.getApplicationProfile()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="ApplicationProfile Profile"}},{key:"render",value:function(){var e,t,a=this.state.applicationProfile;if(!a)return null;var n=this.state.editFields,r=null!==(e=a.backgroundUrl)&&void 0!==e?e:"",i=null!==(t=a.pageIcon)&&void 0!==t?t:"";return o.a.createElement("div",{className:"section-body container-fluid"},o.a.createElement("h2",null,"Application Profile"),o.a.createElement(Qe,{title:"Profile Data"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},o.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:r.startsWith("data:image")?r:ce()+r}),o.a.createElement(nt,{name:"backgroundUrl",edit:n.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Ge,{label:"Name"},o.a.createElement(et,{edit:n.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:a.name})),o.a.createElement(Ge,{label:"Welcoming Message"},o.a.createElement(et,{edit:n.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:a.welcoming_message})),o.a.createElement(Ge,{label:"Short Description"},o.a.createElement(et,{edit:n.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:a.description})),o.a.createElement(Ge,{label:"Address"},o.a.createElement(et,{edit:n.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:a.address})),o.a.createElement(Ge,{label:"About"},o.a.createElement(et,{edit:n.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:a.about})),o.a.createElement(Ge,{label:"Contact"},o.a.createElement(et,{edit:n.contact,updateProperty:this.updateProfileProperty,name:"contact",toggleInput:this.toggleInput,value:a.contact})),o.a.createElement(Ge,{label:"Background Color"},o.a.createElement(et,{type:"color",edit:n.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:a.color})),o.a.createElement(Ge,{label:"Font Color"},o.a.createElement(et,{type:"color",edit:n.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:a.fontColor})),o.a.createElement(Ge,{label:"Page Icon"},o.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:i.startsWith("data:image")?i:ce()+i}),o.a.createElement(nt,{name:"pageIcon",edit:n.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Ge,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Pe),Ya=Object(p.f)(Object(pe.b)(fe,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(Wa)),Ha=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return o.a.createElement("div",{className:"section-body container-fluid",style:{marginTop:"20px"}},o.a.createElement("h2",null,"About Us"),o.a.createElement(Qe,{title:"Application"},o.a.createElement(Ge,{label:"Name"},e.name),o.a.createElement(Ge,null,o.a.createElement("i",null,e.description)),o.a.createElement(Ge,{label:"Contact"},e.contact),o.a.createElement(Ge,{label:"Address"},e.address)),o.a.createElement("p",null),o.a.createElement(Qe,{title:"Development Mode"}),o.a.createElement("p",null))}}]),a}(Pe),za=Object(p.f)(Object(pe.b)(fe)(Ha)),Ka=function e(){Object(m.a)(this,e),this.loading=!1,this.displayName="",this.username="",this.editPassword="",this.editPasswordRepeat=""},Ja=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new Ka,n.userService=void 0,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.saveUser=function(){var e=new N;e.password=n.state.editPassword.trim(),e.nickname=n.state.username.trim(),e.name=n.state.displayName.trim(),n.commonAjax(n.userService.saveUser,n.userSaved,n.showCommonErrorAlert,e)},n.userSaved=function(e){n.showConfirmation("Success").then((function(e){n.backToLogin()}))},n.passwordMatch=function(){return""!=n.state.editPassword.trim()&&n.state.editPassword.trim()==n.state.editPasswordRepeat.trim()},n.fieldComplete=function(){return""!=n.state.displayName.trim()&&""!=n.state.username.trim()&&""!=n.state.editPassword.trim()&&""!=n.state.editPasswordRepeat.trim()},n.userService=n.getServices().userService,n}return Object(s.a)(a,[{key:"register",value:function(e){if(e.preventDefault(),this.fieldComplete()){if(0==this.passwordMatch())return void this.showCommonErrorAlert("Password mismatch");this.saveUser()}else this.showCommonErrorAlert("Field is not complete")}},{key:"componentDidMount",value:function(){document.title="Register",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"RegisterForm",className:"Register-wrapper",style:{margin:0,padding:0}},o.a.createElement("div",{className:"text-center",style:{marginTop:"25px"}},o.a.createElement("h1",null,"Register")),o.a.createElement("form",{name:"Register",onSubmit:function(t){e.register(t)},method:"POST",className:"form-signin text-center"},o.a.createElement(Qa,{name:"username",value:this.state.username,onChange:this.handleInputChange}),o.a.createElement(Qa,{name:"displayName",value:this.state.displayName,onChange:this.handleInputChange}),o.a.createElement(Va,{name:"editPassword",value:this.state.editPassword,onChange:this.handleInputChange}),o.a.createElement(Va,{name:"editPasswordRepeat",value:this.state.editPasswordRepeat,onChange:this.handleInputChange}),this.state.loading?o.a.createElement(_e,null):o.a.createElement("button",{className:"btn text-light",style:{backgroundColor:"rgb(9,26,78)"},type:"submit"},"Register"),o.a.createElement("p",null)))}}]),a}(Pe),Va=function(e){var t=e.name,a=e.value,n=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Password"),o.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:t,value:a,onChange:n,type:"password",id:"inputPassword",className:"form-control",placeholder:t,required:!0}),o.a.createElement("p",null))},Qa=function(e){var t=e.name,a=e.value,n=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Username"),o.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:t,value:a,onChange:n,type:"text",id:"username",className:"form-control",placeholder:t,required:!0,autoFocus:!0}),o.a.createElement("p",null))},Ga=Object(p.f)(Object(pe.b)(fe,(function(e){return{}}))(Ja)),$a=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).ref=o.a.createRef(),n.setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/home",render:function(e){return console.debug("Home path"),o.a.createElement(Ke,null)}}),o.a.createElement(p.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(Ke,null)}}),o.a.createElement(p.a,{exact:!0,path:"/about",render:function(e){return o.a.createElement(za,null)}})),o.a.createElement(en,null),o.a.createElement(an,null),o.a.createElement(Za,null),o.a.createElement(Xa,null),o.a.createElement(tn,null))}},{key:"componentDidMount",value:function(){}}]),a}(Pe),Xa=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/management",render:function(e){return o.a.createElement(Nt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/management/musyrifmanagement",render:function(e){return o.a.createElement(yt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/management/rule_category",render:function(e){return o.a.createElement(Dt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/management/rule_point",render:function(e){return o.a.createElement(Tt,null)}}))},Za=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/dormitoryactivity/studentlist",render:function(e){return o.a.createElement(Qt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/dormitoryactivity/inputpoint",render:function(e){return o.a.createElement(ba,null)}}),o.a.createElement(p.a,{exact:!0,path:"/dormitoryactivity/pointsummary",render:function(e){return o.a.createElement(wa,null)}}),o.a.createElement(p.a,{exact:!0,path:"/dormitoryactivity/medicalrecord",render:function(e){return o.a.createElement(Ta,null)}}))},en=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/login",render:function(e){return o.a.createElement(qe,null)}}),o.a.createElement(p.a,{exact:!0,path:"/register",render:function(e){return o.a.createElement(Ga,null)}}))},tn=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/dashboard",render:function(e){return console.debug("dashboard path"),o.a.createElement(He,null)}}))},an=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/settings",render:function(e){return o.a.createElement(Ve,null)}}),o.a.createElement(p.a,{exact:!0,path:"/settings/user-profile",render:function(e){return o.a.createElement(it,null)}}),o.a.createElement(p.a,{exact:!0,path:"/settings/app-profile",render:function(e){return o.a.createElement(Ya,null)}}))},nn=Object(p.f)(Object(pe.b)(fe,(function(e){return{}}))($a)),rn=(a(78),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus,n=this.getLoggedUser();return o.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},o.a.createElement(on,{show:null!=t,brand:t}),a.map((function(a){if(a.userAuthorized&&!a.userAuthorized(n))return null;var r=e.isSidebarActive(a)?"menu-active":"regular-menu";return o.a.createElement("li",{className:"sidebar-item "+r,key:"SIDEBAR_"+a.code},o.a.createElement(Ae.b,{to:t.url+"/"+a.url},o.a.createElement("span",{className:"sidebar-icon"},o.a.createElement("i",{className:O.getIconClassName(a)})),o.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(Pe)),on=function(e){return 0==e.show?null:o.a.createElement(r.Fragment,null,o.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},o.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},o.a.createElement("h3",{className:"text-dark"},o.a.createElement("i",{className:O.getIconClassName(e.brand)})),o.a.createElement(Ae.b,{to:e.brand.url,style:{textDecoration:"none"}},o.a.createElement("h4",{className:"text-dark"},e.brand.name)))),o.a.createElement("li",{className:"sidebar-item-brand "},o.a.createElement(Ae.b,{to:e.brand.url},o.a.createElement("span",{className:"sidebar-icon"},o.a.createElement("i",{className:O.getIconClassName(e.brand)})))))},ln=Object(p.f)(Object(pe.b)(fe,(function(e){return{performLogout:function(t){return e(me(t))}}}))(rn)),sn=(a(79),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/"),a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){var t=j();try{for(var a=0;a<t.length;a++){var n=t[a];if(n.url=="/"+e)return n}return null}catch(r){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t=n.state.menu;return t&&null!=t.subMenus&&(null===(e=t.subMenus)||void 0===e?void 0:e.length)>0?t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(f.a)({},n.state),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar,t=e?"app-content":"content";return o.a.createElement(r.Fragment,null,o.a.createElement(Me,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),o.a.createElement("div",{id:"content-wrapper",className:"container-fluid  "+t},o.a.createElement(nn,{setSidebarMenus:this.setSidebarMenus})),e?o.a.createElement(ln,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}):null)}}]),a}(Pe)),cn=Object(p.f)(Object(pe.b)(fe,(function(e){return{performLogout:function(t){return e(me(t))}}}))(sn)),un=function e(){Object(m.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.realtime=!1,this.appIdStatus="Loading App Id",this.errorAuthenticatingApp=!1},dn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).wsConnected=!1,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.wsUpdateHandler=void 0,n.clientRef=o.a.createRef(),n.userService=void 0,n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.requestAppId=function(){n.setState({appIdStatus:"Authenticating application",errorAuthenticatingApp:!1}),n.userService.requestApplicationId((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.refresh(),n.setState({errorAuthenticatingApp:!1})}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({appIdStatus:"Authenticating application (Retrying)",errorAuthenticatingApp:!1}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.setState({errorAuthenticatingApp:!1})}),(function(){return n.setState({errorAuthenticatingApp:!0})}))},n.smoothEndLoading=function(){Oe((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.handleProgress=function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,r=Math.floor(a);(a<0||a>100)&&n.endLoading(),n.setState({loadingPercentage:r})},n.initWebsocket=function(){var e;e=se()+"realtime-app",e,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(null!=t)for(var n=0;n<t.length;n++)we.push(t[n])}({subscribeUrl:"/wsResp/progress/"+n.props.requestId,callback:n.handleProgress},{subscribeUrl:"/wsResp/"+n.props.requestId+"/update",callback:function(e){return n.handleWsUpdate(e)}}),n.wsConnected=!0},n.handleWsUpdate=function(e){n.wsUpdateHandler&&n.wsUpdateHandler(e)},n.setWsUpdateHandler=function(e){n.wsUpdateHandler=e},n.resetWsUpdateHandler=function(){n.setWsUpdateHandler(void 0)},n.state=new un,n.userService=n.props.services.userService,n.props.setMainApp(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){this.decrementLoadings(),0==this.loadings&&(this.state.realtime?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var o=this;this.alertOnYesCallback=function(e){o.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){o.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",ce()+e.pageIcon)}}(this.props.applicationProfile),this.props.requestId&&!this.wsConnected&&this.initWebsocket()}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;return this.props.requestId?o.a.createElement(r.Fragment,null,o.a.createElement(mn,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?o.a.createElement(ye,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,o.a.createElement(cn,null)):o.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},o.a.createElement("h2",null,this.state.appIdStatus),this.state.errorAuthenticatingApp?o.a.createElement(Fe,{iconClassName:"fas fa-redo",onClick:this.retryRequestAppId,children:"Retry"}):o.a.createElement(_e,null))}}]),a}(r.Component);function mn(e){return 1==e.loading?o.a.createElement(ve,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var pn=Object(p.f)(Object(pe.b)(fe,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){return{type:"SET_REQUEST_ID",payload:Object(f.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}}}(t,a))}}}))(dn)),fn=function(e){var t=Q();return o.a.createElement(pe.a,{store:t},o.a.createElement(Ae.a,null,o.a.createElement(pn,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(fn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.9698501c.chunk.js.map