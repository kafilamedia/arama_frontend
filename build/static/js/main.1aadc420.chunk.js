(this.webpackJsonpdormitory=this.webpackJsonpdormitory||[]).push([[0],{49:function(e,t,a){e.exports=a(88)},54:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),i=(a(54),a(11)),s=a(4),c=a(6),u=a(3),m=a(2),d=a(12),p=(a(15),a(1)),f=a(5),h=a(14),b=(a(59),"".concat(document.getElementById("${ROOT_PATH}").value)),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"".concat(b,"/").concat(null!==e&&void 0!==e?e:"")},g=function(){return v("images/")},E=function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)},y=function e(){Object(p.a)(this,e),this.backColor="transparent",this.marginTop="-200px"};function N(e){return r.a.createElement("div",{className:"modal-backdrop",style:{transitionDuration:"200ms",backgroundColor:e.bgColor}}," ")}function S(e){return r.a.createElement("div",{className:"modal-footer ".concat(e.className)},r.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),!e.yesOnly&&r.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function O(e){return r.a.createElement("div",{className:"modal-header ".concat(e.className)},r.a.createElement("h5",{className:"modal-title ".concat(e.fontClassName),id:"exampleModalCenterTitle"},e.title),r.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},r.a.createElement("i",{className:"fas fa-times"}))))}var j,C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).yesButtonRef=r.a.createRef(),e.noButtonRef=r.a.createRef(),e.state=new y,e.onYes=function(t){e.close((function(){e.props.onYes&&e.props.onYes(t)}))},e.close=function(t){E((function(){e.setState({backColor:"transparent",marginTop:"-200px"},(function(){E(t,100)}))}),100)},e.onNo=function(t){e.close((function(){e.props.onNo&&e.props.onNo(t)}))},e.onClose=function(t){e.close((function(){e.props.onClose&&e.props.onClose(t)}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=1==this.props.isError;!t&&this.yesButtonRef.current?this.yesButtonRef.current.focus():t&&this.noButtonRef.current?this.noButtonRef.current.focus():t&&this.yesButtonRef.current&&this.yesButtonRef.current.focus(),E((function(){e.setState({backColor:"rgba(100,100,100,0.7)",marginTop:"30vh"})}),100)}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{bgColor:this.state.backColor}),r.a.createElement("div",{className:"modal show",style:{display:"block"}},r.a.createElement("div",{className:"modal-dialog -modal-dialog-centered",style:{transitionDuration:"200ms",marginTop:this.state.marginTop}},r.a.createElement("div",{className:"modal-content",style:{marginTop:"5px"}},r.a.createElement(O,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),r.a.createElement("div",{className:"modal-body"}," ",this.props.children," "),r.a.createElement(S,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(n.Component),w=a(23);!function(e){e.ROLE_SUPERADMIN="ROLE_SUPERADMIN",e.ROLE_ASRAMA_MUSYRIF="ROLE_ASRAMA_MUSYRIF",e.ROLE_EMPLOYEE="ROLE_EMPLOYEE"}(j||(j={}));var k=function e(){Object(p.a)(this,e),this.id=void 0,this.createdAt=void 0,this.updatedAt=void 0},R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).displayName=void 0,e.fullName=void 0,e.email=void 0,e.password=void 0,e.profileImage=void 0,e.authorities=[{name:j.ROLE_EMPLOYEE}],e.requestId=void 0,e}return Object(s.a)(a,[{key:"hasRole",value:function(e){for(var t=0;t<this.authorities.length;t++){if(this.authorities[t].name==e)return!0}return!1}}],[{key:"clone",value:function(e){return Object.assign(new a,e)}}]),a}(k),A=void 0,P=!1,D=(new Array,new Array),L=function(e,t){return P&&A?(console.debug("SEND WEBSOCKET"),A.send(e,{},JSON.stringify(t)),!0):(console.info("Connecting"),!1)},I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(p.a)(this,a),(n=t.call(this,e)).parentApp=void 0,n.authenticated=!0,n.state={updated:new Date},n.validateLoginStatus=function(e){return 0==n.authenticated?(e&&e(),!0):0==n.isUserLoggedIn()?(n.backToLogin(),!1):(e&&e(),!0)},n.sendWebSocket=function(e,t){L(e,t)},n.setWsUpdateHandler=function(e){var t;null===(t=n.parentApp)||void 0===t||t.setWsUpdateHandler(e)},n.resetWsUpdateHandler=function(){var e;null===(e=n.parentApp)||void 0===e||e.resetWsUpdateHandler()},n.getApplicationProfile=function(){return n.props.applicationProfile},n.handleInputChange=function(e,t){var a=e.target,r="checkbox"==a.type?a.checked:a.value;if("number"==a.type&&(r=parseInt(r)),t){var o=n.state[t];o[a.name]=r;var l=Object(w.a)({},t,o);n.setState(l)}else{var i=Object(w.a)({},a.name,r);n.setState(i)}},n.doAjax=function(e,t,a,r){n.startLoading(t);for(var o=arguments.length,l=new Array(o>4?o-4:0),i=4;i<o;i++)l[i-4]=arguments[i];e.apply(void 0,l).then((function(e){a&&a(e)})).catch((function(e){r?r(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(){n.endLoading()}))},n.commonAjax=function(e,t,a){for(var r,o=arguments.length,l=new Array(o>3?o-3:0),i=3;i<o;i++)l[i-3]=arguments[i];(r=n).doAjax.apply(r,[e,!1,t,a].concat(l))},n.commonAjaxWithProgress=function(e,t,a){for(var r,o=arguments.length,l=new Array(o>3?o-3:0),i=3;i<o;i++)l[i-3]=arguments[i];(r=n).doAjax.apply(r,[e,!0,t,a].concat(l))},n.getLoggedUser=function(){var e=n.props.loggedUser;if(e)return e.password="^_^",Object.assign(new R,e)},n.isAdmin=function(){var e=n.getLoggedUser();return!!e&&e.hasRole(j.ROLE_SUPERADMIN)},n.scrollTop=function(){var e={top:0,behavior:"smooth"};E((function(){window.scrollTo(e)}),100)},n.isUserLoggedIn=function(){return 1==n.propsAny.loginStatus&&null!=n.propsAny.loggedUser},n.showConfirmation=function(e){var t=Object(c.a)(n);return new Promise((function(a,n){t.parentApp.showAlert("Konfirmasi",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},n.showConfirmationDanger=function(e){var t=Object(c.a)(n);return new Promise((function(a,n){t.parentApp.showAlertError("Konfirmasi",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},n.showInfo=function(e){n.parentApp.showAlert("Info",e,!0,(function(){}))},n.showError=function(e){n.parentApp.showAlertError("Error",e,!0,(function(){}))},n.refresh=function(){return n.forceUpdate()},n.showCommonSuccessAlert=function(){n.showInfo("Success")},n.showCommonErrorAlert=function(e){var t;console.error(e),t=e.response&&e.response.data?e.response.data.message:e,n.showError("Operasi Gagal: "+t)},n.authenticated=r,n.parentApp=e.mainApp,n}return Object(s.a)(a,[{key:"startLoading",value:function(e){var t;null===(t=this.parentApp)||void 0===t||t.startLoading(e)}},{key:"endLoading",value:function(){var e;null===(e=this.parentApp)||void 0===e||e.endLoading()}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.propsAny.history&&this.propsAny.history.push("/login")}},{key:"componentDidMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&0==this.isUserLoggedIn()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}},{key:"propsAny",get:function(){return this.props}}]),a}(n.Component),M=function(e){return{applicationProfile:e.userState.applicationProfile,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,mainApp:e.appState.mainApp}},F=a(13),_=(v(),function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:v().concat("api/user/logout")}}}),U=a(8),x=1,T=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++x+"-"+e};var q=["Januari","Ferbuari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],B=function(e){return e>=10?e.toString():"0"+e},Y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=T(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.role=[],e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e.userAuthorized=function(t){if(0==e.role.length)return!0;if(!t)return!1;t=R.clone(t);for(var a=0;a<e.role.length;a++){var n=e.role[a];if(t.hasRole(n))return!0}return!1},e}return a}(k);Y.defaultMenuIconClassName="fas fa-folder",Y.getIconClassName=function(e){return void 0==e.menuClass?Y.defaultMenuIconClassName:e.menuClass};var K=function(){for(var e=[],t=0;t<z.length;t++){var a=z[t],n=Object.assign(new Y,a),r=[];if(a.subMenus){for(var o=0;o<a.subMenus.length;o++){var l=a.subMenus[o];r.push(Object.assign(new Y,l))}n.subMenus=r}e.push(n)}return e},z=[{code:"home",name:"Home",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1,role:[]},{code:"dashboard",name:"Dashboard",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,role:[j.ROLE_SUPERADMIN,j.ROLE_ASRAMA_MUSYRIF],subMenus:[{code:"followup",name:"Follow Up",url:"followup",menuClass:"fas fa-history",role:[j.ROLE_ASRAMA_MUSYRIF]}]},{code:"management",name:"Manajemen",url:"/management",menuClass:"fas fa-mail-bulk",active:!1,authenticated:!0,showSidebar:!0,role:[j.ROLE_SUPERADMIN,j.ROLE_ASRAMA_MUSYRIF],subMenus:[{code:"musyrifmanagement",name:"Musyrif",url:"musyrifmanagement",menuClass:"fas fa-users",role:[j.ROLE_SUPERADMIN]},{code:"rule_category",name:"Kategori Pelanggaran",url:"rule_category",menuClass:"fas fa-tags",role:[j.ROLE_SUPERADMIN]},{code:"rule_point",name:"Poin Pelanggaran",url:"rule_point",menuClass:"fas fa-puzzle-piece",role:[j.ROLE_SUPERADMIN]},{code:"warning_action",name:"Peringatan",url:"warning_action",menuClass:"fas fa-exclamation-triangle",role:[j.ROLE_SUPERADMIN,j.ROLE_ASRAMA_MUSYRIF]},{code:"category_predicate",name:"Predikat Rapor",url:"category_predicate",menuClass:"far fa-flag",role:[j.ROLE_SUPERADMIN]},{code:"rule_violation",name:"Pelanggaran Umum",url:"rule_violation",menuClass:"fas fa-times-circle",role:[j.ROLE_ASRAMA_MUSYRIF]}]},{code:"asrama",name:"Asrama",url:"/asrama",menuClass:"fas fa-school",active:!1,authenticated:!0,showSidebar:!0,role:[j.ROLE_ASRAMA_MUSYRIF,j.ROLE_SUPERADMIN],subMenus:[{code:"studentlist",name:"Siswa",url:"studentlist",menuClass:"fas fa-users",role:[j.ROLE_ASRAMA_MUSYRIF]},{code:"input_point",name:"Form Pelanggaran Tipe 1",url:"inputpoint",menuClass:"fas fa-edit",role:[j.ROLE_ASRAMA_MUSYRIF]},{code:"pointrecordedit",name:"Form Pelanggaran Tipe 2",url:"pointrecordedit",menuClass:"fas fa-edit",role:[j.ROLE_ASRAMA_MUSYRIF]},{code:"pointsummary",name:"Rekap Pelanggaran",url:"pointsummary",menuClass:"fas fa-clipboard",role:[j.ROLE_ASRAMA_MUSYRIF,j.ROLE_SUPERADMIN]}]},{code:"report",name:"Laporan",url:"/report",menuClass:"fas fa-file",active:!1,authenticated:!0,showSidebar:!0,role:[j.ROLE_ASRAMA_MUSYRIF,j.ROLE_SUPERADMIN],subMenus:[{code:"studentreport",name:"Rapor",url:"studentreport",menuClass:"fas fa-file",role:[j.ROLE_ASRAMA_MUSYRIF,j.ROLE_SUPERADMIN]}]},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,role:[j.ROLE_SUPERADMIN],subMenus:[{code:"config",name:"Konfigurasi",url:"config",menuClass:"fas fa-cog",role:[j.ROLE_SUPERADMIN]}]}],H=(a(60),function e(){Object(p.a)(this,e),this.showNavLinks=!1}),W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!1)).state=new H,n.buttonToggleNavRef=r.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(c.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=K(),n=this.getLoggedUser(),o=this.getApplicationProfile(),l=o.appName;return r.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},r.a.createElement(J,{profile:o}),r.a.createElement("nav",{id:"navbar",className:"w-100 navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},l," | Semester: ",o.semester," ",o.year),r.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},r.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;if(t.userAuthorized&&0==t.userAuthorized(n))return null;var a=e.props.activeMenuCode==t.code;return r.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},r.a.createElement(U.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},r.a.createElement("span",null,t.name)))}))),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement(G,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(I),J=function(e){var t=e.profile;return r.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},r.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},r.a.createElement("strong",null,t.appName," | Semester ",t.semester," ",t.year)))},G=function(e){return e.user?r.a.createElement(n.Fragment,null,r.a.createElement(U.b,{onClick:e.setMenuNull,className:"btn btn-light btn-sm my-2 my-sm-0 mr-2",to:"/settings/user-profile"},r.a.createElement("i",{className:"fas fa-user-circle mr-2"}),r.a.createElement("span",null,e.user.displayName)),r.a.createElement("a",{className:"mr-1 btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt mr-2"}),r.a.createElement("span",null,"Logout"))):r.a.createElement(U.b,{onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0 mr-2",to:"/login"},r.a.createElement("i",{className:"fas fa-sign-in-alt mr-2"}),r.a.createElement("span",null,"Login"))},V=Object(h.f)(Object(f.b)(M,(function(e){return{performLogout:function(t){return e(_(t))}}}))(W)),Q=(a(62),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(r.a.createElement("div",{key:"spinner-item-"+t}));return r.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},r.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(n.Component)),$=(a(63),function e(){Object(p.a)(this,e),this.loading=!1,this.email="",this.editPassword=""}),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!1)).state=new $,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(w.a)({},a,t.value))},n}return Object(s.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.email,this.state.editPassword,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"Login",className:"mt-4"},r.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},className:"form-signin"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in")),r.a.createElement(ee,{value:this.state.email,onChange:this.updateCredentialProperty}),r.a.createElement(Z,{value:this.state.editPassword,onChange:this.updateCredentialProperty}),this.state.loading?r.a.createElement(Q,null):r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn text-light",style:{marginRight:"5px",backgroundColor:"rgb(9,26,78)"},type:"submit"},"Sign in")),r.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(I),Z=function(e){var t=e.value,a=e.onChange;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Password"),r.a.createElement("input",{name:"editPassword",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}))},ee=function(e){var t=e.value,a=e.onChange;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Email"),r.a.createElement("input",{name:"email",value:t,onChange:a,type:"text",className:"form-control",placeholder:"Email",required:!0,autoFocus:!0}))},te=Object(h.f)(Object(f.b)(M,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:v().concat("login"),email:e,password:t,app:a}}}(t,a,n))}}}))(X)),ae=function(){function e(t){Object(p.a)(this,e),this.file=t,this.name="",this.blob=new Blob,this.url="",this.data=""}return Object(s.a)(e,[{key:"setUrl",value:function(e){this.url=e,this.data=e.split(",")[1]}}],[{key:"nameOnly",value:function(t){var a=new e;return a.name=t,a}},{key:"instance",value:function(t,a){var n=new e;return n.name=t,n.url=a,n}}]),e}(),ne=function(e){return new Promise((function(t,a){if(null!=e.files&&e.files[0])try{var n=e.files[0],r=new FileReader;r.readAsDataURL(n),console.debug("fileInput.files[0]: ",n),r.onload=function(){var e=new ae(n);e.setUrl(new String(r.result).toString()),e.name=n.name,t(e)},r.onerror=function(e){a(e)}}catch(o){a(o)}else a(new Error("No file"))}))},re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(p.a)(this,a),(r=t.call(this,e,o)).title=n,document.title=void 0!==n&&null!==n?n:"Asrama KIIS",r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.componentReady()}))}},{key:"componentReady",value:function(){}}]),a}(I),oe=function e(){Object(p.a)(this,e),this.attachment=void 0},le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Dashboard",!0)).state=new oe,n.addPointRecord=function(e){e.preventDefault(),n.state.attachment&&n.props.history.push({pathname:"/asrama/pointrecordedit",state:{attachment:n.state.attachment}})},n.updateImage=function(e){ne(e.target).then((function(e){n.setState({attachment:e})})).catch(console.error)},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this.getLoggedUser();return t?r.a.createElement("div",{className:" section-body container-fluid"},r.a.createElement("h2",null,"Dashboard"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,t.fullName,"  "),r.a.createElement("hr",null)),(null===(e=this.getLoggedUser())||void 0===e?void 0:e.hasRole(j.ROLE_ASRAMA_MUSYRIF))?r.a.createElement("form",{className:"mt-10 text-center",onSubmit:this.addPointRecord},r.a.createElement("h1",null,r.a.createElement("i",{className:"fas fa-camera"})),r.a.createElement("h3",null," Input Pelanggaran"),r.a.createElement("input",{onChange:this.updateImage,type:"file",accept:"image/*",className:"form-control mt-3"}),r.a.createElement("p",null),this.state.attachment?r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"btn btn-dark btn-large",value:"Selanjutnya"}),r.a.createElement("img",{className:"w-100 mt-5",src:this.state.attachment.url})):null):null):null}}]),a}(re),ie=Object(h.f)(Object(f.b)(M)(le)),se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e,t=this.getApplicationProfile(),a=g()+t.backgroundUrl;return r.a.createElement("div",{className:"section-body container-fluid",style:{padding:0}},r.a.createElement("div",{className:"jumbotron",style:{margin:"0px",marginTop:"20px",backgroundImage:'url("'+a+'")',backgroundSize:"cover",color:null!==(e=t.fontColor)&&void 0!==e?e:"rgb(0,0,0)"}},r.a.createElement("h1",{className:"display-4"},t.appName),r.a.createElement("p",{className:"lead"},t.appDescription),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("p",null,t.welcoming_message),r.a.createElement(U.b,{className:"btn btn-primary btn-lg",to:"/about",role:"button"},"About Us")))}}]),a}(I),ce=Object(h.f)(Object(f.b)(M)(se)),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).user=void 0,e.nisdm=void 0,e}return a}(k),me=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return r.a.createElement("th",{key:T()},e)}))))},de=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],pe=[31,29,31,30,31,30,31,31,30,31,30,31],fe=[31,28,31,30,31,30,31,31,30,31,30,31],he=function(e){return[e.getFullYear(),B(e.getMonth()+1),B(e.getDate())].join("-")};var be=function(e){var t=e.split(/\D/),a=parseInt(t[1]);return new Date(parseInt(t[0]),--a,parseInt(t[2]))},ve=function e(){Object(p.a)(this,e),this.limit=5,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.exacts=void 0,this.module=void 0,this.fieldsFilter={},this.maxValue=void 0,this.availabilityCheck=void 0};ve.resetFieldsFilter=function(e){for(var t in e.fieldsFilter)t.endsWith("=d")?e.fieldsFilter[t]=he(new Date):e.fieldsFilter[t]="";return e},ve.withLimit=function(e){var t=new ve;return t.limit=e,t},ve.queryString=function(e){if(!e)return"";var t=[];if(e.page&&e.page>=0&&t.push("page=".concat(e.page)),e.limit&&e.limit>=0&&t.push("limit=".concat(e.limit)),e.orderBy&&t.push("order=".concat(e.orderBy)),!e.orderType||"asc"!==e.orderType&&"desc"!==e.orderType||t.push("orderDesc=".concat("desc"===e.orderType?"true":"false")),e.fieldsFilter)for(var a in e.fieldsFilter)if(Object.prototype.hasOwnProperty.call(e.fieldsFilter,a)){var n=e.fieldsFilter[a];t.push("filter=".concat(encodeURIComponent(a),":").concat(encodeURIComponent(n)))}return"?"+t.join("&")},ve.updatePeriodFilter=function(e,t,a){var n=parseInt(t.target.value);if(!isNaN(n)){var r=new Date(e.fieldsFilter[a]);switch(t.target.name){case"day":r.setDate(n);break;case"month":r.setMonth(n);break;case"year":r.setFullYear(n);break;default:return}e.fieldsFilter[a]=he(r)}};var ge,Ee,ye,Ne,Se,Oe,je,Ce,we=function(e){var t;if(0==e.show)return null;var a="vertical"==e.orientation?"vertical":"horizontal";return r.a.createElement("div",{className:"form-group ".concat(e.className," ").concat("vertical"==a?"":"row")},r.a.createElement("label",{className:"vertical"==a?"":"col-sm-3"},r.a.createElement("strong",null,null!==(t=e.label)&&void 0!==t?t:"")),r.a.createElement("div",{className:"vertical"==a?"":"col-sm-9"},e.children))},ke=function(e,t,a){var n=[],r=Math.ceil(t/e),o=a-1,l=a+3;r>1&&n.push(1);for(var i=o;i<=l;i++)i>1&&i<=r&&n.push(i);return l<r&&n.push(r),n},Re=function(e){var t=ke(e.limit,e.totalData,e.activePage);if(0==t.length)return null;var a=t[t.length-1],n=e.activePage+1>=a?0:e.activePage+1,o=e.activePage-1<0?a-1:e.activePage-1;return r.a.createElement("div",null,r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.onClick(o)}},"Previous")),t.map((function(t,a){return r.a.createElement("li",{key:"NAV-".concat(T()),className:"page-item "+(t-1==e.activePage?"active":"")},r.a.createElement("a",{className:"page-link ",onClick:function(a){return e.onClick(t-1)}},t))})),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.onClick(n)}},"Next")))))},Ae=a(10),Pe=(a(25),a(89)),De=a(28),Le=a(22),Ie=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app,r=["username="+a.meta.email,"password="+a.meta.password,"transport_type=rest"];Le.post(a.meta.url,r.join("&"),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",o=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],o=!0);var l=Object.assign({},a,{payload:{loginStatus:o,loginKey:r,loggedUser:n.result}});Qe(t),delete l.meta,e.dispatch(l)})).catch(console.log).finally((function(){n.endLoading()}))}}},Me=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=He();Le.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},Fe=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;Le.post(a.meta.url,a.payload,{headers:He()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},_e=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},Ue={mainApp:void 0},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(F.a)(Object(F.a)({},e),{},{mainApp:t.payload});default:return e}},Te={loginKey:null,loginStatus:!1,loginFailed:!1,menus:K(),loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:{},assetsPath:""},qe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,a=arguments.length>1?arguments[1]:void 0,n={};switch(a.type){case"SET_REQUEST_ID":return(n=Object(F.a)(Object(F.a)({},t),{},{requestId:a.payload.requestId,applicationProfile:null!==(e=a.payload.result)&&void 0!==e?e:{},assetsPath:"http://FIXME"})).loginStatus=!1,n.loggedUser=null,a.payload.referer.refresh(),n;case"do_login":return n=Object(F.a)(Object(F.a)({},t),{},{loginAttempt:!0,loginStatus:a.payload.loginStatus,loginKey:a.payload.loginKey,loginFailed:0==a.payload.loginStatus,loggedUser:a.payload.loggedUser});case"do_logout":return n=Object(F.a)(Object(F.a)({},t),{},{loginStatus:!1,loggedUser:null}),$e(null),n;case"refresh_login":return n=Object(F.a)(Object(F.a)({},t),{},{loginStatus:a.payload.loginStatus,loggedUser:a.payload.loggedUser,requestId:a.payload.requestId});case"get_logged_user":return n=Object(F.a)(Object(F.a)({},t),{},{loggedUser:a.payload.data});case"set_logged_user":return n=Object(F.a)(Object(F.a)({},t),{},{loggedUser:a.payload,loginStatus:!0});case"SET_APPLICATION_PROFILE":return n=Object(F.a)(Object(F.a)({},t),{},{applicationProfile:a.payload.applicationProfile});default:return Object(F.a)({},t)}},Be=Object(De.b)({appState:xe,userState:qe}),Ye={appState:Ue,userState:Te},Ke=null,ze=function(){return Ke=Object(De.c)(Be,Ye,Object(De.a)(Ie,Fe,Me,_e))},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/json";return{"Content-Type":e,requestId:Ge(),Authorization:"Bearer "+Ve()}},We=function(){return{"Content-Type":"application/json",requestId:Ge()}},Je="dormitory-app-login-key-3",Ge=function(){return null==Ke?"":Ke.getState().userState.requestId},Ve=function(){return Ze(Je)},Qe=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];Xe(Je,t)}},$e=function(e){Xe(Je,e)},Xe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},Ze=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},et=a(22),tt=a.n(et),at=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",n=null!==t&&void 0!==t?t:{};return new Promise((function(t,r){tt.a.post(e,n,{headers:He(a)}).then((function(e){Qe(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):r(a)})).catch((function(e){console.error(e),r(e)}))}))},nt=function(e){return new Promise((function(t,a){tt.a.get(e,{headers:He()}).then((function(e){Qe(e);var n=e.data;n.rawAxiosResponse=e,"00"==n.code?t(n):a(n)})).catch((function(e){console.error(e),a(e)}))}))},rt=Object(Pe.a)()(ge=function(){function e(){Object(p.a)(this,e)}return Object(s.a)(e,[{key:"activate",value:function(e,t){var a="api/admin/asrama/musyrif/set-active/".concat(e.id,"/").concat(t);return at(v()+a)}}]),e}())||ge,ot=function(e){var t;if(0==e.show)return null;var a=null!==(t=e.className)&&void 0!==t?t:"btn btn-outline-secondary";return e.to?r.a.createElement(U.b,Object.assign({},e.attributes,{to:e.to,style:e.style,onClick:e.onClick,className:a}),e.iconClassName&&r.a.createElement("span",{style:{marginRight:e.children?"5px":"0px"}},r.a.createElement("i",{className:e.iconClassName})),e.children):r.a.createElement("a",Object.assign({},e.attributes,{tyle:e.style,onClick:e.onClick,className:a}),e.iconClassName&&r.a.createElement("span",{style:{marginRight:e.children?"5px":"0px"}},r.a.createElement("i",{className:e.iconClassName})),e.children)},lt=(Ee=Object(Ae.resolve)(rt),ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),n=t.call(this,e,!0),Object(i.a)(n,"musyrifManagementService",Ne,Object(c.a)(n)),n.getEmployee=function(){return n.props.employee},n.activeStatusUpdate=function(e){n.props.onUpdated&&n.props.onUpdated()},n.activateMusyrif=function(e){var t=n.getEmployee();n.commonAjax(n.musyrifManagementService.activate,n.activeStatusUpdate,n.showCommonErrorAlert,t,e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n=this,o=this.props,l=this.getEmployee(),i=null===(e=l.user)||void 0===e?void 0:e.hasRole(j.ROLE_ASRAMA_MUSYRIF);return r.a.createElement("tr",{key:l.id},r.a.createElement("td",null,o.startingNumber+1),r.a.createElement("td",null,null===(t=l.user)||void 0===t?void 0:t.fullName),r.a.createElement("td",null,null===(a=l.user)||void 0===a?void 0:a.email),r.a.createElement("td",null,l.nisdm),r.a.createElement("td",null,r.a.createElement("i",{className:i?"fas fa-check text-success":"fas fa-times"})),r.a.createElement("td",null," ",1==i?r.a.createElement(ot,{className:"btn btn-danger btn-sm",onClick:function(e){return n.activateMusyrif(!1)}},"Nonaktifkan"):r.a.createElement(ot,{className:"btn btn-success btn-sm",onClick:function(e){return n.activateMusyrif(!0)}},"Jadikan musyrif")))}}]),a}(I),Ne=Object(d.a)(ye.prototype,"musyrifManagementService",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye),it=Object(h.f)(Object(f.b)(M)(lt)),st=function(e){var t;if(0==e.show)return null;var a=null!==(t=e.className)&&void 0!==t?t:"btn btn-outline-secondary";return r.a.createElement("a",Object.assign({style:e.style},e.attributes,{onClick:e.onClick,className:a}),e.iconClassName&&r.a.createElement("span",{style:e.children?{marginRight:"5px"}:{}},r.a.createElement("i",{className:e.iconClassName})),e.children)},ct=function(e){var t,a,n=e.active,o=e.onClick;return r.a.createElement("div",{className:"btn-group"},r.a.createElement(st,{className:"btn  btn-sm ".concat(n?"btn-dark":"btn-outline-dark"),onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o(!0)}))},null!==(t=e.yesLabel)&&void 0!==t?t:"Yes"),r.a.createElement(st,{className:"btn  btn-sm ".concat(0==n?"btn-dark":"btn-outline-dark"),onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o(!1)}))},null!==(a=e.noLabel)&&void 0!==a?a:"No"))},ut=a(21),mt=a(16),dt=Object(Pe.a)()(Se=function(){function e(){Object(p.a)(this,e),this.getOne=function(e,t,a){var n=v().concat("api/admin/".concat(e,"/").concat(t,"/").concat(a));return nt(n)},this.delete=function(e,t,a){return function(e){return new Promise((function(t,a){tt.a.delete(e,{headers:He()}).then((function(e){Qe(e);var n=e.data;n.rawAxiosResponse=e,"00"==n.code?t(n):a(n)})).catch((function(e){console.error(e),a(e)}))}))}(v().concat("api/admin/".concat(e,"/").concat(t,"/").concat(a)))},this.list=function(e,t){console.log("filter",e.filter);var a=v().concat("api/admin/".concat(t,"/").concat(e.modelName));return nt(a+ve.queryString(e.filter))},this.insert=function(e,t,a){var n=v().concat("api/admin/".concat(t,"/").concat(e));return at(n,a)},this.update=function(e,t,a,n){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",n=null!==t&&void 0!==t?t:{};return new Promise((function(t,r){tt.a.put(e,n,{headers:He(a)}).then((function(e){Qe(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):r(a)})).catch((function(e){console.error(e),r(e)}))}))}(v().concat("api/admin/".concat(t,"/").concat(e,"/").concat(a)),n)}}return Object(s.a)(e,[{key:"generateReport",value:function(e){return function(e,t){var a=null!==t&&void 0!==t?t:{};return new Promise((function(t,n){tt.a.post(e,a,{responseType:"blob",headers:He()}).then((function(e){Qe(e);var a=e.data;a.rawAxiosResponse=e,console.debug("axiosResponse.headers: ",e.headers);var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],l=new Blob([a],{type:o}),i=window.URL.createObjectURL(l),s=new ae;s.name=n,s.blob=l,s.url=i,t(s)})).catch((function(e){console.error(e),n(e)}))}))}(v().concat("api/app/report/records"),e)}}]),e}())||Se,pt=(a(82),Oe=Object(Ae.resolve)(dt),je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n,o){var l,s,u,m=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(p.a)(this,a),(u=t.call(this,e,"Asrama KIIS",!0)).modelName=n,u.menu=o,u.overrideLoading=m,Object(i.a)(u,"masterDataService",Ce,Object(c.a)(u)),u.formRef=r.a.createRef(),u.emptyRecord=function(){throw new Error("Empty Record Method is Not Implemented....")},u.startLoading=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u.overrideLoading?u.setState({loading:!0}):Object(ut.a)((l=Object(c.a)(u),Object(mt.a)(a.prototype)),"startLoading",l).call(l,e)},u.endLoading=function(){u.overrideLoading?u.setState({loading:!1}):Object(ut.a)((s=Object(c.a)(u),Object(mt.a)(a.prototype)),"endLoading",s).call(s)},u.loadItems=function(){var e={filter:u.state.filter,modelName:u.modelName};u.commonAjax(u.masterDataService.list,u.itemsLoaded,u.showCommonErrorAlert,e,u.menu)},u.itemsLoaded=function(e){u.setState({items:e.result.items,totalData:e.result.totalData})},u.updateFilter=function(e){var t,a=u.state.filter,n=e.target;n.value&&""!=n.value&&(t="number"==n.type||n.dataset&&"number"==n.dataset.type?parseInt(n.value):n.value,a[n.name]=t,u.setState({filter:a}))},u.updateFieldsFilter=function(e){var t=u.state.filter,a=e.target;t.fieldsFilter||(t.fieldsFilter={}),t.fieldsFilter[a.name]=a.value,u.setState({filter:t})},u.loadAtPage=function(e){var t=u.state.filter;t.page=e,u.setState({filter:t},u.loadItems)},u.updateRecordProp=function(e){var t,a=e.target,n=a.dataset;t=n.type&&"boolean"==n.type?"true"==a.value:a.value;var r=u.state.record;r[a.name]=t,u.setState({record:r})},u.resetForm=function(e){u.setState({record:u.emptyRecord()},e)},u.oneRecordLoaded=function(e){u.setState({record:e},(function(){u.formRef.current&&u.formRef.current.showModal(),u.scrollTop()}))},u.recordUpdated=function(e){u.resetForm((function(){u.formRef.current&&u.formRef.current.hideModal(),u.showInfo("Success Update"),u.loadItems()}))},u.callApiInsert=function(e){u.commonAjax(u.masterDataService.insert,u.recordUpdated,u.showCommonErrorAlert,u.modelName,u.menu,e)},u.callApiUpdate=function(e,t){u.commonAjax(u.masterDataService.update,u.recordUpdated,u.showCommonErrorAlert,u.modelName,u.menu,e,t)},u.reload=function(e){e&&e.preventDefault&&e.preventDefault(),u.loadAtPage(0)},u.modelName=null!==n&&void 0!==n?n:u.modelName,u}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ut.a)(Object(mt.a)(a.prototype),"componentDidMount",this).call(this),this.scrollTop(),this.loadItems()}}]),a}(re),Ce=Object(d.a)(je.prototype,"masterDataService",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je),ft=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0},ht=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"musyrif","asrama")).state=new ft,n.emptyRecord=function(){return new ue},n.setMusyrifOnly=function(e){var t=n.state.filter;t.fieldsFilter||(t.fieldsFilter={}),t.fieldsFilter["user.authorities.name"]=e?j.ROLE_ASRAMA_MUSYRIF:j.ROLE_EMPLOYEE,n.setState({filter:t},(function(){return n.loadAtPage(0)}))},n.onEmployeeStatusUpdate=function(){n.loadItems()},n.state.filter.limit=10,n.state.filter.orderBy="user.fullName",n.state.filter.fieldsFilter={},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,o,l=this.state.filter,i=(null===l||void 0===l?void 0:l.fieldsFilter)&&l.fieldsFilter["user.authorities.name"]===j.ROLE_ASRAMA_MUSYRIF;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Musyrif"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("input",{name:"user.fullName",placeholder:"Nama",className:"form-control-sm",value:l.fieldsFilter?l.fieldsFilter["user.fullName"]:"",onChange:this.updateFieldsFilter})),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{name:"limit",type:"number",className:"form-control-sm",value:null!==(e=l.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),r.a.createElement(we,{label:"Opsi"},r.a.createElement(ct,{active:i,onClick:this.setMusyrifOnly,noLabel:"Semua pegawai",yesLabel:"Hanya musyrif"})),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}))),r.a.createElement(Re,{activePage:null!==(t=l.page)&&void 0!==t?t:0,limit:null!==(a=l.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadAtPage}),r.a.createElement(bt,{onUpdated:this.onEmployeeStatusUpdate,startingNumber:(null!==(n=l.page)&&void 0!==n?n:0)*(null!==(o=l.limit)&&void 0!==o?o:5),items:this.state.items}))}}]),a}(pt),bt=function(e){var t=e.items;return r.a.createElement("div",{className:"container-fluid",style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},me("No","Nama","Email","NIP","Role: Musyrif","Opsi"),r.a.createElement("tbody",null,t.map((function(t,a){return t.user&&(t.user=R.clone(t.user)),r.a.createElement(it,{onUpdated:e.onUpdated,employee:t,startingNumber:e.startingNumber+a,key:t.id})})))))},vt=Object(h.f)(Object(f.b)(M)(ht)),gt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e,"Management",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Halaman Manajemen"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.fullName),r.a.createElement("hr",null)))}}]),a}(re),Et=Object(h.f)(Object(f.b)(M)(gt)),yt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.description=void 0,e.points=void 0,e}return a}(k);yt.clone=function(e){return Object.assign(new yt,e)};var Nt,St,Ot,jt,Ct,wt,kt,Rt=a(48),At=function e(){Object(p.a)(this,e),this.show=!0},Pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=new At,e.hideModal=function(){e.setState({show:!1})},e.showModal=function(){e.setState({show:!0})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){0==this.props.show&&this.setState({show:!1})}},{key:"render",value:function(){var e,t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return r.a.createElement(st,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(Rt.a)(e,["style","show","footerContent","toggleable"])}(this.props);return r.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(F.a)(Object(F.a)({},this.props.style),{},{marginBottom:"10px"})}),r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?r.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},r.a.createElement("i",{className:"fas fa-times"}))):null),r.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?r.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(n.Component),Dt=(Nt=Object(Ae.resolve)(dt),St=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),n=t.call(this,e,!0),Object(i.a)(n,"masterDataService",Ot,Object(c.a)(n)),n.getRecord=function(){var e=n.props.record;return e||(alert("this.props.record undefined"),{})},n.recordLoaded=function(e){n.props.recordLoaded&&n.props.recordLoaded(e.result)},n.recordLoadedForDetail=function(e){n.props.recordLoadedForDetail&&n.props.recordLoadedForDetail(e.result)},n.recordDeleted=function(e){n.showInfo("Record has been deleted"),n.props.recordDeleted&&n.props.recordDeleted(e.result)},n.loadRecord=function(){n.commonAjax(n.masterDataService.getOne,n.recordLoaded,n.showCommonErrorAlert,n.props.menu,n.props.modelName,n.loadRecordRequest.record_id)},n.loadRecordForDetail=function(){n.commonAjax(n.masterDataService.getOne,n.recordLoadedForDetail,n.showCommonErrorAlert,n.props.menu,n.props.modelName,n.loadRecordRequest.record_id)},n.deleteRecord=function(){n.showConfirmationDanger("Delete record?").then((function(e){e&&n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,n.props.menu,n.props.modelName,n.loadRecordRequest.record_id)}))},n.hasType=function(e){return!!n.props.types&&n.props.types.indexOf(e)>=0},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=null!==(e=this.props.types)&&void 0!==e?e:void 0;return r.a.createElement("div",{className:"btn-group"},this.hasType("detail")&&r.a.createElement(ot,{onClick:this.loadRecordForDetail,iconClassName:"fas fa-info-circle",className:"btn btn-info btn-sm"}),void 0===t||this.hasType("edit")&&r.a.createElement(ot,{onClick:this.loadRecord,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),void 0===t||this.hasType("delete")&&r.a.createElement(ot,{onClick:this.deleteRecord,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"}))}},{key:"modelName",get:function(){return this.props.modelName}},{key:"loadRecordRequest",get:function(){return{record_id:this.getRecord().id,modelName:this.modelName}}}]),a}(I),Ot=Object(d.a)(St.prototype,"masterDataService",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St),Lt=Object(h.f)(Object(f.b)(M)(Dt)),It=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0,this.record=new yt},Mt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"rule-categories","asrama")).state=new It,n.onSubmit=function(){n.showConfirmation("Submit Data?").then((function(e){var t,a=n.state.record;e&&(null!==(t=a.id)&&void 0!==t&&t?n.callApiUpdate(a.id,a):n.callApiInsert(a))}))},n.emptyRecord=function(){return new yt},n.state.filter.limit=10,n.state.filter.orderBy="name",n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,o,l=this.state.filter;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Kategori Pelanggaran"),r.a.createElement("hr",null),r.a.createElement(_t,{formRef:this.formRef,resetForm:this.resetForm,onSubmit:this.onSubmit,record:this.state.record,updateRecordProp:this.updateRecordProp}),r.a.createElement("form",{onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("input",{name:"name",placeholder:"nama",className:"form-control-sm",value:l.fieldsFilter?l.fieldsFilter.name:"",onChange:this.updateFieldsFilter})),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{name:"limit",type:"number",className:"form-control-sm",value:null!==(e=l.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}))),r.a.createElement(Re,{activePage:null!==(t=l.page)&&void 0!==t?t:0,limit:null!==(a=l.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadAtPage}),r.a.createElement(Ft,{recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(n=l.page)&&void 0!==n?n:0)*(null!==(o=l.limit)&&void 0!==o?o:10),items:this.state.items}))}}]),a}(pt),Ft=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},me("No","Nama","Deskripsi","Opsi"),r.a.createElement("tbody",null,e.items.map((function(t,a){return r.a.createElement("tr",{key:"category-"+a},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement(Lt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,modelName:"rule-categories",menu:"asrama"})))})))))},_t=function(e){var t,a;return r.a.createElement("form",{className:"record-form mb-3",onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(Pt,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},r.a.createElement(we,{label:"Nama"},r.a.createElement("input",{required:!0,value:null!==(t=e.record.name)&&void 0!==t?t:"",onChange:e.updateRecordProp,className:"form-control",name:"name"})),r.a.createElement(we,{label:"Deskripsi"},r.a.createElement("textarea",{required:!0,className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(a=e.record.description)&&void 0!==a?a:""})),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-sm mr-2"}),r.a.createElement("input",{type:"reset",className:"btn btn-secondary btn-sm",onClick:function(t){return e.resetForm()}}))))},Ut=Object(h.f)(Object(f.b)(M)(Mt)),xt=a(20),Tt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).ruleCategoryName=void 0,e.ruleCategoryId=void 0,e.name=void 0,e.description=void 0,e.point=0,e.droppable=!0,e}return a}(k),qt=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0,this.record=new Tt,this.categories=[],this.categoriesLoaded=!1},Bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"rule-points","asrama")).state=new qt,n.onSubmit=function(){n.showConfirmation("Submit Data?").then((function(e){var t;e&&(null!==(t=n.state.record.id)&&void 0!==t&&t?n.callApiUpdate(n.state.record.id,n.state.record):n.callApiInsert(n.state.record))}))},n.categoriesLoaded=function(e){n.setState({categories:e.result.items,categoriesLoaded:!0},(function(){n.resetForm(),n.loadItems()}))},n.categoriesNotLoaded=function(e){n.setState({categories:[],categoriesLoaded:!0},n.resetForm)},n.loadCategories=function(){var e=new ve;e.limit=0;var t={filter:e,modelName:"rule-categories"};n.commonAjax(n.masterDataService.list,n.categoriesLoaded,n.categoriesNotLoaded,t,"asrama")},n.emptyRecord=function(){var e=new Tt;return n.state.categories.length>0&&(e.ruleCategoryId=n.state.categories[0].id),e},n.state.filter.limit=10,n.state.filter.orderBy="name",n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.loadCategories()}))}},{key:"render",value:function(){var e,t,a,n,o,l=this.state.filter,i=this.state.categories;if(this.state.categoriesLoaded&&0==i.length)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Kategori pelanggaran belum ada"));var s=l.fieldsFilter&&l.fieldsFilter.category_id?l.fieldsFilter.category_id:"ALL";return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Poin Pelanggaran"),r.a.createElement("hr",null),r.a.createElement(Kt,{categories:i,reloadCategories:this.loadCategories,formRef:this.formRef,resetForm:this.resetForm,onSubmit:this.onSubmit,record:this.state.record,updateRecordProp:this.updateRecordProp}),r.a.createElement("form",{onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"name",placeholder:"nama",className:"form-control-sm",value:l.fieldsFilter?l.fieldsFilter.name:"",onChange:this.updateFieldsFilter}),r.a.createElement("select",{value:s,className:"form-control-sm",name:"category_id",onChange:this.updateFieldsFilter},[{id:"",name:"Semua Kategori"}].concat(Object(xt.a)(i)).map((function(e){return r.a.createElement("option",{key:"filter-cat-"+e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(ot,{className:"btn btn-sm",iconClassName:"fas fa-redo",onClick:this.loadCategories},"Reload")))),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{type:"number",name:"limit",className:"form-control-sm",value:null!==(e=l.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}))),r.a.createElement(Re,{activePage:null!==(t=l.page)&&void 0!==t?t:0,limit:null!==(a=l.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadAtPage}),r.a.createElement(Yt,{recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(n=l.page)&&void 0!==n?n:0)*(null!==(o=l.limit)&&void 0!==o?o:10),items:this.state.items}))}}]),a}(pt),Yt=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},me("No","Nama","Poin","Deskripsi","Kategori","Pemutihan","Opsi"),r.a.createElement("tbody",null,e.items.map((function(t,a){return r.a.createElement("tr",{key:"RulePoint-".concat(a)},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.point),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.ruleCategoryName),r.a.createElement("td",null,t.droppable?"Ya":"TIdak"),r.a.createElement("td",null,r.a.createElement(Lt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,modelName:"rule-points",menu:"asrama"})))})))))},Kt=function(e){var t,a;return r.a.createElement("form",{className:"record-form mb-3",onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(Pt,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},r.a.createElement(we,{label:"Nama"},r.a.createElement("input",{value:null!==(t=e.record.name)&&void 0!==t?t:"",onChange:e.updateRecordProp,className:"form-control ",name:"name",required:!0})),r.a.createElement(we,{label:"Pengurangan Poin"},r.a.createElement("input",{type:"number",value:e.record.point,onChange:e.updateRecordProp,className:"form-control ",name:"point",required:!0})),r.a.createElement(we,{label:"Deskripsi"},r.a.createElement("textarea",{className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(a=e.record.description)&&void 0!==a?a:""})),r.a.createElement(we,{label:"Dapat diputihkan"},r.a.createElement("select",{className:"form-control-sm","data-type":"boolean",name:"droppable",onChange:e.updateRecordProp,value:1==e.record.droppable?"true":"false",required:!0},r.a.createElement("option",{value:"true"},"Ya"),r.a.createElement("option",{value:"false"},"Tidak"))),r.a.createElement(we,{label:"Category"},r.a.createElement("div",{className:"input-group"},r.a.createElement("select",{required:!0,value:e.record.ruleCategoryId,className:"form-control-sm",name:"ruleCategoryId",onChange:e.updateRecordProp},e.categories.map((function(e){return r.a.createElement("option",{key:"cat-"+e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(ot,{className:"btn btn-sm",iconClassName:"fas fa-redo",onClick:e.reloadCategories},"Reload")))),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-sm mr-2"}),r.a.createElement("input",{value:"Reset",type:"reset",className:"btn btn-secondary btn-sm",onClick:function(t){return e.resetForm()}}))))},zt=Object(h.f)(Object(f.b)(M)(Bt)),Ht=Object(Pe.a)()(jt=function(){function e(){Object(p.a)(this,e),this.followUp=function(e){return at(v("api/dormitorymanagement/followup"),{record_id:e})},this.getFollowUpReminders=function(){return at(v("api/dormitorymanagement/followupreminders"),{})},this.getRaporData=function(e){return nt(v("api/asrama/report/load-data/".concat(e)))},this.downloadRaporData=function(e){return t=v("api/asrama/report/load-data-xls/".concat(e)),new Promise((function(e,a){tt.a.get(t,{responseType:"blob",headers:He()}).then((function(t){Qe(t);var a=t.data;a.rawAxiosResponse=t,console.debug("axiosResponse.headers: ",t.headers);var n=t.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],l=new Blob([a],{type:o}),i=window.URL.createObjectURL(l),s=new ae;s.name=n,s.blob=l,s.url=i,e(s)})).catch((function(e){console.error(e),a(e)}))}));var t},this.submitMedicalRecord=function(e){return at(v("api/dormitorymanagement/submitmedicalrecord"),e)},this.loadMonthlyMedicalRecord=function(e,t,a){var n={filter:{fieldsFilter:{student_id:e}}};return at(v("api/dormitorymanagement/monthlymedicalrecord"),n)},this.setPointDropped=function(e,t){var a=v(t?"api/asrama/student-points/drop-points":"api/asrama/student-points/undrop-points");return at("".concat(a,"?id=").concat(e))},this.dropAll=function(e){var t=v("api/asrama/student-points/drop-points"),a="?"+e.map((function(e){return"id=".concat(e)})).join("&");return at(t+a)},this.undropAll=function(e){var t=v("api/asrama/student-points/undrop-points"),a="?"+e.map((function(e){return"id=".concat(e)})).join("&");return at(t+a)}}return Object(s.a)(e,[{key:"updatePointRecord",value:function(e,t){var a,n,r,o,l,i,s,c,u,m,d,p,f,h,b,g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(t.data="");var E=new FormData;E.append("id",null!==(a=null===(n=e.id)||void 0===n?void 0:n.toString())&&void 0!==a?a:""),E.append("day",null!==(r=null===(o=e.day)||void 0===o?void 0:o.toString())&&void 0!==r?r:""),E.append("month",null!==(l=null===(i=e.month)||void 0===i?void 0:i.toString())&&void 0!==l?l:""),E.append("year",null!==(s=null===(c=e.year)||void 0===c?void 0:c.toString())&&void 0!==s?s:""),E.append("time",new Date(null!==(u=e.time)&&void 0!==u?u:new Date).getTime().toString()),E.append("description",null!==(m=e.description)&&void 0!==m?m:""),E.append("location",null!==(d=e.location)&&void 0!==d?d:""),E.append("rulePointId",null!==(p=null===(f=e.rulePointId)||void 0===f?void 0:f.toString())&&void 0!==p?p:""),E.append("classMemberId",null!==(h=null===(b=e.classMemberId)||void 0===b?void 0:b.toString())&&void 0!==h?h:""),E.append("removeImage",g?"true":"false");var y=null===t||void 0===t?void 0:t.file;return y&&E.append("image",y),at(v("api/asrama/student-points/update"),E,"multipart/form-data")}},{key:"insertPointRecord",value:function(e,t){var a,n,r,o,l,i,s,c,u,m,d,p,f;t&&(t.data="");var h=new FormData;h.append("day",null!==(a=null===(n=e.day)||void 0===n?void 0:n.toString())&&void 0!==a?a:""),h.append("month",null!==(r=null===(o=e.month)||void 0===o?void 0:o.toString())&&void 0!==r?r:""),h.append("year",null!==(l=null===(i=e.year)||void 0===i?void 0:i.toString())&&void 0!==l?l:""),h.append("time",new Date(null!==(s=e.time)&&void 0!==s?s:new Date).getTime().toString()),h.append("description",null!==(c=e.description)&&void 0!==c?c:""),h.append("location",null!==(u=e.location)&&void 0!==u?u:""),h.append("rulePointId",null!==(m=null===(d=e.rulePointId)||void 0===d?void 0:d.toString())&&void 0!==m?m:""),h.append("classMemberId",null!==(p=null===(f=e.classMemberId)||void 0===f?void 0:f.toString())&&void 0!==p?p:"");var b=null===t||void 0===t?void 0:t.file;return b&&h.append("image",b),at(v("api/asrama/student-points/insert"),h,"multipart/form-data")}},{key:"getClasses",value:function(){return nt(v("api/admin/school-data/classlevels"))}},{key:"getStudentWithPoints",value:function(e){var t=ve.queryString(e);return nt(v("api/asrama/student-points".concat(t)))}},{key:"getCategories",value:function(){return nt(v("api/admin/asrama/rule-categories?order=name"))}}]),e}())||jt,Wt=function(e){var t=e.date,a=e.disableDay;return r.a.createElement(r.a.Fragment,null,!0!==a&&r.a.createElement("select",{"data-type":"number",className:"form-control-sm",name:"day",value:t.getDate(),onChange:e.onChange},function(){for(var e=[],t=1;t<=31;t++)e.push(t);return e}().map((function(e){return r.a.createElement("option",{key:"td-".concat(e),value:e},0==e?"day":e)}))),r.a.createElement("select",{"data-type":"number",className:"form-control-sm",name:"month",value:t.getMonth(),onChange:e.onChange},de.map((function(e,t){return r.a.createElement("option",{key:"tm-".concat(t),value:t},e)}))),r.a.createElement("input",{name:"year",placeholder:"year",className:"form-control-sm",value:t.getFullYear(),onChange:e.onChange}))},Jt=function e(){Object(p.a)(this,e),this.items=[],this.classes=[],this.totalData=0,this.filter=new ve,this.loading=!1},Gt=new Date,Vt={"classLevel.id=":"",with_point_record:"false","time>=d":he(new Date(Gt.getFullYear(),0,1)),"time<=d":he(Gt)},Qt=(Ct=Object(Ae.resolve)(Ht),wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=new Jt,Object(i.a)(n,"studentService",kt,Object(c.a)(n)),n.itemsLoaded=function(e){n.setState({items:e.result.items,totalData:e.result.totalData})},n.classesLoaded=function(e){n.setState({classes:e.result},n.loadItems)},n.loadItems=function(){n.commonAjax(n.studentService.getStudentWithPoints,n.itemsLoaded,n.showCommonErrorAlert,n.state.filter)},n.loadAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadItems)},n.loadClasses=function(){n.commonAjax(n.studentService.getClasses,n.classesLoaded,n.showCommonErrorAlert)},n.updatePeriodFilter=function(e,t){var a=n.state.filter;ve.updatePeriodFilter(a,e,t),n.setState({filter:a})},n.updateFieldFilter=function(e){var t=n.state.filter;t.fieldsFilter[e.target.name]=e.target.value,n.setState({filter:t})},n.updateSelectedClass=function(e){var t=e.target,a=n.state.filter;a.fieldsFilter||(a.fieldsFilter={}),a.fieldsFilter["classLevel.id="]=t.value,n.setState({filter:a})},n.inputPage=function(e,t){switch(e){case"pointrecord":n.inputPoint(t)}},n.inputPoint=function(e){n.props.history.push({pathname:"/asrama/inputpoint",state:{student:e}})},n.updateWithPointRecord=function(e){var t=n.state.filter;t.fieldsFilter.with_point_record="".concat(e),n.setState({filter:t})},n.updateFilter=function(e){var t,a=n.state.filter,r=e.target;r.value&&""!=r.value&&(t="number"==r.type||r.dataset&&"number"==r.dataset.type?parseInt(r.value):r.value,a[r.name]=t,n.setState({filter:a}))},n.onSubmit=function(e){e.preventDefault(),n.loadAtPage(0)},n.state.filter.limit=10,n.state.filter.orderBy="student.user.fullName",n.state.filter.fieldsFilter=Vt,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.loadClasses()}))}},{key:"render",value:function(){var e,t,a,n,o,l,i,s=this,c=this.state,u=c.filter,m=c.classes,d=c.loading,p=c.totalData,f=u.fieldsFilter,h=null!==(e=f["classLevel.id="])&&void 0!==e?e:"",b=f.with_point_record==="".concat(!0);return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Siswa"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(we,{label:"Cari"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"student.user.fullName",placeholder:"Nama",className:"form-control-sm",value:null!==(t=f["student.user.fullName"])&&void 0!==t?t:"",onChange:this.updateFieldFilter}),r.a.createElement("select",{value:h,onChange:this.updateFieldFilter,className:"form-control-sm",name:"classLevel.id="},[{id:0,level:"Semua Kelas"}].concat(Object(xt.a)(m)).map((function(e){return r.a.createElement("option",{key:"class_".concat(e.id),value:e.id},e.level,e.letter," - ",e.schoolName)}))))),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{name:"limit",type:"number",className:"form-control-sm",value:null!==(a=u.limit)&&void 0!==a?a:5,onChange:this.updateFilter})),r.a.createElement(we,{label:"Periode"},r.a.createElement(ct,{active:b,yesLabel:"tampilkan poin",noLabel:"tanpa poin",onClick:this.updateWithPointRecord}),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-group"},r.a.createElement(Wt,{date:new Date(f["time>=d"]),onChange:function(e){return s.updatePeriodFilter(e,"time>=d")}})),r.a.createElement("div",{className:"input-group"},r.a.createElement(Wt,{date:new Date(f["time<=d"]),onChange:function(e){return s.updatePeriodFilter(e,"time<=d")}})))),b&&r.a.createElement(we,null,new Date(f["time>=d"]).toDateString()," - ",new Date(f["time<=d"]).toDateString()),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-sm",value:"Submit"}))),r.a.createElement("p",null),r.a.createElement(Re,{onClick:this.loadAtPage,activePage:null!==(n=u.page)&&void 0!==n?n:0,limit:null!==(o=u.limit)&&void 0!==o?o:10,totalData:p}),r.a.createElement($t,{showPointRecord:b,loading:d,inputPage:this.inputPage,startingNumber:(null!==(l=u.page)&&void 0!==l?l:0)*(null!==(i=u.limit)&&void 0!==i?i:10),items:this.state.items}))}}]),a}(I),kt=Object(d.a)(wt.prototype,"studentService",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt),$t=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},e.showPointRecord?me("No","","Name","Kelas","Point"):me("No","","Name","Kelas"),r.a.createElement("tbody",null,e.loading?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5},r.a.createElement(Q,null))):e.items.map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,r.a.createElement("div",{style:{width:"100px"}},r.a.createElement(ot,{className:"btn",onClick:function(a){return e.inputPage("pointrecord",t)},iconClassName:"far fa-edit"}))),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.classLevel,t.classLetter," ",t.schoolName),e.showPointRecord&&r.a.createElement("td",null,t.point))})))))},Xt=Object(h.f)(Object(f.b)(M)(Qt)),Zt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).nis=void 0,e.kelas=void 0,e.user=void 0,e.point=void 0,e.name=void 0,e.classLetter=void 0,e.classLevel=void 0,e.schoolName=void 0,e}return a}(k),ea=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setTime=function(t,a,n){e.time=new Date,e.time.setFullYear(e.year),e.time.setMonth(e.month-1),e.time.setDate(e.day),e.time.setHours(t,a,n)},e.dateString=function(){return"".concat(e.year,"-").concat(B(e.month),"-").concat(B(e.day))},e.location=void 0,e.time=new Date,e.description=void 0,e.classMemberId=void 0,e.rulePointId=void 0,e.ruleCategoryId=void 0,e.student=void 0,e.dropped=void 0,e.ruleCategoryName=void 0,e.ruleName=void 0,e.studentName=void 0,e.schoolName=void 0,e.classLevel=void 0,e.classLetter=void 0,e.point=void 0,e.droppable=void 0,e.getPicture=function(){return e.id?v("api/public/asrama/broken-rule-img/".concat(e.id)):void 0},e.getDate=function(){return be(e.dateString())},e.getTimestamp=function(){var t=e.getDate();return Sa[t.getDay()]+", "+[B(t.getDate()),B(t.getMonth()+1),t.getFullYear()].join("/")+" "+e.time},e}return Object(s.a)(a,[{key:"timeString",get:function(){return"".concat(this.time.getHours(),":").concat(this.time.getMinutes(),":").concat(this.time.getSeconds())}},{key:"day",get:function(){return this.time.getDate()},set:function(e){this.time.setDate(e)}},{key:"month",get:function(){return this.time.getMonth()+1},set:function(e){this.time.setMonth(e-1)}},{key:"year",get:function(){return this.time.getFullYear()},set:function(e){this.time.setFullYear(e)}}]),a}(k);ea.clone=function(e){return(e=Object.assign(new ea,e)).time=new Date(e.time),e};var ta,aa,na,ra,oa,la,ia,sa,ca,ua,ma,da,pa,fa,ha,ba,va,ga,Ea,ya,Na,Sa=["Ahad","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],Oa=function e(){Object(p.a)(this,e),this.hour=(new Date).getHours(),this.minute=(new Date).getMinutes(),this.second=(new Date).getSeconds()},ja=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],Ca=function(){for(var e=[],t=1;t<60;t++)e.push(t);return e},wa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=new Oa,n.minutes=void 0,n.seconds=void 0,n.updateFromProps=function(){try{var e=n.props.value.split(":");n.setState({hour:parseInt(e[0]),minute:parseInt(e[1]),second:parseInt(e[2])})}catch(t){}},n.updateValue=function(e){var t=e.target,a=t.name;n.setState(Object(w.a)({},a,t.value),n.onChange)},n.setNow=function(){var e=new Date;n.setState({hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},n.onChange)},n.onChange=function(){n.props.onChange(n.state.hour,n.state.minute,n.state.second)},n.minutes=Ca(),n.seconds=Ca(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.updateFromProps()}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-control bg-light"},r.a.createElement("select",{name:"hour",style:{border:"none"},value:this.state.hour,onChange:this.updateValue},ja.map((function(e){return r.a.createElement("option",{key:"HOUR-"+e,value:e},B(e))}))),r.a.createElement("select",{name:"minute",style:{border:"none"},value:this.state.minute,onChange:this.updateValue},this.minutes.map((function(e){return r.a.createElement("option",{key:"MIN-"+e,value:e},B(e))}))),r.a.createElement("select",{name:"second",style:{border:"none"},value:this.state.second,onChange:this.updateValue},this.seconds.map((function(e){return r.a.createElement("option",{key:"SEC-"+e,value:e},B(e))}))),r.a.createElement("a",{style:{marginLeft:5},onClick:this.setNow},r.a.createElement("i",{className:"fas fa-history"})))}}]),a}(n.Component),ka=function e(){Object(p.a)(this,e),this.pointRecord=new ea},Ra=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!0)).state=new ka,n.onSubmit=function(e){e.preventDefault(),n.showConfirmation("Submit Data?").then((function(e){e&&n.props.submit(n.state.pointRecord)}))},n.updatePointRecord=function(e){var t=e.target,a=n.state.pointRecord;a[t.name]=t.value,n.setState({pointRecord:a})},n.updateDate=function(e){var t=be(e.target.value),a=n.state.pointRecord;a.time=t,n.setState({pointRecord:a})},n.updateTime=function(e,t,a){var r=n.state.pointRecord;r.setTime(e,t,a),n.setState({pointRecord:r})},n.setAttachment=function(e){var t=e.target;ne(t).then((function(e){n.props.setAttachment(e)}))},n.removeAttachment=function(){n.props.removeAttachment()},n.getAttachment=function(){return n.props.attachmentInfo},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this.rulePoint,n=this.state.pointRecord,o=this.getAttachment();return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(we,{label:"Category"},r.a.createElement("span",null,a.ruleCategoryName," - ",a.name),r.a.createElement("span",{className:"badge badge-dark"},a.point)),r.a.createElement(we,{label:"Date"},r.a.createElement("input",{type:"date",className:"form-control",onChange:this.updateDate,name:"date",value:n.dateString()})),r.a.createElement(we,{label:"Time"},r.a.createElement(wa,{onChange:this.updateTime,value:n.timeString})),r.a.createElement(we,{label:"Location"},r.a.createElement("input",{className:"form-control",onChange:this.updatePointRecord,name:"location",value:null!==(e=n.location)&&void 0!==e?e:""})),r.a.createElement(we,{label:"Picture"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"border border-dark mr-2",src:o.url,width:100,height:100}),r.a.createElement(ot,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:this.removeAttachment})):r.a.createElement("input",{type:"file",accept:"image/*",className:"form-control",onChange:this.setAttachment,name:"attachment"})),r.a.createElement(we,{label:"Description"},r.a.createElement("textarea",{value:null!==(t=n.description)&&void 0!==t?t:"",onChange:this.updatePointRecord,name:"description",className:"form-control"})),r.a.createElement(ot,{className:"btn btn-secondary float-left",iconClassName:"fas fa-arrow-left",onClick:this.props.onBack},"Back"),r.a.createElement("button",{className:"btn btn-success float-right"},"Submit"))}},{key:"rulePoint",get:function(){return this.props.rulePoint}}]),a}(I),Aa=Object(h.f)(Object(f.b)(M)(Ra)),Pa=function(e){var t;return 0==e.show?null:r.a.createElement("div",{style:e.style,className:"alert alert-danger"},null!==(t=e.children)&&void 0!==t?t:"Error Occured")},Da=function e(){Object(p.a)(this,e),this.rulePoints=[],this.loading=!1},La=(ta=Object(Ae.resolve)(dt),aa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),n=t.call(this,e,!0),Object(i.a)(n,"masterDataService",na,Object(c.a)(n)),n.state=new Da,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.rulePointsLoaded=function(e){n.setState({rulePoints:e.result.items},(function(){n.state.rulePoints.length>0&&(n.props.rulePoint||n.setRulePoint(n.state.rulePoints[0]))}))},n.loadRulePoints=function(){if(null!=n.getCategory()){var e={filter:{limit:0,fieldsFilter:{"category.id=":n.getCategory().id}},modelName:"rule-points"};n.commonAjax(n.masterDataService.list,n.rulePointsLoaded,n.showCommonErrorAlert,e,"asrama")}},n.getCategory=function(){return n.props.category},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit()},n.setRulePoint=function(e){n.props.setRulePoint(e)},n.updateRulePoint=function(e){var t=e.target,a=n.state.rulePoints.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));0!=a.length&&n.setRulePoint(a[0])},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ut.a)(Object(mt.a)(a.prototype),"componentDidMount",this).call(this),this.loadRulePoints()}},{key:"render",value:function(){var e,t=this.getCategory(),a=this.state,n=a.rulePoints,o=a.loading;return null==t?r.a.createElement(Pa,null,"Category not found"):o?r.a.createElement(Q,null):0==n.length?r.a.createElement(Pa,null,"Rule Points for ",t.name," not found"):r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(we,{label:"Category",children:t.name}),r.a.createElement(we,{label:"Name"},r.a.createElement("select",{className:"form-control",onChange:this.updateRulePoint,value:this.props.rulePoint?this.props.rulePoint.id:null},n.map((function(e){return r.a.createElement("option",{key:"select-rulePoint-".concat(e.id),value:e.id},e.name)})))),r.a.createElement(we,{label:"Point",children:null===(e=this.props.rulePoint)||void 0===e?void 0:e.point}),r.a.createElement("hr",null),r.a.createElement(ot,{className:"btn btn-secondary float-left",iconClassName:"fas fa-arrow-left",onClick:this.props.onBack},"Back"),r.a.createElement(ot,{className:"btn btn-info float-right",iconClassName:"fas fa-arrow-right",onClick:this.onSubmit},"Next"))}}]),a}(I),na=Object(d.a)(aa.prototype,"masterDataService",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aa),Ia=Object(h.f)(Object(f.b)(M)(La)),Ma=function e(){Object(p.a)(this,e),this.categories=[],this.loading=!1,this.categoriesLoaded=!1},Fa=(ra=Object(Ae.resolve)(dt),oa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!0)).state=new Ma,Object(i.a)(n,"masterDataService",la,Object(c.a)(n)),n.categoriesLoaded=function(e){n.setState({categories:e.result.items,categoriesLoaded:!0},(function(){n.state.categories.length>0&&(n.props.category||n.setCategory(n.state.categories[0]))}))},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.setCategory=function(e){n.props.setSelectedCategory(e)},n.loadCategories=function(){var e={filter:ve.withLimit(0),modelName:"rule-categories"};n.commonAjax(n.masterDataService.list,n.categoriesLoaded,n.showCommonErrorAlert,e,"asrama")},n.onSubmit=function(){n.props.onSubmit()},n.updateCategory=function(e){var t=e.target,a=n.state.categories.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));0!=a.length&&n.setCategory(a[0])},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ut.a)(Object(mt.a)(a.prototype),"componentDidMount",this).call(this),this.loadCategories()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.categories,o=a.loading,l=this.props.category;return o?r.a.createElement(Q,null):0==n.length?r.a.createElement(Pa,null,"Categories not found"):r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.onSubmit()}},r.a.createElement(we,{label:"Category"},r.a.createElement("select",{className:"form-control",onChange:this.updateCategory,value:l&&null!==(e=l.id)&&void 0!==e?e:""},n.map((function(e){return r.a.createElement("option",{key:"select-cat-".concat(e.id),value:e.id},e.name)})))),r.a.createElement("hr",null),r.a.createElement(ot,{className:"btn btn-secondary float-left",iconClassName:"fas fa-arrow-left",onClick:this.props.onBack},"Back"),r.a.createElement(ot,{className:"btn btn-info float-right",iconClassName:"fas fa-arrow-right",onClick:this.onSubmit},"Next"))}}]),a}(I),la=Object(d.a)(oa.prototype,"masterDataService",[ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oa),_a=Object(h.f)(Object(f.b)(M)(Fa)),Ua=function e(){Object(p.a)(this,e),this.student=void 0,this.category=void 0,this.rulePoint=void 0,this.formStep=0,this.savedRecord=void 0,this.attachmentInfo=void 0},xa=(ia=Object(Ae.resolve)(Ht),sa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Input Point Record",!0)).state=new Ua,Object(i.a)(n,"studentService",ca,Object(c.a)(n)),n.totalStep=4,n.validateStudentData=function(){if(n.props.location.state){var e=n.props.location.state.student;e&&n.setState({student:Object.assign(new Zt,e)})}},n.setAttachment=function(e){n.setState({attachmentInfo:e})},n.removeStudent=function(){n.setState({formStep:0},(function(){E((function(){n.setState({student:void 0})}),500)}))},n.removeAttachment=function(){n.setAttachment(void 0)},n.setCategory=function(e){n.setState({category:e})},n.setRulePoint=function(e){n.setState({rulePoint:e})},n.nextStep=function(e){n.setState({formStep:e})},n.submitRecord=function(e){var t,a;n.state.student&&n.state.rulePoint?(e.classMemberId=null===(t=n.state.student)||void 0===t?void 0:t.id,e.rulePointId=null===(a=n.state.rulePoint)||void 0===a?void 0:a.id,n.commonAjax(n.studentService.insertPointRecord,n.recordSubmitted,n.showCommonErrorAlert,e,n.state.attachmentInfo)):alert("ERROR: student or rulePoint missing!")},n.recordSubmitted=function(e){n.setState({savedRecord:e.result,formStep:4},n.scrollTop)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(ut.a)(Object(mt.a)(a.prototype),"componentDidMount",this).call(this),this.validateStudentData(),this.scrollTop(),E((function(){e.nextStep(1)}),200)}},{key:"render",value:function(){var e=this,t=this.state.student;return t?r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Form Input Pelanggaran"),r.a.createElement(Pt,{title:t.name+" - "+t.classLevel+t.classLetter+" "+t.schoolName},r.a.createElement(Ta,{step:this.state.formStep,totalStep:this.totalStep}),1==this.state.formStep&&r.a.createElement(_a,{category:this.state.category,onBack:this.removeStudent,setSelectedCategory:this.setCategory,onSubmit:function(){e.nextStep(2)}}),2==this.state.formStep&&this.state.category&&r.a.createElement(Ia,{rulePoint:this.state.rulePoint,setRulePoint:this.setRulePoint,category:this.state.category,onBack:function(){return e.nextStep(1)},onSubmit:function(){e.nextStep(3)}}),3==this.state.formStep&&this.state.category&&this.state.rulePoint&&r.a.createElement(Aa,{submit:this.submitRecord,attachmentInfo:this.state.attachmentInfo,setAttachment:this.setAttachment,removeAttachment:this.removeAttachment,rulePoint:this.state.rulePoint,onBack:function(){return e.nextStep(2)}}),4==this.state.formStep&&this.state.savedRecord&&r.a.createElement(qa,{back:function(){return e.setState({student:void 0})},record:this.state.savedRecord}))):r.a.createElement(Ba,null)}}]),a}(re),ca=Object(d.a)(sa.prototype,"studentService",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sa),Ta=function(e){return r.a.createElement("div",{className:"progress",style:{height:"5px",marginBottom:15}},r.a.createElement("div",{className:"bg-info",style:{transitionDuration:"500ms",width:e.step/e.totalStep*100+"%"}}))},qa=function(e){var t,a=ea.clone(e.record);a.getDate();return r.a.createElement("div",null,r.a.createElement("h4",{className:"text-center text-success"},r.a.createElement("i",{className:"fas fa-check",style:{marginRight:5}}),"Record saved"),r.a.createElement("p",null),r.a.createElement(we,{label:"Date"},new Date(a.time).toLocaleString()),r.a.createElement(we,{label:"Category"},a.ruleCategoryName),r.a.createElement(we,{label:"Name"},a.ruleName),r.a.createElement(we,{label:"Point"},a.point),r.a.createElement(we,{label:"Location"},a.location),a.getPicture()&&r.a.createElement(we,{label:"Picture"},r.a.createElement("img",{src:null!==(t=a.getPicture())&&void 0!==t?t:"",width:200,height:200})),r.a.createElement("hr",null),r.a.createElement(we,null,r.a.createElement("a",{onClick:e.back,className:"btn btn-dark"},"Ok")))},Ba=function(){return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Form Input Pelanggaran"),r.a.createElement(Pa,null,r.a.createElement("i",{className:"fas fa-exclamation-circle mr-2"}),r.a.createElement("span",null,"Please select student"),r.a.createElement("hr",null),r.a.createElement(ot,{to:"/asrama/studentlist",iconClassName:"fas fa-list"},"Student List")))},Ya=Object(h.f)(Object(f.b)(M)(xa)),Ka=function(e){return r.a.createElement("div",Object.assign({},e.attributes,{className:"card "+e.className}),e.title&&r.a.createElement("div",{className:"card-header"},e.title),r.a.createElement("div",{className:"card-body"},e.children),void 0!=e.footerContent&&r.a.createElement("div",{className:"card-footer"},e.footerContent))},za=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e={top:0,behavior:"smooth"};E((function(){window.scrollTo(e)}),100)}},{key:"render",value:function(){var e,t,a=ea.clone(this.props.record),n=a.getPicture(),o=new Date(a.time).toString();return r.a.createElement(Ka,{title:"Detail Pelanggaran",footerContent:r.a.createElement(ot,{className:"btn btn-dark",onClick:this.props.close},"Ok")},r.a.createElement(we,{label:"Nama"},a.studentName," - ",a.classLevel,a.classLetter," ",a.schoolName),r.a.createElement(we,{label:"Pelanggaran"},r.a.createElement("strong",null,a.ruleCategoryName)," - ",a.ruleName," ",r.a.createElement("span",{className:"badge badge-dark"},a.point)),r.a.createElement(we,{label:"Waktu",children:o}),r.a.createElement(we,{label:"Lokasi",children:null!==(e=a.location)&&void 0!==e?e:"-"}),r.a.createElement(we,{label:"Deskripsi",children:null!==(t=a.description)&&void 0!==t?t:"-"}),r.a.createElement(we,{label:"Diputihkan",children:a.dropped?new Date(a.dropped).toString():"-"}),r.a.createElement(we,{label:"Gambar"},n?r.a.createElement("img",{src:n,width:200,height:200,className:"border border-dark"}):null))}}]),a}(n.Component),Ha=function e(){Object(p.a)(this,e),this.loading=!1},Wa=(ua=Object(Ae.resolve)(Ht),ma=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),n=t.call(this,e,!0),Object(i.a)(n,"studentService",da,Object(c.a)(n)),n.state=new Ha,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.getRecord=function(){return n.props.record},n.setDropped=function(e){var t=n.getRecord();n.commonAjax(n.studentService.setPointDropped,n.props.onUpdated,n.showCommonErrorAlert,t.id,e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getRecord();return this.state.loading?r.a.createElement("button",{className:"btn btn-info btn-sm"},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):t.dropped?r.a.createElement(ot,{onClick:function(t){return e.setDropped(!1)},className:"btn btn-secondary btn-sm",iconClassName:"fas fa-arrow-up"},"Reset"):r.a.createElement(ot,{onClick:function(t){return e.setDropped(!0)},className:"btn btn-success btn-sm",iconClassName:"fas fa-arrow-down"},"Putihkan")}}]),a}(I),da=Object(d.a)(ma.prototype,"studentService",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma),Ja=Object(h.f)(Object(f.b)(M)(Wa)),Ga=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0,this.record=void 0,this.loading=!1,this.categories=[],this.classes=[],this.selectedCategory=void 0,this.showFilterDetail=!1},Va=new Date,Qa={"classMember.student.user.fullName":"",dropped:"","classMember.classLevel.id=":"","rulePoint.name":"","rulePoint.category.name":"",location:"","time>=d":he(new Date(Va.getFullYear(),0,1)),"time<=d":he(Va)},$a=(pa=Object(Ae.resolve)(Ht),fa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e,"broken-rules","asrama",!1)).state=new Ga,Object(i.a)(n,"studentService",ha,Object(c.a)(n)),n.loadClasses=function(){n.commonAjax(n.studentService.getClasses,n.classessLoaded,console.error)},n.loadCategories=function(){n.commonAjax(n.studentService.getCategories,n.categoriesLoaded,console.error)},n.categoriesLoaded=function(e){return n.setState({categories:e.result.items})},n.classessLoaded=function(e){return n.setState({classes:e.result})},n.setSelectedCategory=function(e){var t,a=n.state.filter;e.id&&""!==(null===(t=e.id)||void 0===t?void 0:t.toString())||(a.fieldsFilter["rulePoint.name"]=""),n.setState({filter:a,selectedCategory:e})},n.showDetail=function(e){return n.setState({record:e})},n.hideDetail=function(){return n.setState({record:void 0},n.scrollTop)},n.showFilterDetail=function(){return n.setState({showFilterDetail:!0})},n.hideFilterDetail=function(){return n.setState({showFilterDetail:!1})},n.openEditPage=function(e){n.props.history.push({pathname:"/asrama/pointrecordedit",state:{record:e}})},n.resetFilter=function(){var e=n.state.filter;n.setState({filter:ve.resetFieldsFilter(e)})},n.followUp=function(e){n.commonAjax(n.studentService.followUp,n.showCommonSuccessAlert,n.showCommonErrorAlert,e.id)},n.dropAll=function(e){n.showConfirmation("Putihkan "+n.state.items.length+" data?").then((function(e){e&&n.commonAjax(n.studentService.dropAll,n.reload,n.showCommonErrorAlert,n.itemsId)}))},n.undropAll=function(e){n.showConfirmation("Reset pemutihan "+n.state.items.length+" data?").then((function(e){e&&n.commonAjax(n.studentService.undropAll,n.reload,n.showCommonErrorAlert,n.itemsId)}))},n.updatePeriodFilter=function(e,t){var a=n.state.filter;ve.updatePeriodFilter(a,e,t),n.setState({filter:a})},n.updateDroppedOption=function(e){var t=n.state.filter,a=t.fieldsFilter;for(var r in a)r.startsWith("dropped")&&delete a[r];var o=e.target.value.split(":");"dropped"!==o[0]&&(a[o[0]]="Dummy",n.setState({filter:t}))};var r=new ve;return r.limit=10,r.fieldsFilter=Qa,r.orderBy="time",r.orderType="desc",n.state.filter=r,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(ut.a)(Object(mt.a)(a.prototype),"componentDidMount",this).call(this),this.loadCategories(),this.loadClasses()}},{key:"render",value:function(){var e,t,a,n,o,l,i,s=this,c=this.state,u=c.filter,m=c.record,d=u.fieldsFilter,p="Rekap Pelanggaran";if(m)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,p),r.a.createElement(za,{record:m,close:this.hideDetail}));var f=u.fieldsFilter["classMember.classLevel.id="]?u.fieldsFilter["classMember.classLevel.id="]:"";return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,p),r.a.createElement("hr",null),r.a.createElement("form",{className:"form-filter",onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{autoComplete:"off",name:"classMember.student.user.fullName",placeholder:"Nama siswa",className:"form-control-sm",value:null!==(e=d["classMember.student.user.fullName"])&&void 0!==e?e:"",onChange:this.updateFieldsFilter}),r.a.createElement("select",{autoComplete:"off",value:f,onChange:this.updateFieldsFilter,className:"form-control-sm",name:"classMember.classLevel.id="},[{id:0,level:"Semua Kelas"}].concat(Object(xt.a)(this.state.classes)).map((function(e){return r.a.createElement("option",{key:"class_".concat(e.id),value:e.id},e.level,e.letter," - ",e.schoolName)}))))),this.state.showFilterDetail?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-sticky bg-white border border-gray pt-3 pb-3 pl-3 pr-3"},r.a.createElement(we,{label:"Kategori"},r.a.createElement("select",{value:d["rulePoint.category.id="],onChange:this.updateFieldsFilter,className:"form-control-sm",name:"rulePoint.category.id="},[yt.clone({id:"",name:"Semua"})].concat(Object(xt.a)(this.state.categories)).map((function(e){return r.a.createElement("option",{onClick:function(){return s.setSelectedCategory(e)},key:"cat_".concat(e.id),value:e.id},e.name)})))),this.state.selectedCategory&&this.state.selectedCategory.points&&r.a.createElement(we,{label:"Pelanggaran"},r.a.createElement("select",{value:d["rulePoint.name"],onChange:this.updateFieldsFilter,className:"form-control-sm",name:"rulePoint.name"},[{id:"",name:"Semua"}].concat(Object(xt.a)(this.state.selectedCategory.points)).map((function(e){return r.a.createElement("option",{key:"rp_".concat(e.id),value:""==e.id?e.id:e.name},e.name)})))),r.a.createElement(we,{label:"Periode"},r.a.createElement("div",{className:"input-group"},r.a.createElement(Wt,{date:new Date(d["time>=d"]),onChange:function(e){return s.updatePeriodFilter(e,"time>=d")}})),r.a.createElement("div",{className:"input-group"},r.a.createElement(Wt,{date:new Date(d["time<=d"]),onChange:function(e){return s.updatePeriodFilter(e,"time<=d")}}))),r.a.createElement(we,{label:"Pemutihan"},r.a.createElement("select",{className:"form-control-sm",onChange:this.updateDroppedOption},r.a.createElement("option",{value:"dropped:"},"Semua"),r.a.createElement("option",{value:"dropped=null:"},"Belum"),r.a.createElement("option",{value:"dropped!null:"},"Sudah"))),r.a.createElement(we,{label:"Lokasi"},r.a.createElement("input",{name:"location",placeholder:"Lokasi",className:"form-control-sm",value:null!==(t=d.location)&&void 0!==t?t:"",onChange:this.updateFieldsFilter})),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{type:"number",name:"limit",className:"form-control-sm",value:null!==(a=u.limit)&&void 0!==a?a:5,onChange:this.updateFilter})),r.a.createElement(we,{label:""},r.a.createElement("a",{className:"btn btn-dark btn-sm",onClick:this.hideFilterDetail},"Tutup"),r.a.createElement("input",{className:"ml-3 btn btn-primary btn-sm",type:"submit",value:"Cari"}))),r.a.createElement(we,{label:""},r.a.createElement("a",{className:"btn btn-dark btn-sm",onClick:this.hideFilterDetail},"Tutup Detail Filter"))):r.a.createElement(we,{label:""},r.a.createElement("a",{className:"btn btn-dark btn-sm",onClick:this.showFilterDetail},"Tampil Detail Filter")),r.a.createElement(we,{label:"Periode"},new Date(u.fieldsFilter["time>=d"]).toDateString()," - ",new Date(u.fieldsFilter["time<=d"]).toDateString()),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}),r.a.createElement("a",{className:"btn btn-secondary btn-sm ml-2",onClick:this.resetFilter},"Reset"),r.a.createElement("a",{onClick:this.dropAll,className:"ml-2 btn btn-info btn-sm"},"Putihkan Semua"),r.a.createElement("a",{onClick:this.undropAll,className:"ml-2 btn btn-warning btn-sm"},"Reset Pemutihan Semua"))),r.a.createElement(Re,{activePage:null!==(n=u.page)&&void 0!==n?n:0,limit:null!==(o=u.limit)&&void 0!==o?o:10,totalData:this.state.totalData,onClick:this.loadAtPage}),r.a.createElement(Xa,{isAdmin:this.isAdmin(),startingNumber:(null!==(l=u.page)&&void 0!==l?l:0)*(null!==(i=u.limit)&&void 0!==i?i:10),recordLoadedForDetail:this.showDetail,recordLoadedForEdit:this.openEditPage,recordUpdated:this.loadItems,followUp:this.followUp,items:this.state.items}))}},{key:"itemsId",get:function(){return this.state.items.map((function(e){return e.id}))}}]),a}(pt),ha=Object(d.a)(fa.prototype,"studentService",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa),Xa=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table "},me("No","Siswa","Kelas","Tanggal","Pelanggaran","Poin","Lokasi","Gambar","Pemutihan","Opsi"),r.a.createElement("tbody",null,e.items.map((function(t,a){var n;t=ea.clone(t);var o=e.isAdmin?["detail","delete"]:[t.dropped?null:"edit","detail"];return r.a.createElement("tr",{key:"PointRecord-"+a,className:t.dropped?"alert alert-success":""},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,t.studentName),r.a.createElement("td",null,t.classLevel,t.classLetter," ",t.schoolName),r.a.createElement("td",null,new Date(t.time).toLocaleDateString()),r.a.createElement("td",null,t.ruleCategoryName," (",t.ruleName,")"),r.a.createElement("td",null,t.point),r.a.createElement("td",null,t.location),r.a.createElement("td",null,r.a.createElement("img",{src:null!==(n=t.getPicture())&&void 0!==n?n:"",width:50,height:50})),r.a.createElement("td",null,t.dropped?r.a.createElement("i",{className:"fas fa-check"}):"-"," "),r.a.createElement("td",null,r.a.createElement("div",{style:{width:"max-content"}},t.droppable?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{record:t,onUpdated:e.recordUpdated}),r.a.createElement("p",null)):r.a.createElement("p",null,r.a.createElement("i",null,"Tidak ada pemutihan")),r.a.createElement(Lt,{record:t,types:o,recordLoadedForDetail:e.recordLoadedForDetail,recordLoaded:e.recordLoadedForEdit,recordDeleted:e.recordUpdated,modelName:"broken-rules",menu:"asrama"}))))})))))},Za=Object(h.f)(Object(f.b)(M)($a)),en=function e(){Object(p.a)(this,e),this.studentName=void 0,this.items=[],this.item=void 0},tn=(ba=Object(Ae.resolve)(dt),va=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!0)).state=new en,Object(i.a)(n,"masterDataService",ga,Object(c.a)(n)),n.submit=function(e){e.preventDefault(),n.loadStudent()},n.itemsLoaded=function(e){n.setState({items:e.result.items})},n.loadStudent=function(){var e={modelName:"student",filter:{limit:15,fieldsFilter:{name:n.state.studentName}}};n.commonAjax(n.masterDataService.list,n.itemsLoaded,n.showCommonErrorAlert,e)},n.setSelectedItem=function(e){n.setState({item:e,items:[],studentName:void 0},(function(){n.props.setItem&&n.props.setItem(e)}))},n.reset=function(){n.setState({item:void 0,items:[],studentName:void 0},(function(){n.props.setItem&&n.props.setItem(void 0)}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.items,n=this.state.item;return r.a.createElement("form",{onReset:this.reset,onSubmit:this.submit},r.a.createElement(Ka,{title:"Select Student"},r.a.createElement(we,{label:"Search"},r.a.createElement("input",{placeholder:"Name",value:null!==(e=this.state.studentName)&&void 0!==e?e:"",className:"form-control",onChange:this.handleInputChange,name:"studentName"}),a.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},a.map((function(e){var a;return r.a.createElement("div",{className:"option-item",onClick:function(){t.setSelectedItem(e)},style:{cursor:"pointer"},key:"Student-"+e.id},null===(a=e.user)||void 0===a?void 0:a.fullName)})),r.a.createElement("a",{onClick:this.reset,className:"option-item"},r.a.createElement("i",{className:"fas fa-times mr-2"}),r.a.createElement("span",null,"close"))):null),n?r.a.createElement(an,{item:n}):null,r.a.createElement("hr",null),r.a.createElement("div",{className:"btn-group float-right"},r.a.createElement("input",{type:"submit",className:"btn btn-dark",value:"Search"}),r.a.createElement("input",{type:"reset",className:"btn btn-secondary",value:"Reset"}),r.a.createElement(ot,{to:"/asrama/studentlist",iconClassName:"fas fa-list"},"Student List"))))}}]),a}(I),ga=Object(d.a)(va.prototype,"masterDataService",[ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va),an=function(e){var t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{label:"Name"},null===(t=e.item.user)||void 0===t?void 0:t.fullName),r.a.createElement(we,{label:"Kelas"},e.item.classLevel,e.item.classLetter," ",e.item.schoolName))},nn=Object(h.f)(Object(f.b)(M)(tn)),rn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).day=(new Date).getDate(),e.month=(new Date).getMonth(),e.year=(new Date).getFullYear(),e.temperature_morning=void 0,e.temperature_afternoon=void 0,e.breakfast=void 0,e.lunch=void 0,e.dinner=void 0,e.medicine_consumption=!1,e.genose_test=void 0,e.antigen_test=void 0,e.pcr_test=void 0,e.description=void 0,e.student_id=void 0,e.student=void 0,e}return a}(k);rn.clone=function(e){return Object.assign(new rn,e)},rn.instance=function(e,t,a,n){var r=new rn;return r.day=t,r.month=a,r.year=n,r.student_id=e,r};var on,ln,sn,cn,un,mn,dn,pn,fn,hn,bn,vn,gn,En,yn,Nn,Sn,On,jn,Cn,wn,kn=function e(){Object(p.a)(this,e),this.record=new rn},Rn=(Ea=Object(Ae.resolve)(Ht),ya=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!0)).state=new kn,Object(i.a)(n,"studentService",Na,Object(c.a)(n)),n.reset=function(){var e=n.props;n.setState({record:rn.instance(e.student.id,e.day,e.month,e.year)})},n.setRecord=function(e){n.setState({record:rn.clone(e)})},n.onChange=function(e){var t=n.state.record,a=e.target;t[a.name]="checkbox"==a.type?a.checked:a.value,n.setState({record:rn.clone(t)})},n.recordSubmitted=function(e){n.showInfo("Data has been submitted")},n.onSubmit=function(e){e.preventDefault();var t=n.state.record;t.student_id=n.props.student.id,n.commonAjax(n.studentService.submitMedicalRecord,n.recordSubmitted,n.showCommonErrorAlert,t)},n.state.record=rn.instance(e.student.id,e.day,e.month,e.year),n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,o,l,i,s,c,u,m,d=this.state.record,p=B(d.day)+" "+(m=d.month-1,q[m]);return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("table",{className:"table table-bordered table-striped",style:{fontSize:"0.8em"}},r.a.createElement("tbody",null,r.a.createElement(Pn,null,r.a.createElement("h5",{className:"text-center"}," ",p)),r.a.createElement(Pn,null,r.a.createElement("input",{type:"number",onChange:this.onChange,placeholder:"Suhu Pagi",className:"form-control",name:"temperature_morning",value:null!==(e=d.temperature_morning)&&void 0!==e?e:""})),r.a.createElement(Pn,null,r.a.createElement("input",{type:"number",onChange:this.onChange,placeholder:"Suhu Sore",className:"form-control",name:"temperature_afternoon",value:null!==(t=d.temperature_afternoon)&&void 0!==t?t:""})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Sarapan",onChange:this.onChange,name:"breakfast",checked:null!==(a=d.breakfast)&&void 0!==a&&a})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Makan Siang",onChange:this.onChange,name:"lunch",checked:null!==(n=d.lunch)&&void 0!==n&&n})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Makan Malam",onChange:this.onChange,name:"dinner",checked:null!==(o=d.dinner)&&void 0!==o&&o})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Konsumsi Obat",onChange:this.onChange,name:"medicine_consumption",checked:null!==(l=d.medicine_consumption)&&void 0!==l&&l})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Tes Genose",onChange:this.onChange,name:"genose_test",checked:null!==(i=d.genose_test)&&void 0!==i&&i})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Tes Antigen",onChange:this.onChange,name:"antigen_test",checked:null!==(s=d.antigen_test)&&void 0!==s&&s})),r.a.createElement(Pn,null,r.a.createElement(An,{label:"Tes PCR",onChange:this.onChange,name:"pcr_test",checked:null!==(c=d.pcr_test)&&void 0!==c&&c})),r.a.createElement(Pn,null,r.a.createElement("textarea",{placeholder:"Catatan",onChange:this.onChange,style:{fontSize:"0.9em"},name:"description",value:null!==(u=d.description)&&void 0!==u?u:"",className:"form-control",rows:3})),r.a.createElement(Pn,null,r.a.createElement("button",{className:"btn btn-success",type:"submit"},r.a.createElement("i",{className:"fas fa-save"})," ",p)))))}}]),a}(I),Na=Object(d.a)(ya.prototype,"studentService",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya),An=function(e){return r.a.createElement(r.a.Fragment,null,e.label,r.a.createElement("input",{type:"checkbox",style:{marginRight:5},className:"form-control",onChange:e.onChange,name:e.name,checked:e.checked}))},Pn=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",{className:"text-center",style:{minHeight:40}},e.children)))},Dn=Object(f.b)(M,null,null,{forwardRef:!0})(Rn),Ln=function e(){Object(p.a)(this,e),this.student=void 0,this.month=(new Date).getMonth()+1,this.year=(new Date).getFullYear(),this.mappedItems=new Map},In=(on=Object(Ae.resolve)(Ht),ln=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Medical Record",!0)).state=new Ln,Object(i.a)(n,"studentService",sn,Object(c.a)(n)),n.inputRefs=new Map,n.setStudent=function(e){e&&(e=Object.assign(new Zt,e)),n.setState({student:e},n.loadMonthlyRecord)},n.validateStudentData=function(){var e=n.props.location.state?n.props.location.state.student:void 0;e&&n.setStudent(e)},n.reset=function(){E((function(){n.state.student&&n.inputRefs.forEach((function(e,t){e&&e.reset()}))}),100)},n.recordsLoaded=function(e){var t=n.toMap(e.result.items);n.setState({mappedItems:t},(function(){E((function(){n.inputRefs.forEach((function(e,a){var r,o,l=t.get(a);l?l=rn.clone(l):l=rn.instance(null!==(r=null===(o=n.state.student)||void 0===o?void 0:o.id)&&void 0!==r?r:0,a,n.state.month,n.state.year);e&&e.setRecord(l)}))}),100)}))},n.toMap=function(e){for(var t=new Map,a=0;a<e.length;a++){var n=e[a];t.set(n.day,n)}return t},n.loadMonthlyRecord=function(){var e;n.commonAjax(n.studentService.loadMonthlyMedicalRecord,n.recordsLoaded,n.showCommonErrorAlert,null===(e=n.state.student)||void 0===e?void 0:e.id,n.state.month,n.state.year)},n.getFilter=function(){return new ve},n.dayCount=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear();return t%4==0?pe[e]:fe[e]}(n.state.month,n.state.year)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.validateStudentData()}))}},{key:"render",value:function(){for(var e,t=this,a=this.state.student,n=(this.getFilter(),this.dayCount()),o=[],l=1;l<=n;l++)o.push(l);var i="150px ".repeat(n);return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null," ",a?null===(e=a.user)||void 0===e?void 0:e.fullName:this.title),r.a.createElement("hr",null),r.a.createElement(nn,{setItem:this.setStudent}),r.a.createElement("p",null),a?r.a.createElement(Ka,null,r.a.createElement("div",{className:"input-group"},r.a.createElement(Wt,{date:new Date,disableDay:!0,onChange:this.handleInputChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(ot,{iconClassName:"fas fa-redo",onClick:this.loadMonthlyRecord},"Load Data"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"container-fluid  row"},r.a.createElement("div",{className:"col-12",style:{overflow:"auto"}},r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:i}},o.map((function(e){return r.a.createElement(Dn,{key:"record-input-"+e,student:a,ref:function(a){t.inputRefs.set(e,a)},year:t.state.year,month:t.state.month,day:e})})))))):r.a.createElement(Mn,null))}}]),a}(re),sn=Object(d.a)(ln.prototype,"studentService",[on],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln),Mn=function(){return r.a.createElement(Pa,null,r.a.createElement("i",{className:"fas fa-exclamation-circle mr-2"}),r.a.createElement("span",null,"Please select student"),r.a.createElement("hr",null),r.a.createElement(ot,{to:"/asrama/studentlist",iconClassName:"fas fa-list"},"Student List"))},Fn=Object(h.f)(Object(f.b)(M)(In)),_n=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return r.a.createElement("div",{className:"section-body container-fluid mt-2"},r.a.createElement("h2",null,"About Us"),r.a.createElement(Ka,{title:"Application"},r.a.createElement(we,{label:"Name"},e.appName),r.a.createElement(we,null,r.a.createElement("i",null,e.appDescription)),r.a.createElement(we,{label:"Contact"},e.contact),r.a.createElement(we,{label:"Address"},e.address)),r.a.createElement("p",null),r.a.createElement(Ka,{title:"Development Mode"}),r.a.createElement("p",null))}}]),a}(I),Un=Object(h.f)(Object(f.b)(M)(_n)),xn=(a(83),function e(){Object(p.a)(this,e),this.items=[],this.keyword=""}),Tn=(cn=Object(Ae.resolve)(dt),un=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!0)).state=new xn,Object(i.a)(n,"masterDataService",mn,Object(c.a)(n)),n.itemsLoaded=function(e){n.setState({items:e.result})},n.loadItems=function(e){if(e.preventDefault(),""!=n.state.keyword){var t={filter:new ve,modelName:"classmembers"};t.filter&&(t.filter.fieldsFilter={"student.user.fullName":n.state.keyword}),n.commonAjax(n.masterDataService.list,n.itemsLoaded,n.showCommonErrorAlert,t,"school-data")}},n.select=function(e){console.log("select",e),n.props.selectItem(e),n.setState({items:[],keyword:""})},n.reset=function(){return n.setState({items:[]})},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{id:"form-search-student",onSubmit:this.loadItems},r.a.createElement("div",{className:"mb-3",style:{position:"absolute"}},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"keyword",className:"form-control",onChange:this.handleInputChange,value:this.state.keyword,placeholder:"Cari Nama"}),r.a.createElement("input",{type:"submit",value:"Cari",className:"btn btn-secondary"})),this.state.items.length>0?r.a.createElement("div",{className:"bg-light border rounded border-secondary",style:{position:"relative",zIndex:10,padding:3}},this.state.items.map((function(t){return r.a.createElement("div",{onClick:function(){return e.select(t)},className:"option-item",key:"s_form_".concat(t.id)},t.name," ",t.classLevel,t.classLetter," ",t.schoolName)})),r.a.createElement(ot,{iconClassName:"fas fa-times",className:"btn btn-dark w-100",onClick:this.reset},"Tutup")):null))}}]),a}(I),mn=Object(d.a)(un.prototype,"masterDataService",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un),qn=Object(h.f)(Object(f.b)(M)(Tn)),Bn=function e(){Object(p.a)(this,e),this.record=new ea,this.categories=[],this.pointsMap={},this.selectedCategoryId=0,this.selectedPointId=0,this.attachment=void 0,this.editMode=!1,this.editModeRemoveImage=!1},Yn=(dn=Object(Ae.resolve)(Ht),pn=Object(Ae.resolve)(dt),fn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Edit Pelanggaran",!0)).state=new Bn,Object(i.a)(n,"studentService",hn,Object(c.a)(n)),Object(i.a)(n,"masterDataService",bn,Object(c.a)(n)),n.inputTimeRef=r.a.createRef(),n.categoriesLoaded=function(e){n.setState({categories:e.result.items})},n.loadCategories=function(){n.commonAjax(n.studentService.getCategories,n.categoriesLoaded,n.showCommonErrorAlert)},n.rulePointsLoaded=function(e,t){var a=n.state.pointsMap;a[e.toString()]=t.result.items,n.setState({pointsMap:a})},n.loadRulePoints=function(e){if(""!==e&&void 0==n.state.pointsMap[e]){var t={filter:{limit:0,fieldsFilter:{"category.id=":e},orderBy:"name"},modelName:"rule-points"};n.commonAjax(n.masterDataService.list,(function(t){return n.rulePointsLoaded(e,t)}),n.showCommonErrorAlert,t,"asrama")}},n.checkPassedData=function(){if(n.props.location&&n.props.location.state){var e,t,a=ea.clone(n.props.location.state.record);n.setState({editMode:!0,record:a,selectedCategoryId:a.ruleCategoryId,attachment:n.props.location.state.attachment},n.updateInput),n.loadRulePoints(null!==(e=null===(t=a.ruleCategoryId)||void 0===t?void 0:t.toString())&&void 0!==e?e:"")}},n.updateInput=function(){n.inputTimeRef.current&&n.inputTimeRef.current.updateFromProps()},n.updateRecordField=function(e){var t=n.state.record,a=e.target,r=a.name,o=a.value;t[r]=o,n.setState({record:t})},n.setSelectedRulePoint=function(e){var t=n.state,a=t.record,r=t.selectedCategoryId;a.rulePointId=e.id,a.point=e.point,a.ruleName=e.name,a.ruleCategoryId=r,n.setState({record:a})},n.updateTime=function(e,t,a){var r=n.state.record;r.setTime(e,t,a),n.setState({record:r})},n.updateDate=function(e){var t=be(e.target.value),a=n.state.record;a.time=t,n.setState({record:a})},n.submit=function(){var e=n.state,t=e.editMode,a=e.editModeRemoveImage;t?n.commonAjax(n.studentService.updatePointRecord,n.recordSubmitted,n.showCommonErrorAlert,n.state.record,n.state.attachment,a):n.commonAjax(n.studentService.insertPointRecord,n.recordSubmitted,n.showCommonErrorAlert,n.state.record,n.state.attachment)},n.recordSubmitted=function(e){n.setState({record:new ea,attachment:void 0,selectedCategoryId:void 0},(function(){n.showInfo("Data berhasil disimpan"),n.scrollTop()}))},n.validateInput=function(){var e=n.state.record,t=e.classMemberId,a=e.rulePointId;return t&&a},n.onSubmit=function(e){e.preventDefault(),n.validateInput()?n.showConfirmation("Simpan data?").then((function(e){e&&n.submit()})):n.showError("Input tidak lengkap")},n.onRemoveImageOptionChanged=function(e){n.setState({editModeRemoveImage:e.target.checked})},n.removeImage=function(){n.showConfirmationDanger("Hapus gambar?").then((function(e){if(e){var t=n.state.record;n.setState({record:t,attachment:void 0})}}))},n.updatePicture=function(e){ne(e.target).then((function(e){n.setState({attachment:e})})).catch(console.error)},n.setStudent=function(e){var t=n.state.record;t.studentName=e.name,t.classMemberId=e.id,t.classLetter=e.classLetter,t.classLevel=e.classLevel,t.schoolName=e.schoolName,n.setState({record:t})},n.updateCategory=function(e){n.handleInputChange(e),n.loadRulePoints(e.target.value)},n.updateRulePoint=function(e){var t=n.state,a=t.selectedCategoryId,r=t.pointsMap;if(a){var o=r[a].filter((function(t){var a;return(null===(a=t.id)||void 0===a?void 0:a.toString())==e.target.value}));0!=o.length&&n.setSelectedRulePoint(o[0])}},n}return Object(s.a)(a,[{key:"componentReady",value:function(){this.checkPassedData(),this.loadCategories()}},{key:"render",value:function(){var e,t,a,n,o=this.state,l=o.editMode,i=o.editModeRemoveImage,s=o.record,c=o.selectedCategoryId,u=o.pointsMap,m=o.attachment,d=m?m.url:s.getPicture();return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Form Input Pelanggaran"),r.a.createElement("hr",null),r.a.createElement(we,{label:"Siswa"},r.a.createElement(qn,{selectItem:this.setStudent})),s.classMemberId&&r.a.createElement(we,null,r.a.createElement("div",null,s.studentName," ",s.classLevel,s.classLetter," ",s.schoolName)),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(we,{label:"Pelanggaran"},r.a.createElement("p",null,null!==(e=s.ruleName)&&void 0!==e?e:"-"," ",null!==(t=s.point)&&void 0!==t?t:""),r.a.createElement("p",null),r.a.createElement("select",{value:c,name:"selectedCategoryId",onChange:this.updateCategory,className:"form-control"},r.a.createElement("option",{value:""},"Pilih Kategori"),this.state.categories.map((function(e){return r.a.createElement("option",{key:"cat_ed_opt_".concat(e.id),value:e.id},e.name)}))),r.a.createElement("p",null),r.a.createElement("select",{value:s.rulePointId,className:"form-control",onChange:this.updateRulePoint},r.a.createElement("option",{value:""},"Pilih Pelanggaran"),c&&u[c]&&u[c].map((function(e){return r.a.createElement("option",{key:"rp_ed_opt_".concat(e.id),value:e.id},e.name," (",e.point,")")})))),r.a.createElement(we,{label:"Tanggal"},r.a.createElement("input",{type:"date",className:"form-control",onChange:this.updateDate,name:"date",value:s.dateString()})),r.a.createElement(we,{label:"Waktu"},r.a.createElement(wa,{ref:this.inputTimeRef,onChange:this.updateTime,value:s.timeString})),r.a.createElement(we,{label:"Lokasi"},r.a.createElement("input",{type:"text",name:"location",onChange:this.updateRecordField,className:"form-control",value:null!==(a=s.location)&&void 0!==a?a:""})),r.a.createElement(we,{label:"Deskripsi"},r.a.createElement("textarea",{className:"form-control",name:"description",onChange:this.updateRecordField,value:null!==(n=s.description)&&void 0!==n?n:""})),r.a.createElement(we,{label:"Gambar"},r.a.createElement("div",null,r.a.createElement("img",{src:null!==d&&void 0!==d?d:"",width:200,height:200,className:"border border-dark mb-2"})),m&&r.a.createElement(ot,{className:"btn btn-danger btn-sm",onClick:this.removeImage,iconClassName:"fas fa-times"},"Hapus Gambar"),r.a.createElement("div",null,r.a.createElement("input",{onChange:this.updatePicture,type:"file",accept:"image/*",className:"form-control"}))),l&&r.a.createElement(we,{label:"Hapus Gambar"},r.a.createElement("input",{id:"remove-img-check",type:"checkbox",checked:i,onChange:this.onRemoveImageOptionChanged}),r.a.createElement("label",{htmlFor:"remove-img-check",className:"ml-2"},"Hapus Gambar")),r.a.createElement(we,null,r.a.createElement(U.b,{className:"btn btn-dark",to:"/asrama/pointsummary"},"Kembali"),r.a.createElement("input",{type:"submit",className:"btn btn-primary ml-3",value:"Submit"}))))}}]),a}(re),hn=Object(d.a)(fn.prototype,"studentService",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn=Object(d.a)(fn.prototype,"masterDataService",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn),Kn=Object(h.f)(Object(f.b)(M)(Yn)),zn=function e(){Object(p.a)(this,e),this.followUpInfos=[]},Hn=(vn=Object(Ae.resolve)(Ht),gn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Follow Up Pelanggaran",!0)).state=new zn,Object(i.a)(n,"studentService",En,Object(c.a)(n)),n.loadReminder=function(){n.commonAjax(n.studentService.getFollowUpReminders,n.recordsLoaded,console.error)},n.recordsLoaded=function(e){n.setState({followUpInfos:e.result.items})},n}return Object(s.a)(a,[{key:"componentReady",value:function(){this.loadReminder()}},{key:"render",value:function(){return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Follow Up Pelanggaran"),r.a.createElement("p",null,"Pelanggaran dengan poin di bawah ",this.getApplicationProfile().warningPointLimit),r.a.createElement(ot,{iconClassName:"fas fa-redo",onClick:this.loadReminder,children:"Reload"}),r.a.createElement("table",{className:"table"},me("No","Siswa","Kelas","Poin","Penanganan","Opsi"),r.a.createElement("tbody",null,this.state.followUpInfos.map((function(e,t){var a,n=e.student;return r.a.createElement("tr",{key:"f-i-".concat(t)},r.a.createElement("td",null,t+1),r.a.createElement("td",null,null===(a=e.student.user)||void 0===a?void 0:a.fullName),r.a.createElement("td",null,n.classLevel,n.classLetter," ",n.schoolName),r.a.createElement("td",null,e.TOTAL_POINT),r.a.createElement("td",null,e.FOLLOW_UP_COUNT),r.a.createElement("td",null,r.a.createElement("a",{className:"btn btn-info btn-sm"},"Follow Up")))})))))}}]),a}(re),En=Object(d.a)(gn.prototype,"studentService",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn),Wn=Object(h.f)(Object(f.b)(M)(Hn)),Jn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="SP1",e.description=void 0,e.classMemberId=void 0,e.classLevel=void 0,e.classLetter=void 0,e.classMemberName=void 0,e.schoolName=void 0,e}return a}(k),Gn=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0,this.record=new Jn},Vn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"warning-letters","asrama")).state=new Gn,n.setStudent=function(e){var t=n.state.record;t.classMemberId=e.id,t.classMemberName=e.name,t.classLetter=e.classLetter,t.classLevel=e.classLevel,t.schoolName=e.schoolName,n.setState({record:t})},n.emptyRecord=function(){return new Jn},n.onSubmit=function(){n.state.record.classMemberId?n.showConfirmation("Submit Data?").then((function(e){var t;e&&(null!==(t=n.state.record.id)&&void 0!==t&&t?n.callApiUpdate(n.state.record.id,n.state.record):n.callApiInsert(n.state.record))})):n.showError("Input tidak lengkap")},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,o,l,i,s=this.state.filter;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Peringatan"),r.a.createElement("hr",null),this.isAdmin()&&r.a.createElement($n,{formRef:this.formRef,setStudent:this.setStudent,resetForm:this.resetForm,onSubmit:this.onSubmit,record:this.state.record,updateRecordProp:this.updateRecordProp}),r.a.createElement("form",{onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("select",{name:"name",className:"form-control-sm",value:null!==(e=s.fieldsFilter.name)&&void 0!==e?e:"",onChange:this.updateFieldsFilter},r.a.createElement("option",{value:""},"Semua"),r.a.createElement("option",null,"SP1"),r.a.createElement("option",null,"SP2"),r.a.createElement("option",null,"SP3")),r.a.createElement("input",{name:"classMember.student.user.fullName",placeholder:"nama siswa",className:"form-control-sm",value:null!==(t=s.fieldsFilter["classMember.student.user.fullName"])&&void 0!==t?t:"",onChange:this.updateFieldsFilter})),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{name:"limit",type:"number",className:"form-control-sm",value:null!==(a=s.limit)&&void 0!==a?a:5,onChange:this.updateFilter})),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}))),r.a.createElement(Re,{activePage:null!==(n=s.page)&&void 0!==n?n:0,limit:null!==(o=s.limit)&&void 0!==o?o:10,totalData:this.state.totalData,onClick:this.loadAtPage}),r.a.createElement(Qn,{items:this.state.items,isAdmin:this.isAdmin(),recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(l=s.page)&&void 0!==l?l:0)*(null!==(i=s.limit)&&void 0!==i?i:10)}))}}]),a}(pt),Qn=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},me("No","Siswa","Kelas","Nama","Deskripsi","Tgl Simpan","Opsi"),r.a.createElement("tbody",null,e.items.map((function(t,a){return r.a.createElement("tr",{key:"category-"+a},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,t.classMemberName),r.a.createElement("td",null,t.classLevel,t.classLetter," ",t.schoolName),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.createdAt),r.a.createElement("td",null,e.isAdmin&&r.a.createElement(Lt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,modelName:"warning-letters",menu:"asrama"})))})))))},$n=function(e){var t,a,n,o,l,i=e.record;return r.a.createElement("div",{className:"record-form mb-3"},r.a.createElement(Pt,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},r.a.createElement(we,{label:"Siswa"},r.a.createElement(qn,{selectItem:e.setStudent})),r.a.createElement(we,null,null!==(t=i.classMemberName)&&void 0!==t?t:""," ",null!==(a=i.classLevel)&&void 0!==a?a:"",null!==(n=i.classLetter)&&void 0!==n?n:""," ",null!==(o=i.schoolName)&&void 0!==o?o:""),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(we,{label:"Nama"},r.a.createElement("select",{required:!0,value:i.name,onChange:e.updateRecordProp,className:"form-control",name:"name"},r.a.createElement("option",null,"SP1"),r.a.createElement("option",null,"SP2"),r.a.createElement("option",null,"SP3"))),r.a.createElement(we,{label:"Deskripsi"},r.a.createElement("textarea",{required:!0,className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(l=i.description)&&void 0!==l?l:""})),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-sm mr-2"}),r.a.createElement("input",{type:"reset",className:"btn btn-secondary btn-sm",onClick:function(t){return e.resetForm()}})))))},Xn=Object(h.f)(Object(f.b)(M)(Vn)),Zn=Object(Pe.a)()(yn=function e(){Object(p.a)(this,e),this.update=function(e){var t=v().concat("api/admin/asrama/config");return at(t,e)},this.loadConfig=function(){var e=v().concat("api/admin/asrama/config");return nt(e)}})||yn,er=function e(){Object(p.a)(this,e),this.applicationProfile={}},tr=(Nn=Object(Ae.resolve)(Zn),Sn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Konfigurasi",!0)).state=new er,Object(i.a)(n,"configService",On,Object(c.a)(n)),n.submit=function(){n.commonAjax(n.configService.update,n.configUpdated,n.showCommonErrorAlert,n.state.applicationProfile)},n.updateField=function(e){var t=n.state.applicationProfile;t[e.target.name]="number"===e.target.type?parseInt(e.target.value):e.target.value,n.setState({applicationProfile:t})},n.configUpdated=function(){n.showInfo("Sukses, silakan muat ulang halaman")},n}return Object(s.a)(a,[{key:"componentReady",value:function(){var e=Object.assign({},this.getApplicationProfile());this.setState({applicationProfile:e})}},{key:"render",value:function(){var e,t,a,n,o=this.state.applicationProfile;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Konfigurasi"),r.a.createElement("hr",null),r.a.createElement("div",{style:{padding:20},className:"border border-secondary rounded"},r.a.createElement("form",null,r.a.createElement(we,{label:"Nama Aplikasi"},r.a.createElement("input",{name:"appName",onChange:this.updateField,className:"form-control",value:null!==(e=o.appName)&&void 0!==e?e:"",required:!0})),r.a.createElement(we,{label:"Deskripsi Aplikasi"},r.a.createElement("input",{name:"appDescription",onChange:this.updateField,className:"form-control",value:null!==(t=o.appDescription)&&void 0!==t?t:""})),r.a.createElement(we,{label:"Batas Poin Peringatan"},r.a.createElement("input",{name:"warningPointLimit",onChange:this.updateField,className:"form-control",type:"number",value:null!==(a=o.warningPointLimit)&&void 0!==a?a:-30,required:!0})),r.a.createElement(we,{label:"Tanggal Rapor"},r.a.createElement("input",{name:"reportDate",onChange:this.updateField,className:"form-control",value:null!==(n=o.reportDate)&&void 0!==n?n:"",required:!0}))),r.a.createElement(we,null,r.a.createElement("button",{className:"btn btn-primary",onClick:this.submit},"Simpan"))))}}]),a}(re),On=Object(d.a)(Sn.prototype,"configService",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn),ar=Object(h.f)(Object(f.b)(M)(tr)),nr=(a(84),function e(){Object(p.a)(this,e),this.classes=[],this.items=[]}),rr=(jn=Object(Ae.resolve)(Ht),Cn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"Rapor Semester",!0)).state=new nr,Object(i.a)(n,"studentService",wn,Object(c.a)(n)),n.selectClassRef=r.a.createRef(),n.loadRaporData=function(e){if(e&&e.preventDefault&&e.preventDefault(),n.selectClassRef.current){var t=n.selectClassRef.current.value;n.commonAjax(n.studentService.getRaporData,n.raporDataLoaded,n.showCommonErrorAlert,t)}},n.downloadData=function(){if(n.selectClassRef.current){var e=n.selectClassRef.current.value;n.commonAjax(n.studentService.downloadRaporData,n.reportCreated,n.showCommonErrorAlert,e)}},n.downloadRapor=function(){if(n.selectClassRef.current){var e=n.selectClassRef.current.value;window.open(v("pages/asrama/report/".concat(e)))}},n.reportCreated=function(e){n.showConfirmation("Save File ".concat(e.name,"?")).then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.url}).click()}))},n.classesLoaded=function(e){n.setState({classes:e.result})},n.raporDataLoaded=function(e){n.setState({items:e.result})},n}return Object(s.a)(a,[{key:"componentReady",value:function(){this.commonAjax(this.studentService.getClasses,this.classesLoaded,this.showCommonErrorAlert)}},{key:"render",value:function(){var e=this.state,t=e.classes,a=e.items;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,this.title),r.a.createElement("form",{onSubmit:this.loadRaporData,className:"mt-5"},r.a.createElement(we,{label:"Kelas"},r.a.createElement("select",{ref:this.selectClassRef,className:"form-control"},t.map((function(e){var t=e.level,a=e.letter,n=e.id,o=e.schoolName;return r.a.createElement("option",{key:"rapor_class_".concat(n),value:n},t,a," ",o)})))),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Load Data"}),r.a.createElement("a",{className:"btn btn-link ml-2",onClick:this.downloadData},"Download Detail Data"),r.a.createElement("a",{className:"btn btn-link ml-2",onClick:this.downloadRapor},"Download Rapor"))),0==a.length?r.a.createElement("div",{className:"alert alert-warning"},"Tidak ada data"):r.a.createElement("div",{className:"mt-5 bg-white border border-secondary",style:{overflow:"auto"}},r.a.createElement("table",{id:"table-report-summary",className:"table table-striped"},me.apply(void 0,Object(xt.a)(this.reportHeader)),r.a.createElement("tbody",null,a.map((function(e,t){var a=e.classMember,n=e.categories;return r.a.createElement("tr",{key:"report_sum_".concat(a.id)},r.a.createElement("td",null,t+1),r.a.createElement("td",null,a.name),r.a.createElement("td",null,a.classLevel,a.classLetter),n.map((function(e){return r.a.createElement(r.a.Fragment,{key:"cat_items_".concat(e.categoryId,"_").concat(a.id)},r.a.createElement("td",null,e.score),r.a.createElement("td",{children:e.predicateLetter}),r.a.createElement("td",{children:e.predicateDescription}))})))}))))))}},{key:"reportHeader",get:function(){var e=["No","Siswa","Kelas"],t=this.state.items;return 0==t.length?[]:(t[0].categories.forEach((function(t){e.push(t.name),e.push("Predikat"),e.push("Keterangan")})),e)}}]),a}(re),wn=Object(d.a)(Cn.prototype,"studentService",[jn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cn),or=Object(h.f)(Object(f.b)(M)(rr)),lr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.code="A",e.description=void 0,e.ruleCategoryName=void 0,e.ruleCategoryId=void 0,e}return a}(k),ir=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0,this.record=new lr,this.categories=[],this.categoriesLoaded=!1},sr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"rule-category-predicates","asrama")).state=new ir,n.onSubmit=function(){n.showConfirmation("Submit Data?").then((function(e){var t,a=n.state.record;e&&(null!==(t=a.id)&&void 0!==t&&t?n.callApiUpdate(a.id,a):n.callApiInsert(a))}))},n.categoriesLoaded=function(e){n.setState({categories:e.result.items,categoriesLoaded:!0},(function(){n.resetForm(),n.loadItems()}))},n.categoriesNotLoaded=function(e){n.setState({categories:[],categoriesLoaded:!0},n.resetForm)},n.loadCategories=function(){var e=new ve;e.limit=0;var t={filter:e,modelName:"rule-categories"};n.commonAjax(n.masterDataService.list,n.categoriesLoaded,n.categoriesNotLoaded,t,"asrama")},n.emptyRecord=function(){var e=new lr;return n.state.categories.length>0&&(e.ruleCategoryId=n.state.categories[0].id),e},n.state.filter.limit=10,n.state.filter.orderBy="name",n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.loadCategories()}))}},{key:"render",value:function(){var e,t,a,n,o,l=this.state,i=l.items,s=l.filter,c=l.categories,u=l.categoriesLoaded,m=l.record,d=l.totalData;if(u&&0==c.length)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Kategori belum ada"));var p=s.fieldsFilter&&s.fieldsFilter.category_id?s.fieldsFilter.category_id:"ALL";return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Predikat Rapor"),r.a.createElement("hr",null),r.a.createElement(ur,{categories:c,reloadCategories:this.loadCategories,formRef:this.formRef,resetForm:this.resetForm,onSubmit:this.onSubmit,record:m,updateRecordProp:this.updateRecordProp}),r.a.createElement("form",{onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"name",placeholder:"nama",className:"form-control-sm",value:s.fieldsFilter?s.fieldsFilter.name:"",onChange:this.updateFieldsFilter}),r.a.createElement("input",{name:"code",placeholder:"kode",className:"form-control-sm",value:s.fieldsFilter?s.fieldsFilter.kode:"",onChange:this.updateFieldsFilter}),r.a.createElement("select",{value:p,className:"form-control-sm",name:"category_id",onChange:this.updateFieldsFilter},[{id:"",name:"Semua Kategori"}].concat(Object(xt.a)(c)).map((function(e){return r.a.createElement("option",{key:"filter-cat-"+e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(ot,{className:"btn btn-sm",iconClassName:"fas fa-redo",onClick:this.loadCategories},"Reload")))),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{type:"number",name:"limit",className:"form-control-sm",value:null!==(e=s.limit)&&void 0!==e?e:5,onChange:this.updateFilter})),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}))),r.a.createElement(Re,{activePage:null!==(t=s.page)&&void 0!==t?t:0,limit:null!==(a=s.limit)&&void 0!==a?a:5,totalData:d,onClick:this.loadAtPage}),r.a.createElement(cr,{recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(n=s.page)&&void 0!==n?n:0)*(null!==(o=s.limit)&&void 0!==o?o:10),items:i}))}}]),a}(pt),cr=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},me("No","Kode","Nama","Deskripsi","Kategori","Opsi"),r.a.createElement("tbody",null,e.items.map((function(t,a){return r.a.createElement("tr",{key:"RulePoint-".concat(a)},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,t.code),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.ruleCategoryName),r.a.createElement("td",null,r.a.createElement(Lt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,modelName:"rule-category-predicates",menu:"asrama"})))})))))},ur=function(e){var t,a;return r.a.createElement("form",{className:"record-form mb-3",onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(Pt,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},r.a.createElement(we,{label:"Kode"},r.a.createElement("select",{required:!0,value:e.record.code,className:"form-control-sm",name:"code",onChange:e.updateRecordProp},r.a.createElement("option",null,"A"),r.a.createElement("option",null,"B"),r.a.createElement("option",null,"C"),r.a.createElement("option",null,"D"))),r.a.createElement(we,{label:"Nama"},r.a.createElement("textarea",{className:"form-control",name:"name",onChange:e.updateRecordProp,value:null!==(t=e.record.name)&&void 0!==t?t:""})),r.a.createElement(we,{label:"Deskripsi"},r.a.createElement("textarea",{className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(a=e.record.description)&&void 0!==a?a:""})),r.a.createElement(we,{label:"Category"},r.a.createElement("div",{className:"input-group"},r.a.createElement("select",{required:!0,value:e.record.ruleCategoryId,className:"form-control-sm",name:"ruleCategoryId",onChange:e.updateRecordProp},e.categories.map((function(e){return r.a.createElement("option",{key:"cat-".concat(e.id),value:e.id},e.name)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(ot,{className:"btn btn-sm",iconClassName:"fas fa-redo",onClick:e.reloadCategories},"Reload")))),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-sm mr-2"}),r.a.createElement("input",{value:"Reset",type:"reset",className:"btn btn-secondary btn-sm",onClick:function(t){return e.resetForm()}}))))},mr=Object(h.f)(Object(f.b)(M)(sr)),dr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="",e.description=void 0,e.student=void 0,e.classMemberId=void 0,e.classMemberName=void 0,e.classLevel=void 0,e.classLetter=void 0,e.schoolName=void 0,e.point=0,e}return a}(k),pr=function e(){Object(p.a)(this,e),this.items=[],this.filter=new ve,this.totalData=0,this.record=new dr},fr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"general-broken-rules","asrama")).state=new pr,n.setStudent=function(e){var t=n.state.record;t.student=e,t.classMemberId=e.id,t.classMemberName=e.name,t.classLetter=e.classLetter,t.classLevel=e.classLevel,t.schoolName=e.schoolName,n.setState({record:t})},n.emptyRecord=function(){return new dr},n.onSubmit=function(){n.state.record.classMemberId?n.showConfirmation("Submit Data?").then((function(e){var t;e&&(null!==(t=n.state.record.id)&&void 0!==t&&t?n.callApiUpdate(n.state.record.id,n.state.record):n.callApiInsert(n.state.record))})):n.showError("Input tidak lengkap")},n.state.filter=new ve,n.state.filter.orderBy="classMember.student.user.fullName",n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,o,l,i,s=this.state.filter;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Pelanggaran Umum"),r.a.createElement("hr",null),r.a.createElement(br,{formRef:this.formRef,setStudent:this.setStudent,resetForm:this.resetForm,onSubmit:this.onSubmit,record:this.state.record,updateRecordProp:this.updateRecordProp}),r.a.createElement("form",{onSubmit:this.reload},r.a.createElement(we,{label:"Cari"},r.a.createElement("input",{name:"name",placeholder:"nama pelanggaran",className:"form-control-sm",value:null!==(e=s.fieldsFilter.name)&&void 0!==e?e:"",onChange:this.updateFieldsFilter}),r.a.createElement("input",{name:"classMember.student.user.fullName",placeholder:"nama siswa",className:"form-control-sm",value:null!==(t=s.fieldsFilter["classMember.student.user.fullName"])&&void 0!==t?t:"",onChange:this.updateFieldsFilter})),r.a.createElement(we,{label:"Jumlah Tampilan"},r.a.createElement("input",{name:"limit",type:"number",className:"form-control-sm",value:null!==(a=s.limit)&&void 0!==a?a:5,onChange:this.updateFilter})),r.a.createElement(we,null,r.a.createElement("input",{className:"btn btn-primary btn-sm",type:"submit",value:"Submit"}))),r.a.createElement(Re,{activePage:null!==(n=s.page)&&void 0!==n?n:0,limit:null!==(o=s.limit)&&void 0!==o?o:10,totalData:this.state.totalData,onClick:this.loadAtPage}),r.a.createElement(hr,{items:this.state.items,isAdmin:this.isAdmin(),recordLoaded:this.oneRecordLoaded,recordDeleted:this.loadItems,startingNumber:(null!==(l=s.page)&&void 0!==l?l:0)*(null!==(i=s.limit)&&void 0!==i?i:10)}))}}]),a}(pt),hr=function(e){return r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("table",{className:"table table-striped"},me("No","Siswa","Kelas","Nama","Deskripsi","Poin","Opsi"),r.a.createElement("tbody",null,e.items.map((function(t,a){return r.a.createElement("tr",{key:"category-"+a},r.a.createElement("td",null,a+1+e.startingNumber),r.a.createElement("td",null,t.classMemberName),r.a.createElement("td",null,t.classLevel,t.classLetter," ",t.schoolName),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.point),r.a.createElement("td",null,r.a.createElement(Lt,{recordLoaded:e.recordLoaded,recordDeleted:e.recordDeleted,record:t,menu:"asrama",modelName:"general-broken-rules"})))})))))},br=function(e){var t,a=e.record;return r.a.createElement("div",{className:"record-form mb-3"},r.a.createElement(Pt,{show:!1,ref:e.formRef,toggleable:!0,title:"Record Form"},r.a.createElement(we,{label:"Siswa"},r.a.createElement(qn,{selectItem:e.setStudent})),r.a.createElement(we,null,a.classMemberName," - ",a.classLevel,a.classLetter," ",a.schoolName),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(we,{label:"Pelanggaran"},r.a.createElement("input",{required:!0,value:a.name,onChange:e.updateRecordProp,className:"form-control",name:"name"})),r.a.createElement(we,{label:"Deskripsi"},r.a.createElement("textarea",{required:!0,className:"form-control",name:"description",onChange:e.updateRecordProp,value:null!==(t=a.description)&&void 0!==t?t:""})),r.a.createElement(we,{label:"Poin"},r.a.createElement("input",{required:!0,className:"form-control",name:"point",onChange:e.updateRecordProp,value:a.point})),r.a.createElement(we,null,r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-sm mr-2"}),r.a.createElement("input",{type:"reset",className:"btn btn-secondary btn-sm",onClick:function(t){return e.resetForm()}})))))},vr=Object(h.f)(Object(f.b)(M)(fr)),gr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!1)).setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/home",render:function(e){return r.a.createElement(ce,null)}}),r.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(ce,null)}}),r.a.createElement(h.a,{exact:!0,path:"/about",render:function(e){return r.a.createElement(Un,null)}})),r.a.createElement(Or,null),r.a.createElement(Sr,null),r.a.createElement(Nr,null),r.a.createElement(jr,null),r.a.createElement(Er,null),r.a.createElement(yr,null))}},{key:"componentDidMount",value:function(){}}]),a}(I),Er=function(e){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/settings/config",render:function(e){return r.a.createElement(ar,null)}}))},yr=function(e){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/report/studentreport",render:function(e){return r.a.createElement(or,null)}}))},Nr=function(e){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/management",render:function(e){return r.a.createElement(Et,null)}}),r.a.createElement(h.a,{exact:!0,path:"/management/musyrifmanagement",render:function(e){return r.a.createElement(vt,null)}}),r.a.createElement(h.a,{exact:!0,path:"/management/rule_category",render:function(e){return r.a.createElement(Ut,null)}}),r.a.createElement(h.a,{exact:!0,path:"/management/rule_point",render:function(e){return r.a.createElement(zt,null)}}),r.a.createElement(h.a,{exact:!0,path:"/management/warning_action",render:function(e){return r.a.createElement(Xn,null)}}),r.a.createElement(h.a,{exact:!0,path:"/management/category_predicate",render:function(e){return r.a.createElement(mr,null)}}),r.a.createElement(h.a,{exact:!0,path:"/management/rule_violation",render:function(e){return r.a.createElement(vr,null)}}))},Sr=function(e){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/asrama/studentlist",render:function(e){return r.a.createElement(Xt,null)}}),r.a.createElement(h.a,{exact:!0,path:"/asrama/inputpoint",render:function(e){return r.a.createElement(Ya,null)}}),r.a.createElement(h.a,{exact:!0,path:"/asrama/pointsummary",render:function(e){return r.a.createElement(Za,null)}}),r.a.createElement(h.a,{exact:!0,path:"/asrama/pointrecordedit",render:function(e){return r.a.createElement(Kn,null)}}),r.a.createElement(h.a,{exact:!0,path:"/asrama/medicalrecord",render:function(e){return r.a.createElement(Fn,null)}}))},Or=function(e){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(te,null)}}))},jr=function(e){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/dashboard",render:function(e){return console.debug("dashboard path"),r.a.createElement(ie,null)}}),r.a.createElement(h.a,{exact:!0,path:"/dashboard/followup",render:function(e){return r.a.createElement(Wn,null)}}))},Cr=Object(h.f)(Object(f.b)(M,(function(e){return{}}))(gr)),wr=(a(85),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e,t=this,a=this.props.parentMenu;if(null==a)return null;var n=null!==(e=this.props.sidebarMenus)&&void 0!==e?e:[],o=this.getLoggedUser();return r.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},r.a.createElement(kr,{show:null!=a,brand:a}),n.map((function(e){if(e.userAuthorized&&!e.userAuthorized(o))return null;var n=t.isSidebarActive(e)?"menu-active":"regular-menu";return r.a.createElement("li",{className:"sidebar-item ".concat(n),key:"SIDEBAR_".concat(e.code)},r.a.createElement(U.b,{to:[a.url,e.url].join("/")},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Y.getIconClassName(e)})),r.a.createElement("span",{className:"menu-label"},e.name)))})))}}]),a}(I)),kr=function(e){return 0==e.show?null:r.a.createElement(n.Fragment,null,r.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},r.a.createElement("div",{className:"text-center pt-2 pb-2"},r.a.createElement("h3",{className:"text-dark"},r.a.createElement("i",{className:Y.getIconClassName(e.brand)})),r.a.createElement(U.b,{to:e.brand.url,style:{textDecoration:"none"}},r.a.createElement("h4",{className:"text-dark"},e.brand.name)))),r.a.createElement("li",{className:"sidebar-item-brand "},r.a.createElement(U.b,{to:e.brand.url},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Y.getIconClassName(e.brand)})))))},Rr=Object(h.f)(Object(f.b)(M,(function(e){return{performLogout:function(t){return e(_(t))}}}))(wr)),Ar=(a(86),function e(){Object(p.a)(this,e),this.showSidebar=!1,this.activeMenuCode=null,this.menu=void 0,this.sidebarMenus=void 0}),Pr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,!1)).state=new Ar,n.currentPathName="",n.setMenuNull=function(){n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:void 0})},n.setMenu=function(e){null!=e&&n.setState({menu:e,sidebarMenus:void 0,showSidebar:e.showSidebar,activeMenuCode:e.code})},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/"),a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){var t=K();try{for(var a=0;a<t.length;a++){var n=t[a];if(n.url=="/"+e)return n}return null}catch(r){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t=n.state.menu;return t&&null!=t.subMenus&&(null===(e=t.subMenus)||void 0===e?void 0:e.length)>0?t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar,t=e?"app-content":"content";return r.a.createElement(n.Fragment,null,r.a.createElement(V,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),r.a.createElement("div",{id:"content-wrapper",className:"container-fluid  ".concat(t)},r.a.createElement(Cr,{setSidebarMenus:this.setSidebarMenus})),e&&r.a.createElement(Rr,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}))}}]),a}(I),Dr=Object(h.f)(Object(f.b)(M,(function(e){return{performLogout:function(t){return e(_(t))}}}))(Pr));a(87);function Lr(e){return e.realtime?r.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},r.a.createElement("div",{className:"col-1"},r.a.createElement("span",{style:{marginBottom:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})),r.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},r.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}}))):r.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r.a.createElement("span",{className:" "},"Loading..."))}var Ir,Mr,Fr,_r,Ur=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n.state={timer:130,intervalId:0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?r.a.createElement(Lr,{progress:this.props.progress,realtime:this.props.realtime}):r.a.createElement("div",{className:e},r.a.createElement(Lr,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(n.Component),xr=Object(Pe.a)()(Ir=function e(){Object(p.a)(this,e),this.requestApplicationId=function(e,t){var a=v("api/public/asrama/config");nt(a).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;if(!a.headers["access-token"]||""==a.headers["access-token"])throw new Error("Unauthenticated");Qe(a),console.debug("Header.AccessToken:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("Req app id: ",e),t()}))},this.getLoggedUser=function(e,t){var a=v()+"api/user";nt(a).then(e).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){var a,n=v()+"api/public/asrama/config";(a=n,new Promise((function(e,t){tt.a.get(a,{headers:We()}).then((function(a){var n=a.data;n.rawAxiosResponse=a,"00"==n.code?e(n):t(n)})).catch((function(e){console.error(e),t(e)}))}))).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId No Auth: ",e),t()}))}})||Ir,Tr=function e(){Object(p.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.withProgress=!1,this.appIdStatus="Loading App Id",this.errorAuthenticatingApp=!1},qr=(Mr=Object(Ae.resolve)(xr),Fr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).wsConnected=!1,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.wsUpdateHandler=void 0,Object(i.a)(n,"userService",_r,Object(c.a)(n)),n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.requestAppId=function(){n.setState({appIdStatus:"Authenticating application",errorAuthenticatingApp:!1}),n.userService.requestApplicationId((function(e){n.getLoggedUser(e)}),n.retryRequestAppId)},n.getLoggedUser=function(e){n.userService.getLoggedUser((function(t){n.setState({errorAuthenticatingApp:!1},(function(){n.props.setRequestId(e,Object(c.a)(n)),n.props.setLoggedUser(t.result),n.refresh()}))}),console.error)},n.retryRequestAppId=function(){n.setState({appIdStatus:"Authenticating application (Retrying)",errorAuthenticatingApp:!1}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.setState({errorAuthenticatingApp:!1})}),(function(){return n.setState({errorAuthenticatingApp:!0})}))},n.smoothEndLoading=function(){E((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.handleProgress=function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,r=Math.floor(a);(a<0||a>100)&&n.endLoading(),n.setState({loadingPercentage:r})},n.initWebsocket=function(){var e;e=v("withProgress-app"),e,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(null!=t)for(var n=0;n<t.length;n++)D.push(t[n])}({subscribeUrl:"/wsResp/progress/".concat(n.props.requestId),callback:n.handleProgress},{subscribeUrl:"/wsResp/".concat(n.props.requestId,"/update"),callback:function(e){return n.handleWsUpdate(e)}}),n.wsConnected=!0},n.handleWsUpdate=function(e){n.wsUpdateHandler&&n.wsUpdateHandler(e)},n.setWsUpdateHandler=function(e){n.wsUpdateHandler=e},n.resetWsUpdateHandler=function(){n.setWsUpdateHandler(void 0)},n.state=new Tr,n.props.setMainApp(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.incrementLoadings(),this.setState({loading:!0,withProgress:e})}},{key:"endLoading",value:function(){this.decrementLoadings(),0==this.loadings&&(this.state.withProgress?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var o=this;this.alertOnYesCallback=function(e){o.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){o.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",g()+e.pageIcon)}}(this.props.applicationProfile),this.props.requestId&&!this.wsConnected&&this.initWebsocket()}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;return this.props.requestId?r.a.createElement(n.Fragment,null,r.a.createElement(Br,{withProgress:this.state.withProgress,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?r.a.createElement(C,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(Dr,null)):r.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},r.a.createElement("h2",null,this.state.appIdStatus),this.state.errorAuthenticatingApp?r.a.createElement(ot,{iconClassName:"fas fa-redo",onClick:this.retryRequestAppId,children:"Retry"}):r.a.createElement(Q,null))}}]),a}(n.Component),_r=Object(d.a)(Fr.prototype,"userService",[Mr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fr);function Br(e){return 1==e.loading?r.a.createElement(Ur,{withProgress:e.withProgress,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var Yr=Object(h.f)(Object(f.b)(M,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:Object.assign(new R,e),meta:{type:"set_logged_user"}}}(t))},setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){return{type:"SET_REQUEST_ID",payload:Object(F.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}}}(t,a))}}}))(qr)),Kr=new(a(90).a);Kr.bind(Zn).toSelf().inSingletonScope(),Kr.bind(dt).toSelf().inSingletonScope(),Kr.bind(Ht).toSelf().inSingletonScope(),Kr.bind(xr).toSelf().inSingletonScope(),Kr.bind(rt).toSelf().inSingletonScope();var zr=function(e){var t=ze();return r.a.createElement(f.a,{store:t},r.a.createElement(Ae.Provider,{container:Kr},r.a.createElement(U.a,null,r.a.createElement(Yr,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(zr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.1aadc420.chunk.js.map